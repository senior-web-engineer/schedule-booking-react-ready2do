[{"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\index.js":"1","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\App.js":"2","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\registerServiceWorker.js":"3","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\store\\reduxStore.js":"4","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\Theme.js":"5","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\authProvider.js":"6","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaRouter.js":"7","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\utente\\UtenteRouter.js":"8","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\pages\\HomePage.js":"9","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\registrazione\\RegistrazioneStruttura.js":"10","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\store\\reducers\\strutture.reducer.js":"11","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\store\\reducers\\user.reducer.js":"12","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\store\\sagas\\root.sagas.js":"13","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaProvider.js":"14","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaEvento.js":"15","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaEditDati.js":"16","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaEditImages.js":"17","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaLayout.js":"18","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaEditCalendari.js":"19","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaHome.js":"20","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaListaUtenti.js":"21","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaEventoPrenotazione.js":"22","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaEditLocation.js":"23","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaListaLocations.js":"24","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaListaTipologiaLezioni.js":"25","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaEditTipologiaLezione.js":"26","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaListaTipologiaAbbonamenti.js":"27","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaEditTipologiaAbbonamento.js":"28","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\utente\\UtenteLayout.js":"29","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\utente\\UtenteProfilo.js":"30","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\utente\\UtentePrenotazioni.js":"31","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\registrazione\\RegisterStrutturaStep1.js":"32","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\registrazione\\RegisterStrutturaStep2.js":"33","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\registrazione\\RegisterStrutturaStep3.js":"34","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\store\\selectors\\user.selectors.js":"35","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\store\\selectors\\strutture.selectors.js":"36","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\dettaglio-utente\\StrutturaDettaglioUtente.js":"37","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\commons\\R2DHeader.js":"38","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\store\\sagas\\strutture.sagas.js":"39","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\store\\sagas\\users.sagas.js":"40","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\store\\actions\\user.actions.js":"41","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\store\\actions\\strutture.actions.js":"42","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\OrarioAperturaEdit.js":"43","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\IndirizzoEdit.js":"44","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\R2DClienteEditItem.js":"45","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaCalendarAdmin.js":"46","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\ImageGalleryEdit.js":"47","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\R2DCalendariContainer.js":"48","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaOrarioView.js":"49","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaContattiView.js":"50","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaMap.js":"51","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\commons\\R2DLoader.js":"52","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\utente\\UtenteStruttureSeguite.js":"53","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\utente\\UtentePrenotazioneFilter.js":"54","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\editEvento\\R2DEditEventoForm.js":"55","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\api\\strutture.eventi.api.js":"56","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\api\\strutture.utenti.api.js":"57","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\api\\strutture.api.js":"58","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\commons\\sidenav\\R2DSideNav.js":"59","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\store\\sagas\\sagas.utils.js":"60","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\api\\users.api.js":"61","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\api\\strutture.images.api.js":"62","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaCalendarView.js":"63","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\config.js":"64","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\applicationInsights.js":"65","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\api\\apiUtils.js":"66","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\api\\strutture.images.api.mock.js":"67","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\commons\\sidenav\\R2DSideNavHeader.js":"68","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\api\\strutture.api.mock.js":"69","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\GiornoAperturaEdit.js":"70","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\dettaglio-utente\\PrenotazioniUtenteSection.js":"71","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\dettaglio-utente\\CertificatiUtenteSection.js":"72","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\dettaglio-utente\\AbbonamentiUtenteSection.js":"73","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\utente\\UtenteProfiloEdit.js":"74","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\dettaglio-utente\\CertificatoUtenteAdd.js":"75","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\dettaglio-utente\\PrenotazioniUtenteList.js":"76","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\dettaglio-utente\\CertificatiUtenteList.js":"77","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\dettaglio-utente\\PrenotazioneUtenteAdd.js":"78","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\dettaglio-utente\\AbbonamentoUtenteAdd.js":"79","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\dettaglio-utente\\AbbonamentiUtenteList.js":"80"},{"size":1376,"mtime":1610276249254,"results":"81","hashOfConfig":"82"},{"size":1492,"mtime":1600893441369,"results":"83","hashOfConfig":"82"},{"size":4129,"mtime":1592038389021,"results":"84","hashOfConfig":"82"},{"size":1567,"mtime":1592038389025,"results":"85","hashOfConfig":"82"},{"size":753,"mtime":1592038388993,"results":"86","hashOfConfig":"82"},{"size":1970,"mtime":1610220513173,"results":"87","hashOfConfig":"82"},{"size":6933,"mtime":1610291472282,"results":"88","hashOfConfig":"82"},{"size":1390,"mtime":1592038389020,"results":"89","hashOfConfig":"82"},{"size":2490,"mtime":1592038389003,"results":"90","hashOfConfig":"82"},{"size":4870,"mtime":1610127327572,"results":"91","hashOfConfig":"82"},{"size":6302,"mtime":1592038389024,"results":"92","hashOfConfig":"82"},{"size":2600,"mtime":1592038389025,"results":"93","hashOfConfig":"82"},{"size":802,"mtime":1592038389026,"results":"94","hashOfConfig":"82"},{"size":1602,"mtime":1592038389017,"results":"95","hashOfConfig":"82"},{"size":4840,"mtime":1610922050543,"results":"96","hashOfConfig":"82"},{"size":1688,"mtime":1622059649949,"results":"97","hashOfConfig":"82"},{"size":2931,"mtime":1592038389011,"results":"98","hashOfConfig":"82"},{"size":784,"mtime":1592038389014,"results":"99","hashOfConfig":"82"},{"size":2894,"mtime":1592038389010,"results":"100","hashOfConfig":"82"},{"size":8744,"mtime":1592038389013,"results":"101","hashOfConfig":"82"},{"size":7913,"mtime":1609507678900,"results":"102","hashOfConfig":"82"},{"size":11681,"mtime":1592038389013,"results":"103","hashOfConfig":"82"},{"size":9120,"mtime":1610307040735,"results":"104","hashOfConfig":"82"},{"size":4486,"mtime":1592064075261,"results":"105","hashOfConfig":"82"},{"size":4774,"mtime":1592038389015,"results":"106","hashOfConfig":"82"},{"size":13136,"mtime":1610307301632,"results":"107","hashOfConfig":"82"},{"size":4685,"mtime":1592038389014,"results":"108","hashOfConfig":"82"},{"size":9490,"mtime":1610307191634,"results":"109","hashOfConfig":"82"},{"size":784,"mtime":1592038389018,"results":"110","hashOfConfig":"82"},{"size":552,"mtime":1592038389019,"results":"111","hashOfConfig":"82"},{"size":7860,"mtime":1592038389018,"results":"112","hashOfConfig":"82"},{"size":8218,"mtime":1610186613573,"results":"113","hashOfConfig":"82"},{"size":12264,"mtime":1610186642189,"results":"114","hashOfConfig":"82"},{"size":4196,"mtime":1610189687210,"results":"115","hashOfConfig":"82"},{"size":1550,"mtime":1592038389028,"results":"116","hashOfConfig":"82"},{"size":1543,"mtime":1592038389028,"results":"117","hashOfConfig":"82"},{"size":6143,"mtime":1609600736806,"results":"118","hashOfConfig":"82"},{"size":6588,"mtime":1592038389000,"results":"119","hashOfConfig":"82"},{"size":8542,"mtime":1610204248623,"results":"120","hashOfConfig":"82"},{"size":5502,"mtime":1592038389027,"results":"121","hashOfConfig":"82"},{"size":3202,"mtime":1592038389023,"results":"122","hashOfConfig":"82"},{"size":5848,"mtime":1592038389023,"results":"123","hashOfConfig":"82"},{"size":8628,"mtime":1610292128682,"results":"124","hashOfConfig":"82"},{"size":4433,"mtime":1592038389006,"results":"125","hashOfConfig":"82"},{"size":4834,"mtime":1592038389007,"results":"126","hashOfConfig":"82"},{"size":6386,"mtime":1610918502636,"results":"127","hashOfConfig":"82"},{"size":8409,"mtime":1592038389005,"results":"128","hashOfConfig":"82"},{"size":3228,"mtime":1592038389006,"results":"129","hashOfConfig":"82"},{"size":4790,"mtime":1610210035424,"results":"130","hashOfConfig":"82"},{"size":1120,"mtime":1592038389009,"results":"131","hashOfConfig":"82"},{"size":1721,"mtime":1592038389016,"results":"132","hashOfConfig":"82"},{"size":1148,"mtime":1592038389000,"results":"133","hashOfConfig":"82"},{"size":5346,"mtime":1592038389020,"results":"134","hashOfConfig":"82"},{"size":4314,"mtime":1610292465042,"results":"135","hashOfConfig":"82"},{"size":28420,"mtime":1610306704435,"results":"136","hashOfConfig":"82"},{"size":9840,"mtime":1609696476534,"results":"137","hashOfConfig":"82"},{"size":3395,"mtime":1600880063792,"results":"138","hashOfConfig":"82"},{"size":3635,"mtime":1610127597034,"results":"139","hashOfConfig":"82"},{"size":4175,"mtime":1592038389001,"results":"140","hashOfConfig":"82"},{"size":468,"mtime":1592038389026,"results":"141","hashOfConfig":"82"},{"size":5620,"mtime":1592038388996,"results":"142","hashOfConfig":"82"},{"size":2424,"mtime":1592038388995,"results":"143","hashOfConfig":"82"},{"size":6434,"mtime":1610918296803,"results":"144","hashOfConfig":"82"},{"size":1094,"mtime":1613822058271,"results":"145","hashOfConfig":"82"},{"size":490,"mtime":1592038388997,"results":"146","hashOfConfig":"82"},{"size":1414,"mtime":1592038388993,"results":"147","hashOfConfig":"82"},{"size":951,"mtime":1592038388996,"results":"148","hashOfConfig":"82"},{"size":2032,"mtime":1592038389001,"results":"149","hashOfConfig":"82"},{"size":4685,"mtime":1592038388994,"results":"150","hashOfConfig":"82"},{"size":5940,"mtime":1610291454884,"results":"151","hashOfConfig":"82"},{"size":4856,"mtime":1609696652607,"results":"152","hashOfConfig":"82"},{"size":3025,"mtime":1600867081383,"results":"153","hashOfConfig":"82"},{"size":2915,"mtime":1600867074805,"results":"154","hashOfConfig":"82"},{"size":8534,"mtime":1592038389019,"results":"155","hashOfConfig":"82"},{"size":5857,"mtime":1609510726630,"results":"156","hashOfConfig":"82"},{"size":4671,"mtime":1609769497070,"results":"157","hashOfConfig":"82"},{"size":2980,"mtime":1600866298812,"results":"158","hashOfConfig":"82"},{"size":16327,"mtime":1609679361188,"results":"159","hashOfConfig":"82"},{"size":11877,"mtime":1609510532215,"results":"160","hashOfConfig":"82"},{"size":4137,"mtime":1600793935465,"results":"161","hashOfConfig":"82"},{"filePath":"162","messages":"163","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},"16cw494",{"filePath":"165","messages":"166","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"167","usedDeprecatedRules":"164"},{"filePath":"168","messages":"169","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"170","messages":"171","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"172","messages":"173","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"174","messages":"175","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"176","messages":"177","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"178","usedDeprecatedRules":"164"},{"filePath":"179","messages":"180","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"181","usedDeprecatedRules":"164"},{"filePath":"182","messages":"183","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"184","usedDeprecatedRules":"164"},{"filePath":"185","messages":"186","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"187","usedDeprecatedRules":"164"},{"filePath":"188","messages":"189","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"190","messages":"191","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"192","usedDeprecatedRules":"164"},{"filePath":"193","messages":"194","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"195","messages":"196","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"197","usedDeprecatedRules":"164"},{"filePath":"198","messages":"199","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"200","usedDeprecatedRules":"164"},{"filePath":"201","messages":"202","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"203"},{"filePath":"204","messages":"205","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"206","usedDeprecatedRules":"164"},{"filePath":"207","messages":"208","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"209","usedDeprecatedRules":"164"},{"filePath":"210","messages":"211","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"212","messages":"213","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"214","usedDeprecatedRules":"164"},{"filePath":"215","messages":"216","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"217","messages":"218","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"219","usedDeprecatedRules":"164"},{"filePath":"220","messages":"221","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"222","usedDeprecatedRules":"164"},{"filePath":"223","messages":"224","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"225","usedDeprecatedRules":"164"},{"filePath":"226","messages":"227","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"228","usedDeprecatedRules":"164"},{"filePath":"229","messages":"230","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"231","usedDeprecatedRules":"164"},{"filePath":"232","messages":"233","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"234","usedDeprecatedRules":"164"},{"filePath":"235","messages":"236","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"237","usedDeprecatedRules":"164"},{"filePath":"238","messages":"239","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"209","usedDeprecatedRules":"164"},{"filePath":"240","messages":"241","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"242","usedDeprecatedRules":"164"},{"filePath":"243","messages":"244","errorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"245","usedDeprecatedRules":"164"},{"filePath":"246","messages":"247","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"248","usedDeprecatedRules":"164"},{"filePath":"249","messages":"250","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"251","usedDeprecatedRules":"164"},{"filePath":"252","messages":"253","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"254","usedDeprecatedRules":"164"},{"filePath":"255","messages":"256","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"257","usedDeprecatedRules":"164"},{"filePath":"258","messages":"259","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"260","messages":"261","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"262","usedDeprecatedRules":"164"},{"filePath":"263","messages":"264","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":1,"source":"265","usedDeprecatedRules":"164"},{"filePath":"266","messages":"267","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"268","usedDeprecatedRules":"164"},{"filePath":"269","messages":"270","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"271","usedDeprecatedRules":"164"},{"filePath":"272","messages":"273","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"274","messages":"275","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"276","messages":"277","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"278","usedDeprecatedRules":"164"},{"filePath":"279","messages":"280","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"281","usedDeprecatedRules":"164"},{"filePath":"282","messages":"283","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"284","messages":"285","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"286","usedDeprecatedRules":"164"},{"filePath":"287","messages":"288","errorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"289","usedDeprecatedRules":"164"},{"filePath":"290","messages":"291","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"292","usedDeprecatedRules":"164"},{"filePath":"293","messages":"294","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"295","usedDeprecatedRules":"164"},{"filePath":"296","messages":"297","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"298","usedDeprecatedRules":"164"},{"filePath":"299","messages":"300","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"301","messages":"302","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"303","usedDeprecatedRules":"164"},{"filePath":"304","messages":"305","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"306","usedDeprecatedRules":"164"},{"filePath":"307","messages":"308","errorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"309","usedDeprecatedRules":"164"},{"filePath":"310","messages":"311","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"312","usedDeprecatedRules":"164"},{"filePath":"313","messages":"314","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"315","messages":"316","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"317","usedDeprecatedRules":"164"},{"filePath":"318","messages":"319","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"320","usedDeprecatedRules":"164"},{"filePath":"321","messages":"322","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"323","usedDeprecatedRules":"164"},{"filePath":"324","messages":"325","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"326","messages":"327","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"328","messages":"329","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"330","messages":"331","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"332","usedDeprecatedRules":"164"},{"filePath":"333","messages":"334","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"335","usedDeprecatedRules":"164"},{"filePath":"336","messages":"337","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"338","messages":"339","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"340","messages":"341","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"342","messages":"343","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"344","usedDeprecatedRules":"164"},{"filePath":"345","messages":"346","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"347","messages":"348","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"349","usedDeprecatedRules":"164"},{"filePath":"350","messages":"351","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"352","messages":"353","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"354","messages":"355","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"356","usedDeprecatedRules":"164"},{"filePath":"357","messages":"358","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"359","usedDeprecatedRules":"164"},{"filePath":"360","messages":"361","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},{"filePath":"362","messages":"363","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"364","usedDeprecatedRules":"164"},{"filePath":"365","messages":"366","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"367","usedDeprecatedRules":"164"},{"filePath":"368","messages":"369","errorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":1,"source":"370","usedDeprecatedRules":"164"},{"filePath":"371","messages":"372","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"373","usedDeprecatedRules":"164"},{"filePath":"374","messages":"375","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"164"},"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\index.js",[],["376","377"],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\App.js",["378"],"import React from 'react';\r\nimport { Route, Switch } from 'react-router';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport HomePage from './components/pages/HomePage';\r\nimport StrutturaRouter from './components/struttura/StrutturaRouter'\r\nimport Theme from './Theme';\r\n\r\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport itLocale from \"date-fns/locale/it\";\r\nimport UtenteRouter from './components/utente/UtenteRouter'\r\n\r\nimport AzureAD from 'react-aad-msal';\r\nimport { authProvider } from './authProvider'\r\nimport { getStore } from './store/reduxStore'\r\nimport RegistrazioneStruttura from './components/registrazione/RegistrazioneStruttura';\r\n\r\n\r\nexport default () => (\r\n  <ThemeProvider theme={Theme}>\r\n    <MuiPickersUtilsProvider utils={DateFnsUtils} locale={itLocale}>\r\n      {/* Primo livello di Routing per distinguere la Home (landing) dalle pagine delle struttura */}\r\n      <Switch>\r\n        <Route exact path='/'>\r\n          <HomePage />\r\n        </Route>\r\n        <Route exact path='/registrazione'>\r\n          <AzureAD forceLogin provider={authProvider} reduxStore={getStore()}>\r\n            <RegistrazioneStruttura />\r\n          </AzureAD>\r\n        </Route>\r\n        <Route path='/me/'>\r\n          <UtenteRouter />\r\n        </Route>\r\n        <Route path='/:nomeStruttura' >\r\n          <StrutturaRouter />\r\n        </Route>\r\n      </Switch>\r\n    </MuiPickersUtilsProvider>\r\n  </ThemeProvider>\r\n);\r\n","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\registerServiceWorker.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\store\\reduxStore.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\Theme.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\authProvider.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaRouter.js",["379"],"import log from 'loglevel';\r\nimport React from 'react'\r\nimport { Switch, Route, useRouteMatch, useParams } from 'react-router-dom'\r\nimport AzureAD from 'react-aad-msal';\r\nimport { useSelector } from 'react-redux'\r\nimport { getStore } from '../../store/reduxStore'\r\nimport { StruttureSelectors } from '../../store/selectors/strutture.selectors'\r\nimport { authProvider } from '../../authProvider'\r\nimport StrutturaEvento from './StrutturaEvento';\r\nimport StrutturaProvider from '../struttura/StrutturaProvider'\r\nimport StrutturaLayout from './StrutturaLayout';\r\nimport StrutturaEditDati from './StrutturaEditDati';\r\nimport StrutturaEditImages from './StrutturaEditImages';\r\nimport StrutturaEditCalendari from './StrutturaEditCalendari';\r\nimport StrutturaHome from './StrutturaHome';\r\nimport StrutturaListaUtenti from './StrutturaListaUtenti';\r\nimport StrutturaDettaglioUtente from './dettaglio-utente/StrutturaDettaglioUtente';\r\nimport StrutturaEventoPrenotazione from './StrutturaEventoPrenotazione';\r\nimport StrutturaListaLocations from './StrutturaListaLocations';\r\nimport StrutturaEditLocation from './StrutturaEditLocation';\r\nimport StrutturaListaTipologiaLezioni from './StrutturaListaTipologiaLezioni'\r\nimport StrutturaEditTipologiaLezione from './StrutturaEditTipologiaLezione'\r\nimport StrutturaListaTipologiaAbbonamenti from './StrutturaListaTipologiaAbbonamenti'\r\nimport StrutturaEditTipologiaAbbonamento from './StrutturaEditTipologiaAbbonamento'\r\n\r\n\r\nconst _logger = log.getLogger('StrutturaRouter');\r\n\r\n\r\nconst StrutturaRouter = (props) => {\r\n\r\n    _logger.debug(`StrutturaRouter props: ${JSON.stringify(props)}`);\r\n    let { path, url } = useRouteMatch();\r\n    let { nomeStruttura } = useParams();\r\n    _logger.debug(`StrutturaRouter - path: ${path}, nomeStruttura: ${JSON.stringify(nomeStruttura)}`);\r\n\r\n    //const nomeStruttura = routeParams.nomeStruttura;\r\n    const anagraficaStruttura = useSelector(StruttureSelectors.getAnagrafica);\r\n    const orarioAperturaStruttura = useSelector(StruttureSelectors.getOrarioApertura);\r\n    const idStruttura = useSelector(StruttureSelectors.getIdStrutturaCorrente);\r\n\r\n    return (\r\n        <StrutturaLayout urlStruttura={nomeStruttura}>\r\n            <StrutturaProvider nomeStruttura={nomeStruttura}>\r\n                <Switch>\r\n                    <Route exact path={`${path}/eventi/:idEvento/prenotezione`}>\r\n                        <AzureAD forceLogin provider={authProvider} reduxStore={getStore()} >\r\n                            <StrutturaEventoPrenotazione idStruttura={idStruttura} />\r\n                        </AzureAD>\r\n                    </Route>\r\n                    <Route exact path={`${path}/eventi/:idEvento`}>\r\n                        <StrutturaEvento idStruttura={idStruttura} />\r\n                    </Route>\r\n                    <Route exact path={[`${path}/edit`, `${path}/dati`]}>\r\n                        <AzureAD forceLogin provider={authProvider} reduxStore={getStore()} >\r\n                            <StrutturaEditDati anagraficaStruttura={anagraficaStruttura} orarioAperturaStruttura={orarioAperturaStruttura}/>\r\n                        </AzureAD>\r\n                    </Route>\r\n                    <Route exact path={[`${path}/images`, `${path}/immagini`, `${path}/gallery`]}>\r\n                        <AzureAD forceLogin provider={authProvider} reduxStore={getStore()} >\r\n                            <StrutturaEditImages idStruttura={idStruttura} />\r\n                        </AzureAD>\r\n                    </Route>\r\n                    <Route exact path={[`${path}/calendari`, `${path}/schedules`]}>\r\n                        <AzureAD forceLogin provider={authProvider} reduxStore={getStore()} >\r\n                            <StrutturaEditCalendari idStruttura={idStruttura} urlRoute={nomeStruttura} />\r\n                        </AzureAD>\r\n                    </Route>\r\n                    <Route exact path={[`${path}/utenti/:idUtente`, `${path}/users/:idUtente`]}>\r\n                        <AzureAD forceLogin provider={authProvider} reduxStore={getStore()} >\r\n                            <StrutturaDettaglioUtente idStruttura={idStruttura} urlRoute={nomeStruttura} />\r\n                        </AzureAD>\r\n                    </Route>\r\n                    <Route exact path={[`${path}/utenti`, `${path}/users`]}>\r\n                        <AzureAD forceLogin provider={authProvider} reduxStore={getStore()} >\r\n                            <StrutturaListaUtenti idStruttura={idStruttura} urlRoute={nomeStruttura} />\r\n                        </AzureAD>\r\n                    </Route>\r\n                    <Route exact path={[`${path}/locations/:idLocation`]}>\r\n                        <AzureAD forceLogin provider={authProvider} reduxStore={getStore()} >\r\n                            <StrutturaEditLocation idStruttura={idStruttura} urlRoute={nomeStruttura} />\r\n                        </AzureAD>\r\n                    </Route>\r\n                    <Route exact path={[`${path}/locations`]}>\r\n                        <AzureAD forceLogin provider={authProvider} reduxStore={getStore()} >\r\n                            <StrutturaListaLocations idStruttura={idStruttura} urlRoute={nomeStruttura} />\r\n                        </AzureAD>\r\n                    </Route>\r\n                    <Route exact path={[`${path}/lezioni/:idTipoLezione`]}>\r\n                        <AzureAD forceLogin provider={authProvider} reduxStore={getStore()} >\r\n                            <StrutturaEditTipologiaLezione idStruttura={idStruttura} urlRoute={nomeStruttura} />\r\n                        </AzureAD>\r\n                    </Route>\r\n                    <Route exact path={[`${path}/lezioni`]}>\r\n                        <AzureAD forceLogin provider={authProvider} reduxStore={getStore()} >\r\n                            <StrutturaListaTipologiaLezioni idStruttura={idStruttura} urlRoute={nomeStruttura} />\r\n                        </AzureAD>\r\n                    </Route>\r\n                    <Route exact path={[`${path}/abbonamenti/:idTipoAbonamento`]}>\r\n                        <AzureAD forceLogin provider={authProvider} reduxStore={getStore()} >\r\n                            <StrutturaEditTipologiaAbbonamento idStruttura={idStruttura} urlRoute={nomeStruttura} />\r\n                        </AzureAD>\r\n                    </Route>\r\n                    <Route exact path={[`${path}/abbonamenti`]}>\r\n                        <AzureAD forceLogin provider={authProvider} reduxStore={getStore()} >\r\n                            <StrutturaListaTipologiaAbbonamenti idStruttura={idStruttura} urlRoute={nomeStruttura} />\r\n                        </AzureAD>\r\n                    </Route>\r\n                    <Route>\r\n                        <StrutturaHome anagraficaStruttura={anagraficaStruttura}></StrutturaHome>\r\n                    </Route>\r\n                </Switch>\r\n            </StrutturaProvider>\r\n        </StrutturaLayout>\r\n    )\r\n}\r\n\r\n\r\nexport default StrutturaRouter;","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\utente\\UtenteRouter.js",["380","381","382"],"import log from 'loglevel';\r\nimport React from 'react'\r\nimport { Switch, Route, useRouteMatch, useParams } from 'react-router-dom'\r\nimport AzureAD from 'react-aad-msal';\r\nimport { getStore } from '../../store/reduxStore'\r\nimport { authProvider } from '../../authProvider'\r\nimport UtenteLayout from './UtenteLayout';\r\nimport UtenteProfilo from './UtenteProfilo';\r\nimport {UtentePrenotazioni} from './UtentePrenotazioni';\r\n\r\nconst _logger = log.getLogger('UtenteRouter');\r\n\r\n\r\nexport default (props) => {\r\n\r\n    _logger.debug(`UtenteRouter props: ${JSON.stringify(props)}`);\r\n    //let { path, url } = useRouteMatch();\r\n    // let { nomeStruttura } = useParams();\r\n    // _logger.debug(`UtenteRouter - path: ${path}, nomeStruttura: ${JSON.stringify(nomeStruttura)}`);\r\n\r\n    return (\r\n        <UtenteLayout >\r\n            <Switch>\r\n                <Route exact path={`/me/profilo`}>\r\n                    <AzureAD forceLogin provider={authProvider} reduxStore={getStore()} >\r\n                        <UtenteProfilo />\r\n                    </AzureAD>\r\n                </Route>\r\n                <Route exact path={`/me/prenotazioni`}>\r\n                    <AzureAD forceLogin provider={authProvider} reduxStore={getStore()} >\r\n                        <UtentePrenotazioni />\r\n                    </AzureAD>\r\n                </Route>\r\n            </Switch>\r\n        </UtenteLayout>\r\n    )\r\n}\r\n\r\n\r\n","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\pages\\HomePage.js",["383"],"import React from 'react';\r\nimport Container from '@material-ui/core/Container';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  toolbar: {\r\n    minHeight: 128,\r\n    alignItems: 'flex-start',\r\n    paddingTop: theme.spacing(1),\r\n    paddingBottom: theme.spacing(2),\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n    alignSelf: 'flex-end',\r\n  },\r\n}));\r\n\r\nexport default props => {\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n        <Container>\r\n        <AppBar position=\"static\">\r\n        </AppBar>\r\n          <div>\r\n            <h1>Hello, world!</h1>\r\n            <p>Welcome to your new single-page application, built with:</p>\r\n            <ul>\r\n              <li><a href='https://get.asp.net/'>ASP.NET Core</a> and <a href='https://msdn.microsoft.com/en-us/library/67ef8sbd.aspx'>C#</a> for cross-platform server-side code</li>\r\n              <li><a href='https://facebook.github.io/react/'>React</a> and <a href='https://redux.js.org/'>Redux</a> for client-side code</li>\r\n              <li><a href='http://getbootstrap.com/'>Bootstrap</a> for layout and styling</li>\r\n            </ul>\r\n            <p>To help you get started, we've also set up:</p>\r\n            <ul>\r\n              <li><strong>Client-side navigation</strong>. For example, click <em>Counter</em> then <em>Back</em> to return here.</li>\r\n              <li><strong>Development server integration</strong>. In development mode, the development server from <code>create-react-app</code> runs in the background automatically, so your client-side resources are dynamically built on demand and the page refreshes when you modify any file.</li>\r\n              <li><strong>Efficient production builds</strong>. In production mode, development-time features are disabled, and your <code>dotnet publish</code> configuration produces minified, efficiently bundled JavaScript files.</li>\r\n            </ul>\r\n            <p>The <code>ClientApp</code> subdirectory is a standard React application based on the <code>create-react-app</code> template. If you open a command prompt in that directory, you can run <code>npm</code> commands such as <code>npm test</code> or <code>npm install</code>.</p>\r\n          </div>\r\n        </Container>\r\n    </div>\r\n  );\r\n}\r\n    //export default connect()(HomePage);\r\n","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\registrazione\\RegistrazioneStruttura.js",["384"],"import { CircularProgress, Container, Paper, StepLabel, Typography } from '@material-ui/core';\r\nimport Step from '@material-ui/core/Step';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport log from 'loglevel';\r\nimport React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Redirect, useHistory } from 'react-router';\r\nimport { UserSelectors } from '../../store/selectors/user.selectors';\r\nimport R2DHeader from '../commons/R2DHeader';\r\nimport RegisterStrutturaStep1 from './RegisterStrutturaStep1';\r\nimport RegisterStrutturaStep2 from './RegisterStrutturaStep2';\r\nimport RegisterStrutturaStep3 from './RegisterStrutturaStep3';\r\n\r\n\r\nconst _logger = log.getLogger('RegistrazioneStruttura');\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        width: '100%',\r\n    },\r\n    rootPaper: {\r\n        padding: 30\r\n    },\r\n    title: {\r\n        textAlign: \"center\",\r\n        fontSize: '1.5rem',\r\n        fontWeight: 500\r\n    },\r\n    backButton: {\r\n        marginRight: theme.spacing(1),\r\n    },\r\n    instructions: {\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n}));\r\n\r\n\r\nexport default (props) => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n\r\n    const idStruttureGestite = useSelector(UserSelectors.getIdStruttureOwned);\r\n    const struttureGestite = useSelector(UserSelectors.getStruttureOwned);\r\n    const [currentStep, setCurrentStep] = React.useState(0);\r\n    const [datiStruttura, setDatiStruttura] = React.useState({});\r\n    const titles = ['Benvenuto! Completa la tua registrazione in pochi semplice passi',\r\n        'Gli ultimi dati ed abbiamo finito',\r\n        'Controlla i dati inseriti, clicca SALVA ed inizia subito ad usare Ready2Do!'];\r\n\r\n    // React.useEffect(() => {\r\n    //     counter > 0 && setTimeout(() => setCounter(counter - 1), 1000);\r\n    //   }, [counter]);\r\n\r\n\r\n    const handleNext = (step, data) => {\r\n        _logger.debug(`Handling step ${step} submit. Data: ${JSON.stringify(data)}`);\r\n        if (step === 0 || step === 1) {\r\n            let newState = { ...datiStruttura, ...data };\r\n            setDatiStruttura(newState);\r\n            setCurrentStep(step + 1);\r\n            _logger.debug(`Current state: ${JSON.stringify(newState)}`);\r\n        } else if (step === 2) {\r\n            //TODO: Gestire la conferma\r\n        }\r\n    }\r\n\r\n    const handleBack = (step) => {\r\n        // eslint-disable-next-line default-case\r\n        switch (step) {\r\n            case 0:\r\n                history.push('/');\r\n                break;\r\n            case 1:\r\n                setCurrentStep(0);\r\n                break;\r\n            case 2:\r\n                setCurrentStep(1);\r\n                break;\r\n        }\r\n    }\r\n\r\n    const renderCurrentStep = () => {\r\n        // eslint-disable-next-line default-case\r\n        switch (currentStep) {\r\n            case 0:\r\n                return (<RegisterStrutturaStep1 onDataSubmittedHandler={handleNext} onBack={handleBack} datiStruttura={datiStruttura}/>);\r\n            case 1:\r\n                return (<RegisterStrutturaStep2 onDataSubmittedHandler={handleNext} onBack={handleBack} datiStruttura={datiStruttura}/>);\r\n            case 2:\r\n                return (<RegisterStrutturaStep3 onDataSubmittedHandler={handleNext} onBack={handleBack} datiStruttura={datiStruttura}/>);\r\n        }\r\n    }\r\n\r\n    const renderRegistrationPage = () => {\r\n        return (\r\n            <Container width=\"900\">\r\n                <R2DHeader urlStruttura={props.urlStruttura}></R2DHeader>\r\n                <Paper className={classes.rootPaper}>\r\n                    <Typography className={classes.title}>{titles[currentStep]}</Typography>\r\n                    <Stepper activeStep={currentStep} alternativeLabel>\r\n                        <Step key={0}>\r\n                            <StepLabel>Dati identificativi della Struttura</StepLabel>\r\n                        </Step>\r\n                        <Step key={1}>\r\n                            <StepLabel>Recapiti della Struttura</StepLabel>\r\n                        </Step>\r\n                        <Step key={2}>\r\n                            <StepLabel>Riepilogo e conferma</StepLabel>\r\n                        </Step>\r\n                    </Stepper>\r\n                    {renderCurrentStep()}\r\n                </Paper>\r\n            </Container>\r\n        )\r\n    }\r\n\r\n    const renderRedirectToStruttura = () => {\r\n        return (\r\n\r\n            Array.isArray(struttureGestite) && struttureGestite.length > 0 ?\r\n                <Redirect to={`/${struttureGestite[0].urlRoute}`} push={false} /> :\r\n                <CircularProgress />\r\n        )\r\n    }\r\n\r\n    return (\r\n        (Array.isArray(idStruttureGestite) && idStruttureGestite.length > 0) ? renderRedirectToStruttura() : renderRegistrationPage()\r\n    )\r\n\r\n}\r\n","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\store\\reducers\\strutture.reducer.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\store\\reducers\\user.reducer.js",["385"],"import produce from \"immer\"\r\nimport * as log from 'loglevel';\r\n\r\n// import {USER_CHANGE_STRUTTURA_CORRENTE_PENDING, USER_CHANGE_STRUTTURA_CORRENTE_SUCCESS, USER_CHANGE_STRUTTURA_CORRENTE_ERROR} from '../actions/user.actions'\r\nimport {\r\n\tR2D_LOGIN_STARTED, R2D_USER_LOOKUPS_COMPLETED, R2D_LOGOUT_SUCCESS,\r\n\tR2D_FOLLOW_STRUTTURA_SUCCESS, R2D_UNFOLLOW_STRUTTURA_SUCCESS\r\n} from '../actions/user.actions'\r\n\r\nconst _logger = log.getLogger('UserReducer');\r\n\r\n/*\r\nREDUCER per la gestione dello stato dell'utente\r\n*/\r\nconst initialState = {\r\n\tcurrentUser: null,\r\n\tuserIsAuthenticated: false,\r\n\tlookupInProgress: false,\r\n\t//idStrutturaAttiva: 10, //Rappresenta la struttura selezionata nella SideNav (non è detto che sia quella attualmente caricata) (per ora gestiamo una sola struttura)\r\n}\r\n\r\nfunction UserReducer(state = initialState, action) {\r\n\t//_logger.debug(`UserReduce - state: ${JSON.stringify(state)} - action: ${JSON.stringify(action)}`);\r\n\tswitch (action.type) {\r\n\t\tcase R2D_LOGIN_STARTED: {\r\n\t\t\treturn produce(state, draftState => {\r\n\t\t\t\tdraftState.userIsAuthenticated = true;\r\n\t\t\t\tdraftState.lookupInProgress = true;\r\n\t\t\t\tdraftState.currentUser = action.payload;\r\n\t\t\t});\r\n\t\t}\r\n\t\tcase R2D_USER_LOOKUPS_COMPLETED: {\r\n\t\t\treturn produce(state, draftState => {\r\n\t\t\t\tdraftState.lookupInProgress = false;\r\n\t\t\t\tdraftState.currentUser = action.payload;\r\n\t\t\t});\r\n\t\t}\r\n\t\tcase R2D_LOGOUT_SUCCESS: {\r\n\t\t\treturn produce(state, draftState => {\r\n\t\t\t\tdraftState.userIsAuthenticated = false;\r\n\t\t\t\tdraftState.lookupInProgress = false;\r\n\t\t\t\tdraftState.currentUser = null;\r\n\t\t\t\t//draftState.idStrutturaAttiva = -1;\r\n\t\t\t});\r\n\t\t}\r\n\t\tcase R2D_FOLLOW_STRUTTURA_SUCCESS: {\r\n\t\t\tif (state?.currentUser?.struttureSeguite) {\r\n\t\t\t\treturn produce(state, draftState => {\r\n\t\t\t\t\tdraftState.currentUser.struttureSeguite.push(action.payload);\r\n\t\t\t\t})\r\n\t\t\t} else return state; //se non esiste la struttura base c'è qualcosa di anomale, non mutiamo lo stato\r\n\t\t}\r\n\t\tcase R2D_UNFOLLOW_STRUTTURA_SUCCESS: {\r\n\t\t\tif (state?.currentUser?.struttureSeguite) {\r\n\t\t\t\tlet index = state.currentUser.struttureSeguite.indexOf(e => e.IdCliente === action.payload.idStruttura);\r\n\t\t\t\tif (index >= 0) {\r\n\t\t\t\t\treturn produce(state, draftState => {\r\n\t\t\t\t\t\tdraftState.currentUser.struttureSeguite.splice(index, 1); //rimuoviamo la struttura seguita dall'array\r\n\t\t\t\t\t});\r\n\t\t\t\t} else return state; //se non troviamo la struttura  c'è qualcosa di anomale, non mutiamo lo stato\r\n\t\t\t} else return state; //se non esiste la struttura base c'è qualcosa di anomale, non mutiamo lo stato\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport default UserReducer","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\store\\sagas\\root.sagas.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaProvider.js",["386","387","388"],"import React, { useState, useEffect, Fragment } from 'react'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {StruttureActionsCreator} from '../../store/actions/strutture.actions'\r\nimport * as log from 'loglevel';\r\n\r\n/*\r\nImplementa la logica di caricamento dei dati di una Struttura\r\n*/\r\nexport default function  StrutturaProvider(props){\r\n    const _logger = log.getLogger('StrutturaProvider');\r\n    const nomeStruttura = props.nomeStruttura;\r\n    const dispatch = useDispatch();\r\n    const struttura  = useSelector((state) =>{ return state.struttura.struttura});\r\n    \r\n    //Rimappiamo i children aggiungendo il nome della struttura come Props\r\n    const children = React.Children.map(props.children, (child, index) => {\r\n        return React.cloneElement(child, {\r\n            ...props,\r\n            index,\r\n            nomeStruttura: nomeStruttura,\r\n            struttura: struttura\r\n        });\r\n    });\r\n\r\n    useEffect(()=>{\r\n        //Carichiamo i dati della struttura se non già presenti nello store \r\n        if(!struttura || struttura.name !== nomeStruttura){\r\n            _logger.debug(`StrutturaProvider->Dispatch StruttureActionsCreator.fetchStrutturaByName(${nomeStruttura})`);\r\n            dispatch(StruttureActionsCreator.fetchStrutturaByName(nomeStruttura));\r\n        }else{\r\n            _logger.debug(`StrutturaProvider->NO Dispatch StruttureActionsCreator.fetchStrutturaByName(${nomeStruttura}) - struttura alrerady fetched.`);\r\n        }\r\n    },[nomeStruttura]);\r\n\r\n    return(\r\n        <Fragment>\r\n            {props.children}\r\n        </Fragment>\r\n    )\r\n    \r\n} ","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaEvento.js",["389"],"import log from 'loglevel';\r\nimport React, { useEffect, useState } from 'react'\r\nimport R2DEditEventoForm from '../editEvento/R2DEditEventoForm'\r\nimport * as qs from 'query-string'\r\nimport { useParams, useLocation } from 'react-router-dom';\r\nimport { Paper } from '@material-ui/core';\r\nimport { authProvider } from '../../authProvider'\r\nimport { getStore } from '../../store/reduxStore'\r\n\r\nimport {UserSelectors} from '../../store/selectors/user.selectors'\r\nimport AzureAD, { AuthenticationState } from 'react-aad-msal';\r\nimport StrutturaEventoPrenotazione from './StrutturaEventoPrenotazione'\r\nimport { useSelector } from 'react-redux';\r\nimport { StruttureEventiAPI } from '../../api/strutture.eventi.api';\r\nimport differenceInMinutes from 'date-fns/differenceInMinutes'\r\nimport parseISO from 'date-fns/parseISO'\r\n\r\nconst _logger = log.getLogger('StrutturaEvento')\r\n\r\nexport default (props) => {\r\n    const idStruttura = props.idStruttura;\r\n    const struttureOwned = useSelector(UserSelectors.getStruttureOwned) ?? [];\r\n    //Recuperiamo i parametri dall'url\r\n    let { idEvento } = useParams();\r\n    const [evento, setEvento] = useState(null);\r\n    idEvento = isNaN(idEvento) ? -1 : idEvento;\r\n    //Recuperiamo la querystring\r\n    let { search } = useLocation();\r\n    const queryString = qs.parse(search) ?? {};\r\n    _logger.debug(`StrutturaEvento -> idStruttura: ${idStruttura}, idEvento: ${idEvento}, querystring: ${JSON.stringify(queryString)}`);\r\n\r\n    const isOwnerStruttura = () => {        \r\n        const result = (struttureOwned.findIndex(s=>s.id === idStruttura) >= 0); \r\n        _logger.debug(`StrutturaEvento->isOwnerStruttura()->Return: ${result} - struttureOwned: ${JSON.stringify(struttureOwned)}`);\r\n        return result\r\n    }\r\n    \r\n    useEffect(() => {\r\n        async function fetchEvento() {\r\n            _logger.debug(`StrutturaEvento->useEffect()->fetchEvento() - Fetching Event (${idStruttura}, ${idEvento})`);\r\n            let data = await StruttureEventiAPI.FetchEventoAsync(idStruttura, idEvento);\r\n            _logger.debug(`StrutturaEvento->useEffect->fetchEvento(): Event Fetched: ${JSON.stringify(data)}`);\r\n            setEvento(data);\r\n        }\r\n        if (idStruttura > 0 && idEvento > 0) {\r\n            fetchEvento();\r\n        }\r\n    }, [idStruttura, idEvento])\r\n\r\n    const renderEvento=()=>{\r\n        if(!evento) return null;\r\n        if(isOwnerStruttura()){\r\n            if(differenceInMinutes(parseISO(new Date(), evento.dataOraInizio)) > -5 ){ // 5 minuti\r\n\r\n            }\r\n            else{\r\n                return (\r\n                    <R2DEditEventoForm\r\n                    idStruttura={idStruttura}\r\n                    idEvento={idEvento} //TODO: Passare direttamente l'evento                                            \r\n                    dataEvento={queryString?.date}\r\n                    idLocation={queryString?.lid ?? -1}\r\n                    allDay={queryString?.allDay ?? false}\r\n                />\r\n                )\r\n            }\r\n        }\r\n        else{\r\n            return(\r\n                <StrutturaEventoPrenotazione\r\n                idStruttura={idStruttura}\r\n                idEvento={idEvento} />\r\n            )\r\n        }\r\n    }\r\n\r\n    /**\r\n     *  Il componente da visualizzare viene determinato in base alla seguente logica:\r\n     *  - se l'utente è autenticato ed è un gestore:\r\n     *      -> se siamo a meno di 10 minuti dall'inizio dell'evento viene visualizzata la form di presenza\r\n     *      -> se siamo ancora \"lontani\" dall'inizio viene visualizzata la form di edit dell'evento \r\n     *  - se l'utente non è autenticato oppure non è un gestore della struttura, viene visualizzata la pagina di registrazione / cancellazione\r\n     */\r\n    return (\r\n        <Paper>\r\n            <AzureAD provider={authProvider} reduxStore={getStore()} >\r\n                {\r\n                    ({ login, logout, authenticationState, error, accountInfo }) => {\r\n                        switch (authenticationState) {\r\n                            case AuthenticationState.Authenticated:\r\n                                _logger.debug(`StrutturaEvento->AuthenticationState.Authenticated`);\r\n                                return (\r\n                                    renderEvento()\r\n                                );\r\n                            default:\r\n                                _logger.debug(`StrutturaEvento->NOT AuthenticationState.Authenticated`);\r\n                                return (\r\n                                    <StrutturaEventoPrenotazione\r\n                                            idStruttura={idStruttura}\r\n                                            idEvento={idEvento} />\r\n                                );\r\n                        }\r\n                    }\r\n                }\r\n            </AzureAD>\r\n\r\n        </Paper>\r\n    )\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaEditDati.js",["390","391"],"import * as log from 'loglevel';\r\nimport React /*, { useState }*/ from 'react'\r\nimport R2DClienteEditItem from './R2DClienteEditItem'\r\nimport OrarioAperturaEdit from './OrarioAperturaEdit';\r\nimport IndirizzoEdit from './IndirizzoEdit'\r\n\r\nexport default (props) =>{\r\n    const anagraficaStruttura = props.anagraficaStruttura;\r\n    //const orarioAperturaStruttura = props.orarioAperturaStruttura;\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <R2DClienteEditItem title=\"Nome\" tooltip=\"Nome della struttura\" propName=\"nome\" \r\n                    propValue={anagraficaStruttura.nome}></R2DClienteEditItem>\r\n            <R2DClienteEditItem title=\"Descrizione\" tooltip=\"Descrizione della struttura\" \r\n                    propName=\"descrizione\"\r\n                    multiline={true} lineNumbers={5}\r\n                    propValue={anagraficaStruttura.descrizione}></R2DClienteEditItem>\r\n            <R2DClienteEditItem title=\"Identificativo Web\" tooltip=\"Identificativo Web della struttura\" propName=\"urlRoute\"\r\n                    propValue={anagraficaStruttura.urlRoute}></R2DClienteEditItem>\r\n            <R2DClienteEditItem title=\"Telefono\" tooltip=\"Numero di telefono della struttura\" propName=\"numTelefono\"\r\n                    propValue={anagraficaStruttura.numTelefono}></R2DClienteEditItem>\r\n            <R2DClienteEditItem title=\"Ragione Sociale\" tooltip=\"Numero di telefono della struttura\" propName=\"ragSociale\"\r\n                    propValue={anagraficaStruttura.nome}></R2DClienteEditItem> \r\n            <OrarioAperturaEdit tooltip=\"Orari di apertura della struttura\"></OrarioAperturaEdit>\r\n            <IndirizzoEdit></IndirizzoEdit> \r\n        </React.Fragment>\r\n    )\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaEditImages.js",["392"],"import * as log from 'loglevel';\r\nimport React, { useEffect } from 'react'\r\nimport {useSelector, useDispatch} from 'react-redux'\r\nimport GridList from '@material-ui/core/GridList'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport ImageUploader from 'react-images-upload';\r\nimport ImageGalleryEdit from './ImageGalleryEdit';\r\nimport {StruttureSelectors} from '../../store/selectors/strutture.selectors'\r\nimport {StruttureActionsCreator} from '../../store/actions/strutture.actions'\r\nconst _logger = log.getLogger('StrutturaEditImages');\r\n\r\nconst useStyles = makeStyles(theme=>({\r\n\troot:{\r\n\t\tdisplay: 'flex',\r\n\t\tflexWrap: 'wrap',\r\n\t\tjustifyContent: 'space-around',\r\n\t\toverflow: 'hidden',\r\n\t\tbackgroundColor: theme.palette.background.paper,\r\n\t  },\t\r\n\tgridList:{\r\n\t\twidth: '100%',\r\n\t\theight: '100%'\r\n\t},\r\n}));\r\n\r\nexport default (props) =>{\r\n    _logger.debug(\"StrutturaEditImages....\")\r\n\tconst images =  useSelector(StruttureSelectors.getImages);\r\n\tconst idStruttura = props.idStruttura;\r\n\tconst dispatch = useDispatch();\r\n\tconst classes = useStyles();\r\n\r\n\tfunction onDrop(){\r\n\t\t_logger.debug(arguments);\r\n\t}\r\n\r\n\tuseEffect(()=>{\r\n\t\t_logger.debug(\"StrutturaEditImages->useEffect()\");\r\n\t\tasync function fetchData(){\r\n\t\t\t_logger.debug(\"StrutturaEditImages->fetchData()\");\r\n\t\t\t//if(!images || (Array.isArray(images) && images.length === 0)){\r\n\t\t\t\t if(idStruttura && idStruttura > 0){\r\n\t\t\t\t\t_logger.debug(`StrutturaEditImages->useEffect() - Dispatching action fetchStrutturaImmagini(${idStruttura})`);\r\n\t\t\t\t\tconst action = StruttureActionsCreator.fetchStrutturaImmagini({idStruttura});\r\n\t\t\t\t\tdispatch(action);\r\n\t\t\t\t }else{\r\n\t\t\t\t \t_logger.debug(`images already popolated, loading not needed. idStruttura: ${idStruttura} - images: ${JSON.stringify(images)}`);\r\n\t\t\t\t }\r\n\t\t\t};\r\n\t\t\tfetchData();\r\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t},[idStruttura])\r\n\r\n\tconst resolveTipoImmagine = (idTipo)=>{\r\n\t\tswitch(idTipo){\t\t\r\n\t\t\tcase 1: return \"sfondo\";\r\n\t\t\tcase 2: return \"logo\";\r\n\t\t\tdefault: return \"gallery\";\r\n\t\t}\r\n\t}\r\n\tconst renderImages = ()=>{\r\n\t\tif(!images) return (<div></div>);\r\n\t\t//Solo immagini della gallery\r\n\t\tlet filtered = images.filter((img)=>img.idTipoImmagine === 3);\r\n\t\t_logger.debug(`Iamges filtered: ${JSON.stringify(filtered)}`);\r\n\r\n\t\treturn(\r\n\t\t\t<GridList cellHeight={'auto'} cols={2.5} spacing={10} className={classes.gridList}>\r\n\t\t\t{\r\n\t\t\t\tfiltered.map((item, idx)=>{return (<ImageGalleryEdit key={item.id} order={idx} imageKey={item.id} imageType={resolveTipoImmagine(item.idTipoImmagine)} imageUrl={item.url}></ImageGalleryEdit>)})\r\n\t\t\t}\r\n\t\t\t</GridList>\r\n\t\t\t);\r\n}\r\n\r\n    return (\r\n        <React.Fragment>\r\n\t\t\t <ImageUploader\r\n\t\t\t\twithIcon={true}\r\n\t\t\t\tbuttonText='Choose images'\r\n\t\t\t\tonChange={onDrop}\r\n\t\t\t\timgExtension={['.jpg', '.gif', '.png', '.gif']}\r\n\t\t\t\tmaxFileSize={5242880}\r\n\t\t\t/>\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t{renderImages()}\r\n\t\t\t</div>\r\n        </React.Fragment>\r\n    )\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaLayout.js",["393"],"import React, { Fragment } from 'react';\r\nimport Container from '@material-ui/core/Container';\r\nimport R2DHeader from '../commons/R2DHeader'\r\nimport R2DSideNav from '../commons/sidenav/R2DSideNav';\r\nimport { useSelector } from 'react-redux';\r\nimport {UserSelectors} from '../../store/selectors/user.selectors'\r\n\r\n\r\nexport default props => {\r\n    const struttureOwned = useSelector(UserSelectors.getStruttureOwned);\r\n\r\n    return (\r\n        <Fragment>\r\n            {struttureOwned && struttureOwned.length > 0 ? <R2DSideNav urlStruttura={props.urlStruttura} /> : ''}            \r\n            <Container width=\"900\" >\r\n                <R2DHeader urlStruttura={props.urlStruttura}></R2DHeader>\r\n                {props.children}\r\n            </Container>\r\n        </Fragment>\r\n    );\r\n}\r\n","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaEditCalendari.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaHome.js",["394"],"import * as log from 'loglevel';\r\nimport React, { useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Grid, Box, Paper, Typography, makeStyles, Button } from '@material-ui/core';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport { UserSelectors } from '../../store/selectors/user.selectors'\r\nimport { StruttureSelectors } from '../../store/selectors/strutture.selectors'\r\nimport { StruttureActionsCreator } from '../../store/actions/strutture.actions'\r\nimport { UserActionsCreator } from '../../store/actions/user.actions'\r\n\r\nimport R2DCalendariContainer from './R2DCalendariContainer'\r\nimport StrutturaMap from './StrutturaMap';\r\n\r\nimport { Carousel } from 'react-responsive-carousel';\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\r\nimport StrutturaContattiView from './StrutturaContattiView';\r\nimport StrutturaOrarioView from './StrutturaOrarioView';\r\n\r\n\r\n\r\nconst _logger = log.getLogger(\"StrutturaHome\");\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    logoContainer: {\r\n        //display:\"inline\",\r\n        width: \"300px\",\r\n        height: \"300px\",\r\n        float: \"left\"\r\n    },\r\n    logo: {\r\n        //display:\"inline\",\r\n        maxWidth: \"296px\",\r\n        maxHeight: \"296px\"\r\n    },\r\n    descriptionBox: {\r\n        //display:\"inline\"\r\n        marginLeft: \"310px\",\r\n        minHeight: \"300px\",\r\n        paddingLeft: \"15px\"\r\n    },\r\n    descriptionBoxHeader: {\r\n        paddingTop: \"20px\",\r\n        paddingBottom: \"10px\",\r\n\r\n        '& .descriptionBoxTitle': {\r\n            marginRight: \"110px\",\r\n            display: \"inline\",\r\n        },\r\n\r\n        '& .followButton': {\r\n            float: \"right\",\r\n            backgroundColor: \"#E31F4F\",\r\n            color: \"white\",\r\n            width: \"100px\",\r\n            marginRight: \"4px\",\r\n            marginTop: \"-15px\"\r\n        },\r\n\r\n        '& .unFollowButton': {\r\n            float: \"right\",\r\n            backgroundColor: \"#636363\",\r\n            color: \"white\",\r\n            width: \"100px\",\r\n            marginRight: \"4px\",\r\n            marginTop: \"-15px\"\r\n        },\r\n\r\n        '& .descriptionBoxText': {\r\n\r\n        }\r\n    },\r\n\r\n    galleryContainer: {\r\n        marginTop: \"10px\",\r\n        height: \"400px\",\r\n        position: \"relative\",\r\n\r\n        '& .galleryCarousel': {\r\n            height: \"100%\"\r\n        },\r\n\r\n        '& .bannerGrid': {\r\n            height: \"100%\"\r\n        },\r\n\r\n        '& .galleryMedia': {\r\n            height: \"400px\",\r\n            '&:hover': {\r\n                opacity: \"0.8\"\r\n            }\r\n        }\r\n    },\r\n\r\n    calendarContainer: {\r\n        marginTop: \"10px\"\r\n    },\r\n\r\n    mapContainer: {\r\n        marginTop: \"10px\",\r\n        width: \"672px\",\r\n        height: \"400px\",\r\n        float: \"left\"\r\n    },\r\n\r\n    addressContainer: {\r\n        marginLeft: \"692px\",\r\n        marginTop: \"10px\",\r\n        paddingLeft: \"10px\",\r\n        height: \"400px\",\r\n    },\r\n\r\n    addressContainerBox: {\r\n        minHeight: \"400px\"\r\n    }\r\n}));\r\n\r\nexport default (props) => {\r\n    const anagraficaStruttura = props.anagraficaStruttura;\r\n    const classes = useStyles();\r\n    const dispatch = useDispatch();\r\n    const defaultLogo = \"./images/icon_handover.png\"\r\n    const images = useSelector(StruttureSelectors.getImages);\r\n    const struttureSeguite = useSelector(UserSelectors.getStruttureSeguite) ?? [];\r\n\r\n    //NOTA: Ho il sospetto che le immagini vengano scaricate più volte del necessario\r\n    useEffect(() => {\r\n        _logger.debug(\"StrutturaHome->useEffect()\");\r\n        async function fetchData() {\r\n            _logger.debug(`StrutturaHome->fetchData() - Struttura: ${JSON.stringify(anagraficaStruttura)}`);\r\n\r\n            if (!images || images.length === 0) {\r\n                _logger.debug(`StrutturaHome->useEffect() - Dispatching action fetchStrutturaImmagini(${anagraficaStruttura.id})`);\r\n                const action = StruttureActionsCreator.fetchStrutturaImmagini({ idStruttura: anagraficaStruttura.id });\r\n                dispatch(action);\r\n            } else {\r\n                _logger.debug(`images already popolated, loading not needed. idStruttura: ${anagraficaStruttura.id} - images: ${JSON.stringify(images)}`);\r\n            }\r\n        };\r\n        if (anagraficaStruttura && anagraficaStruttura.id) {\r\n            fetchData();\r\n        }\r\n        else {\r\n            _logger.debug(`struttura non ancora caricata, impossibile recuperare le immagini.`);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [anagraficaStruttura, images])\r\n\r\n\r\n    function isStrutturaSeguita() {\r\n        const result = (struttureSeguite?.findIndex(v => v.idCliente === anagraficaStruttura?.id) >= 0);\r\n        _logger.debug(`StrutturaHome->isStrutturaSeguita()-> return: ${result} - struttureSeguite: ${struttureSeguite}`);\r\n        console.log(struttureSeguite)\r\n        return result;\r\n    }\r\n\r\n    function handleUnfollowStruttura() {\r\n        const action = UserActionsCreator.r2dUnFollowStrutturaRequested(anagraficaStruttura.id);\r\n        dispatch(action);\r\n    }\r\n\r\n    function handleFollowStruttura() { \r\n        const action = UserActionsCreator.r2dFollowStrutturaRequested(anagraficaStruttura.id);\r\n        _logger.debug(`StrutturaHome->handleFollowStruttura()-> Dispatch action r2dFollowStrutturaRequested(${anagraficaStruttura.id})`);\r\n        dispatch(action);\r\n    }\r\n\r\n    return (\r\n        <Grid container>\r\n            <Grid item xs={12}>\r\n                <Paper className={classes.logoContainer}>\r\n                    <img className={classes.logo} alt=\"logo\" src={anagraficaStruttura.logoUrl ?? defaultLogo}></img>\r\n                </Paper>\r\n                <Paper className={classes.descriptionBox}>\r\n                    <Box className={classes.descriptionBoxHeader}>\r\n                        <Typography className=\"descriptionBoxTitle\" variant=\"h5\">Benvenuti a {anagraficaStruttura.nome}</Typography>\r\n                        {/* TODO: Gestire il pulsane segui / non seguire in base allo stato dell'utente*/}\r\n                        {isStrutturaSeguita()\r\n                            ? <Button variant=\"contained\" startIcon={<FavoriteIcon />} className=\"unFollowButton\" onClick={handleUnfollowStruttura}>SEGUITO</Button>\r\n                            : <Button variant=\"contained\" startIcon={<FavoriteIcon />} className=\"followButton\" onClick={handleFollowStruttura}>SEGUI</Button>\r\n                        }\r\n                    </Box>\r\n                    <Box className=\"descriptionBoxText\">\r\n                        <Typography variant=\"body1\">{anagraficaStruttura.descrizione}</Typography>\r\n                    </Box>\r\n                </Paper>\r\n            </Grid>\r\n\r\n            <Grid item xs={12}>\r\n                <Paper className={classes.galleryContainer}>\r\n                    <Carousel className=\"galleryCarousel\"\r\n                        autoPlay={true}\r\n                        interval={5000}\r\n                        infiniteLoop={true}\r\n                        showThumbs={false}\r\n                    >\r\n                        {\r\n                            images.map((item, index) => {\r\n                                return (\r\n                                    <Box key={index}>\r\n                                        <img key={index} src={item.url} className=\"galleryMedia\" alt={item.alt} />\r\n                                    </Box>\r\n                                )\r\n                            })\r\n                        }\r\n                    </Carousel>\r\n                </Paper>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n                <Paper className={classes.calendarContainer}>\r\n                    <R2DCalendariContainer idStruttura={anagraficaStruttura.id} urlRoute={anagraficaStruttura.urlRoute} renderMode=\"view\"></R2DCalendariContainer>\r\n                </Paper>\r\n            </Grid>\r\n\r\n            <Grid item xs={12}>\r\n                <Paper className={classes.mapContainer}>\r\n                    <StrutturaMap\r\n                        lat={anagraficaStruttura.latitudine}\r\n                        lng={anagraficaStruttura.longitudine}\r\n                    >\r\n                    </StrutturaMap>\r\n                </Paper>\r\n                <Paper className={classes.addressContainer}>\r\n                    <Box display=\"flex\" className={classes.addressContainerBox}\r\n                        flexDirection=\"column\" alignItems=\"stretch\" alignContent=\"space-between\">\r\n                        <StrutturaOrarioView flex={1} struttura={anagraficaStruttura} ></StrutturaOrarioView>\r\n                        <StrutturaContattiView struttura={anagraficaStruttura} ></StrutturaContattiView>\r\n                    </Box>\r\n                </Paper>\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaListaUtenti.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaEventoPrenotazione.js",["395","396"],"import log from 'loglevel';\r\nimport React, { useEffect, useState } from 'react'\r\nimport * as qs from 'query-string'\r\nimport { Paper, Grid, Typography, Box, makeStyles, CircularProgress, Button } from '@material-ui/core';\r\nimport format from 'date-fns/format'\r\nimport { it } from 'date-fns/locale'\r\nimport parseISO from 'date-fns/parseISO'\r\nimport { StruttureEventiAPI } from '../../api/strutture.eventi.api'\r\nimport { StruttureUtentiAPI } from '../../api/strutture.utenti.api'\r\nimport AzureAD, { AuthenticationState } from 'react-aad-msal';\r\nimport { authProvider } from '../../authProvider'\r\nimport { getStore } from '../../store/reduxStore'\r\nimport { useSelector } from 'react-redux';\r\nimport { UserSelectors } from '../../store/selectors/user.selectors';\r\n\r\nconst _logger = log.getLogger('StrutturaEventoPrenotazione')\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        padding: '10px'\r\n    },\r\n    eventLoadBox: {\r\n        minHeight: '300px'\r\n    }\r\n}))\r\n\r\nexport default (props) => {\r\n    const idStruttura = props.idStruttura;\r\n    const idEvento = props.idEvento;\r\n    const [evento, setEvento] = useState(null);\r\n    const [isLoadingEvento, setIsLoadingEvento] = useState(true);\r\n    const [appuntamento, setAppuntamento] = useState(null);\r\n    const [appuntamentoChanged, setAppuntamentoChanged] = useState(new Date());\r\n    const [isLoadingAppuntamento, setIsLoadingAppuntamento] = useState(true);\r\n    const [abbonamentiUtente, setAbbonamentiUtente] = useState(null);\r\n    const [isLoadingAbbonamenti, setIsLoadingAbbonamenti] = useState(true);\r\n    const currentUser = useSelector(UserSelectors.getUserInfo);\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        async function fetchEvento() {\r\n            _logger.debug(`StrutturaEventoPrenotazione->useEffect()->fetchEvento() - Fetching Event (${idStruttura}, ${idEvento})`);\r\n            let data = await StruttureEventiAPI.FetchEventoAsync(idStruttura, idEvento);\r\n            _logger.debug(`StrutturaEventoPrenotazione->useEffect->fetchEvento(): Event Fetched: ${JSON.stringify(data)}`);\r\n            setEvento(data);\r\n            setIsLoadingEvento(false);\r\n        }\r\n        if (idStruttura > 0 && idEvento > 0) {\r\n            fetchEvento();\r\n        }\r\n    }, [idStruttura, idEvento])\r\n\r\n    /**\r\n     * Leggiamo gli abbonamenti dell'utente\r\n     */\r\n    useEffect(() => {\r\n        async function fetchAbbonamenti(userId) {\r\n            _logger.debug(`StrutturaEventoPrenotazione->useEffect()->fetchAbbonamenti() - Fetching Abbonamenti (${idStruttura}, ${userId})`);\r\n            const data = await StruttureUtentiAPI.FetchAbbonamentiUtenteAsync(idStruttura, userId);\r\n            _logger.debug(`StrutturaEventoPrenotazione->useEffect->fetchAbbonamenti(): Abbonamenti Fetched: ${JSON.stringify(data)}`);\r\n            setAbbonamentiUtente(data);\r\n            setIsLoadingAbbonamenti(false);\r\n        }\r\n\r\n        if (idStruttura > 0 && idEvento > 0 && currentUser) {\r\n            if (!isLoadingAbbonamenti) { setIsLoadingAbbonamenti(true); }\r\n            fetchAbbonamenti(currentUser.id);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [currentUser, idEvento, idStruttura])\r\n\r\n    useEffect(() => {\r\n        async function fetchAppuntamento() {\r\n            _logger.debug(`StrutturaEventoPrenotazione->useEffect()->fetchAppuntamento() - Fetching Appuntamento (${idStruttura}, ${idEvento})`);\r\n            let data = await StruttureEventiAPI.FetchAppuntamentiAsync(idStruttura, idEvento);\r\n            _logger.debug(`StrutturaEventoPrenotazione->useEffect->fetchAppuntamento(): Appuntamento Fetched: ${JSON.stringify(data)}`);\r\n            setAppuntamento(data);\r\n            setIsLoadingAppuntamento(false);\r\n        }\r\n        if (idStruttura > 0 && idEvento > 0) {\r\n            fetchAppuntamento();\r\n        }\r\n    }, [idStruttura, idEvento, appuntamentoChanged])\r\n\r\n\r\n    function isLoading() {\r\n        return isLoadingEvento || isLoadingAbbonamenti || isLoadingAppuntamento;\r\n    }\r\n\r\n    function getIdFirstAbbonamentoValido() {\r\n        _logger.debug(`StrutturaEventoPrenotazione->getIdFirstAbbonamentoValido() - abbonamentiUtente: ${JSON.stringify(abbonamentiUtente)} - evento: ${JSON.stringify(evento)}`);\r\n        function findAbbonamentoValido(abbonamento) {\r\n            if ((abbonamento.ingressiResidui > 0)\r\n                //&& (abbonamento.tipoAbbonamento.maxLivCorsi >= evento.tipologiaLezione.livello) &&\r\n            ) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n        let idAbbonamento = -1;\r\n        if (abbonamentiUtente && abbonamentiUtente.length > 0) {\r\n            idAbbonamento = abbonamentiUtente.find(findAbbonamentoValido)?.id ?? -1;\r\n        }\r\n        _logger.debug(`StrutturaEventoPrenotazione->getIdFirstAbbonamentoValido() - return: ${idAbbonamento}`);\r\n        return idAbbonamento;\r\n    }\r\n\r\n    async function handlePrenotazioneAsync(e) {\r\n        _logger.debug(`StrutturaEventoPrenotazione->handlePrenotazioneAsync()`);\r\n        const idAbbonamento = getIdFirstAbbonamentoValido();\r\n        if (idAbbonamento >= 0) {\r\n            const newAppuntamento = {\r\n                user: currentUser.id,\r\n                idAbbonamento: idAbbonamento,\r\n                evento: idEvento,\r\n                note: '' //Al momento non gestiamo le note\r\n            }\r\n            await StruttureEventiAPI.PrenotaEventoAsync(idStruttura, idEvento, newAppuntamento);\r\n            setAppuntamentoChanged(new Date());\r\n        }\r\n    }\r\n\r\n    async function handleDeletePrenotazione(e) {\r\n        _logger.debug(`StrutturaEventoPrenotazione->handlePrenotazioneAsync()`);\r\n        await StruttureEventiAPI.AnnullaPrenotazioneAsync(idStruttura, idEvento);\r\n        setAppuntamento(null)\r\n        setAppuntamentoChanged(new Date());\r\n    }\r\n\r\n    function renderEventDetails() {\r\n        return (\r\n            <Grid container spacing={3}>\r\n                <Grid item xs={12}>\r\n                    <Grid container alignItems=\"center\" justify=\"center\" direction=\"column\">\r\n                        <Grid item xs={12}>\r\n                            <Typography variant=\"h5\" fontWeight=\"Bold\">Prenotazione lezione</Typography>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item fontWeight=\"fontWeightBold\" xs={12}>\r\n                    <Typography variant=\"h6\">\r\n\r\n                        {evento.title}</Typography>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                    <Typography component=\"div\">\r\n                        <Box component=\"span\" fontWeight=\"fontWeightBold\" mr={1}>Tipo lezione:</Box>\r\n                        <Box component=\"span\">{evento.tipologiaLezione?.nome}</Box>\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid item xs={3}>\r\n                    <Typography component=\"div\">\r\n                        <Box component=\"span\" fontWeight=\"fontWeightBold\" mr={1}>Data:</Box>\r\n                        <Box component=\"span\">{format(parseISO(evento.dataOraInizio), 'd MMMM yyyy', { locale: it })}</Box>\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid item xs={3}>\r\n                    <Typography component=\"div\">\r\n                        <Box component=\"span\" fontWeight=\"fontWeightBold\" mr={1}>Ora inizio:</Box>\r\n                        <Box component=\"span\">{format(parseISO(evento.dataOraInizio), 'p', { locale: it })}</Box>\r\n                    </Typography>\r\n                </Grid>\r\n\r\n                <Grid item xs={6}>\r\n                    <Typography component=\"div\">\r\n                        <Box component=\"span\" fontWeight=\"fontWeightBold\" mr={1}>Location:</Box>\r\n                        <Box component=\"span\">{evento.location?.nome}</Box>\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid item xs={3}>\r\n                    <Typography component=\"div\">\r\n                        <Box component=\"span\" fontWeight=\"fontWeightBold\" mr={1}>Posti disponibili:</Box>\r\n                        <Box component=\"span\">{evento.postiResidui} / {evento.postiDisponibili}</Box>\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid item xs={3}>\r\n                    <Typography component=\"div\">\r\n                        <Box component=\"span\" fontWeight=\"fontWeightBold\" mr={1}>Durata:</Box>\r\n                        <Box component=\"span\">{evento.durata} min.</Box>\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                    <Typography component=\"div\">\r\n                        <Box component=\"div\" fontWeight=\"fontWeightBold\" mr={1}>Note:</Box>\r\n                        <Box component=\"span\">{evento.note}</Box>\r\n                    </Typography>\r\n\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                    <Grid container alignItems=\"center\" justify=\"center\" direction=\"column\">\r\n                        <Grid item xs={12}>\r\n                            <AzureAD provider={authProvider} reduxStore={getStore()} >\r\n                                {\r\n                                    ({ login, logout, authenticationState, error, accountInfo }) => {\r\n                                        switch (authenticationState) {\r\n                                            case AuthenticationState.Authenticated:\r\n                                                if (appuntamento) {\r\n                                                    return (\r\n                                                        <Button size=\"large\" variant=\"contained\" onClick={handleDeletePrenotazione}>Annulla Prenotazione</Button>\r\n                                                    )\r\n                                                }\r\n                                                else {\r\n                                                    return (\r\n                                                        getIdFirstAbbonamentoValido() >= 0 ?\r\n                                                            <Button size=\"large\" variant=\"contained\" onClick={handlePrenotazioneAsync}>Prenota Lezione</Button>\r\n                                                            :\r\n                                                            <Typography>Nessun abbonamento valido</Typography>\r\n                                                    )\r\n                                                }\r\n                                            default:\r\n                                                return (\r\n                                                    //TODO: trasformare in un\r\n                                                    <Button size=\"large\" variant=\"contained\" onClick={login}>Accedi</Button>\r\n                                                    // <Button size=\"small\" variant=\"contained\" component={Link} to={`/${urlRoute}/utenti/${userId}`}>Accedi</Button>\r\n                                                )\r\n                                        }\r\n                                    }\r\n                                }\r\n                            </AzureAD>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n            </Grid>\r\n        );\r\n    }\r\n\r\n    function renderEventLoading() {\r\n        return (\r\n            <Box className={classes.eventLoadBox}>\r\n                <CircularProgress></CircularProgress>\r\n            </Box>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Paper className={classes.root}>\r\n            {isLoading() ? renderEventLoading() : renderEventDetails()}\r\n        </Paper>\r\n    )\r\n}\r\n","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaEditLocation.js",["397","398","399","400","401"],"import log from 'loglevel';\r\nimport React, { useState, useEffect, Fragment } from 'react'\r\nimport { Formik, Form, Field, ErrorMessage, FieldArray } from 'formik';\r\nimport { makeStyles, Grid, TextField, InputAdornment, FormControl, InputLabel, Button, Paper } from '@material-ui/core';\r\nimport { useParams } from 'react-router-dom';\r\nimport { StruttureEventiAPI } from '../../api/strutture.eventi.api'\r\nimport { CirclePicker } from 'react-color';\r\nimport R2DLoader from '../commons/R2DLoader'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst _logger = log.getLogger('StrutturaEditLocation');\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        minHeight: '400px',\r\n        position: \"relative\"\r\n    },\r\n    form: {\r\n        padding: '20px'\r\n    },\r\n    colorePickerLabel: {\r\n        transform: 'translate(0, 1.5px) scale(0.75)',\r\n        transformOrigin: 'top left'\r\n    },\r\n    colorePicker: {\r\n        marginTop: '24px'\r\n    },\r\n    btnSalva: {\r\n        backgroundColor: \"#E31F4F\",\r\n        color: \"white\",\r\n        margin: 'auto',\r\n    },\r\n    errorMessage: {\r\n        color: \"red\",\r\n        fontSize: \"0.7rem\"\r\n    }\r\n}));\r\n\r\n\r\nexport default (props) => {\r\n    const idStruttura = props.idStruttura;\r\n    let { idLocation } = useParams(); //Leggiamo l'idLocation dall'url\r\n    const [locationIsLoading, setLocationIsLoading] = useState(true);\r\n    const [location, setLocation] = useState(null);\r\n\r\n    const classes = useStyles();\r\n    let history = useHistory();\r\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n\r\n    useEffect(() => {\r\n        async function fetchLocation(idStruttura, idLocation) {\r\n            const data = await StruttureEventiAPI.FetchLocationSingleAsync(idStruttura, idLocation);\r\n            _logger.debug(`StrutturaEditLocation->useEffect()->fetchedLocation(${idStruttura}, ${idLocation}) => ${JSON.stringify(data)}`);\r\n            //facciamo l'override dei campi null per esigenze di Formik \r\n            if (data && (!data?.colore || data?.colore === '')) {\r\n                data.colore = 'transparent';\r\n                data.capienzaMax = data.capienzaMax ?? '';\r\n                data.descrizione = data.descrizione ?? '';\r\n                data.urlImage = data.urlImage ?? '';\r\n                data.urlIcon = data.urlIcon ?? '';\r\n            }\r\n            setLocation(data)\r\n            setLocationIsLoading(false);\r\n        }\r\n        if (idStruttura > 0 && !isNaN(idLocation) && idLocation > 0) {\r\n            fetchLocation(idStruttura, idLocation);\r\n        } else if (idStruttura > 0 && isNaN(idLocation)) {\r\n            //Inizializiamo un oggetto vuoto per gestire il caso di nuova location\r\n            setLocation({\r\n                id: -1,\r\n                idCliente: idStruttura,\r\n                nome: '',\r\n                descrizione: '',\r\n                capienzaMax: '',\r\n                colore: 'transparent',\r\n                urlImage: '',\r\n                urlIcon: ''\r\n            });\r\n            setLocationIsLoading(false);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [idStruttura, idLocation]);\r\n\r\n    const handleFormSubmmit = async (values, actions) => {\r\n        _logger.debug(`StrutturaEditLocation->FormSubmit() - values: ${JSON.stringify(values)}`);\r\n        let payload = Object.assign({}, values);\r\n        if (payload.capienzaMax === '') { payload.capienzaMax = null; }\r\n        await StruttureEventiAPI.SaveLocationAsync(idStruttura, payload);\r\n        actions.setSubmitting(false); //NOTA: essendo async non è tecnicamente necessaria questa chiamata, la fa Formik implicitamente\r\n        enqueueSnackbar('Sala salvata', {variant:'success'});\r\n        history.goBack();\r\n    }\r\n\r\n\r\n    function isFetchingInProgress() {\r\n        return locationIsLoading;\r\n    }\r\n\r\n    async function formValidateAsync(values) {\r\n        const errors = {}\r\n        if (!values.nome) {\r\n            errors.nome = \"E' necessario specificare il nome\";\r\n        }\r\n\r\n        _logger.debug(`StrutturaEditLocation->formValidateAsync() - errors: ${JSON.stringify(errors)}`);\r\n        return errors;\r\n    }\r\n\r\n     /**\r\n   * Stop enter submitting the form.\r\n   * @param keyEvent Event triggered when the user presses a key.\r\n   */\r\n  function onKeyDown(keyEvent) {\r\n    if ((keyEvent.charCode || keyEvent.keyCode) === 13) {\r\n      keyEvent.preventDefault();\r\n    }\r\n  }\r\n\r\n    function renderForm() {\r\n        return (\r\n            <Formik\r\n                initialValues={location}\r\n                enableReinitialize={true}\r\n                onSubmit={handleFormSubmmit}\r\n                validate={formValidateAsync}\r\n            >\r\n                {\r\n                    (props, form) => (\r\n                        <Form onSubmit={props.handleSubmit} autoComplete=\"off\" className={classes.form} onKeyDown={onKeyDown}>\r\n                            <Grid container>\r\n                                <Grid item xs={12}>\r\n                                    <TextField name='nome'\r\n                                        label='Nome Location'\r\n                                        onChange={props.handleChange}\r\n                                        onBlur={props.handleBlur}\r\n                                        value={props.values.nome}\r\n                                        fullWidth\r\n                                        margin='normal'\r\n                                    />\r\n                                    <ErrorMessage className={classes.errorMessage} component=\"span\" name=\"nome\" />\r\n                                </Grid>\r\n                                <Grid item xs={4}>\r\n                                    <TextField name='capienzaMax'\r\n                                        label='Capienza'\r\n                                        onChange={props.handleChange}\r\n                                        onBlur={props.handleBlur}\r\n                                        value={props.values.capienzaMax}\r\n                                        fullWidth\r\n                                        margin='normal'\r\n                                        type=\"number\"\r\n                                    />\r\n                                </Grid>\r\n                                <Grid item xs={12}>\r\n                                    <Field name='colore'\r\n                                        label='Colore Location'\r\n                                    >\r\n                                        {({ field, form }) =>\r\n                                            (\r\n                                                <FormControl fullWidth margin='normal'>\r\n                                                    <InputLabel className={classes.colorePickerLabel}>{'Colore Location'}</InputLabel>\r\n                                                    <CirclePicker className={classes.colorePicker} name={field.name}\r\n                                                        color={field.value}\r\n                                                        minDate={new Date()}\r\n                                                        label='Colore Sala'\r\n                                                        value={field.value}\r\n                                                        width=\"100%\"\r\n                                                        onChangeComplete={(colore, event) => form.setFieldValue(field.name, colore.hex, true)}\r\n                                                    />\r\n                                                </FormControl>\r\n                                            )\r\n                                        }\r\n                                    </Field>\r\n                                </Grid>\r\n                                <Grid item xs={12}>\r\n                                    <TextField name='descrizione'\r\n                                        label='Descrizione'\r\n                                        onChange={props.handleChange}\r\n                                        onBlur={props.handleBlur}\r\n                                        value={props.values.descrizione}\r\n                                        fullWidth\r\n                                        margin='normal'\r\n                                        multiline\r\n                                    />\r\n                                </Grid>\r\n\r\n                                <Grid item xs={12} style={{ textAlign: \"center\" }}>\r\n                                    <Button size=\"large\" variant=\"contained\"\r\n                                        type=\"submit\"\r\n                                        className={classes.btnSalva}>Salva</Button>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Form>\r\n                    )\r\n                }\r\n            </Formik>\r\n        )\r\n    }\r\n\r\n    function renderLoading() {\r\n        return (\r\n            <R2DLoader />\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Paper className={classes.root}>\r\n            {!isFetchingInProgress() ? renderForm() : renderLoading()}\r\n        </Paper>\r\n    );\r\n\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaListaLocations.js",["402","403","404","405"],"import log from 'loglevel';\r\nimport React, { useEffect, useState, Fragment } from 'react'\r\n\r\nimport { StruttureEventiAPI } from '../../api/strutture.eventi.api'\r\nimport {\r\n    makeStyles, Grid, Box, Typography, TableContainer, Table, TableHead, TableRow, TableCell, TableBody, Button,\r\n    IconButton, Paper, Fab\r\n} from '@material-ui/core';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport { Link } from 'react-router-dom';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport R2DLoader from '../commons/R2DLoader';\r\n\r\nconst _logger = log.getLogger('StrutturaListaLocations');\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        minHeight: \"600px\",\r\n        position: \"relative\"\r\n    },\r\n    table: {\r\n        minWidth: 650,\r\n    },\r\n});\r\n\r\n\r\nexport default (props) => {\r\n    const idStruttura = props.idStruttura;\r\n    const urlRoute = props.urlRoute;\r\n\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [locations, setLocations] = useState(null);\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        async function fetchLocations() {\r\n            _logger.debug(`StrutturaListaLocations->useEffect()->fetchLocations(idStruttura: ${idStruttura})`);            \r\n            const data = await StruttureEventiAPI.FetchLocationsAsync(idStruttura);\r\n            _logger.debug(`StrutturaListaLocations->useEffect()->fetchLocations(data: ${JSON.stringify(data)})`);\r\n            setLocations(data ?? []);\r\n            setIsLoading(false);\r\n        }\r\n\r\n        if (idStruttura && idStruttura > 0) {\r\n            fetchLocations();\r\n        }\r\n    }, [idStruttura])\r\n\r\n    function renderLoading() {\r\n        return (\r\n            <R2DLoader />\r\n        )\r\n    }\r\n\r\n    function renderNoData() {\r\n        return (\r\n            <Typography variant=\"h6\">Nessuna location</Typography>\r\n        )\r\n    }\r\n\r\n    function renderComponent() {\r\n        return (\r\n            <Box>\r\n                <Box>\r\n                    <Typography variant=\"h5\">Gestione Locations</Typography>\r\n                    <Fab color=\"primary\" aria-label=\"add\" style={{ float: \"right\", marginRight: \"20px\", marginTop: \"-10px\" }} component={Link} to={`/${urlRoute}/locations/new`}>\r\n                        <AddIcon />\r\n                    </Fab>\r\n                </Box>\r\n                {locations && locations.length > 0 ?\r\n                    <TableContainer>\r\n                        <Table className={classes.table} aria-label=\"Elenco locations\">\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell>Nome</TableCell>\r\n                                    <TableCell align=\"center\">Capienza</TableCell>\r\n                                    {/* <TableCell align=\"center\">Colore</TableCell> */}\r\n                                    <TableCell align=\"center\"></TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {locations.map(l => (\r\n                                    <TableRow key={l.id}>\r\n                                        <TableCell component=\"th\" scope=\"row\">\r\n                                            {l.nome}\r\n                                        </TableCell>\r\n                                        <TableCell align=\"center\">{l.capienzaMax ?? '-'}</TableCell>\r\n                                        {/* <TableCell align=\"center\"><Box style={{ margin: 'auto', width: '30px', height: '30px', backgroundColor: l.colore }}></Box></TableCell> */}\r\n                                        <TableCell align=\"right\">\r\n                                            <Button startIcon={<EditIcon />} size=\"small\" variant=\"outlined\" component={Link} to={`/${urlRoute}/locations/${l.id}`} >\r\n                                                Edit\r\n                                            </Button>\r\n\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                ))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </TableContainer>\r\n                    :\r\n                    renderNoData()\r\n                }\r\n            </Box>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Paper className={classes.root}>\r\n            {isLoading ? renderLoading() : (locations.length > 0 ? renderComponent() : renderNoData())}\r\n        </Paper>\r\n    )\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaListaTipologiaLezioni.js",["406","407","408","409","410"],"import log from 'loglevel';\r\nimport React, { useEffect, useState, Fragment } from 'react'\r\n\r\nimport { StruttureEventiAPI } from '../../api/strutture.eventi.api'\r\nimport { makeStyles, Grid, Box, Typography, TableContainer, Table, TableHead, TableRow, TableCell, TableBody, Button, IconButton, Paper, CircularProgress, Fab } from '@material-ui/core';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport { Link } from 'react-router-dom';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport R2DLoader from '../commons/R2DLoader'\r\n\r\nconst _logger = log.getLogger('StrutturaListaTipologiaLezioni');\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        minHeight: '600px',\r\n        position: \"relative\"\r\n    },\r\n    table: {\r\n        minWidth: 650,\r\n    },\r\n});\r\n\r\n\r\nexport default (props) => {\r\n    const idStruttura = props.idStruttura;\r\n    const urlRoute = props.urlRoute;\r\n\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [tipologieLezioni, setTipologieLezioni] = useState(null);\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        async function fetchTipologieLezioni(page, pageSize) {\r\n            _logger.debug(`StrutturaListaTipologiaLezioni->useEffect()->fetchTipologieLezioni(idStruttura: ${idStruttura})`);\r\n            const data = await StruttureEventiAPI.FetchTipologieLezioniAsync(idStruttura, page, pageSize);\r\n            setTipologieLezioni(data ?? []);\r\n            setIsLoading(false);\r\n        }\r\n\r\n        if (idStruttura && idStruttura > 0) {\r\n            //TODO: Gestire la paginazione\r\n            fetchTipologieLezioni(1, 500);\r\n        }\r\n    }, [idStruttura])\r\n\r\n    function renderLoading() {\r\n        return (\r\n            <R2DLoader height={250} width={250} />\r\n        )\r\n    }\r\n\r\n\r\n    function renderNoData() {\r\n        return (\r\n            <Typography variant=\"h6\">Nessuna Tipologia Lezione</Typography>\r\n        )\r\n    }\r\n\r\n    function renderComponent() {\r\n        return (\r\n            <Box>\r\n                <Box>\r\n                    <Typography variant=\"h5\" align=\"center\" >Gestione Tipologie Lezioni</Typography>\r\n                    <Fab color=\"primary\" aria-label=\"add\" style={{ float: \"right\", marginRight: \"20px\", marginTop: \"-10px\" }} component={Link} to={`/${urlRoute}/lezioni/new`}>\r\n                        <AddIcon />\r\n                    </Fab>\r\n                </Box>\r\n                {tipologieLezioni && tipologieLezioni.length > 0 ?\r\n                    <TableContainer>\r\n                        <Table className={classes.table} aria-label=\"Elenco tipologie lezioni\">\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell>Nome</TableCell>\r\n                                    {/* <TableCell align=\"center\">Livello</TableCell> */}\r\n                                    <TableCell align=\"center\">Prezzo</TableCell>\r\n                                    <TableCell align=\"center\">Durata</TableCell>\r\n                                    <TableCell align=\"center\"></TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {tipologieLezioni.map(l => (\r\n                                    <TableRow key={l.id}>\r\n                                        <TableCell component=\"th\" scope=\"row\">\r\n                                            {l.nome}\r\n                                        </TableCell>\r\n                                        {/* <TableCell align=\"right\">{l.livello}</TableCell> */}\r\n                                        <TableCell align=\"center\">{(l.prezzo || l.prezzo === 0) ? `${l.prezzo.toLocaleString()}\\u00A0€` : '-'}</TableCell>\r\n                                        <TableCell align=\"center\">{l.durata ? `${l.durata}\\u00A0minuti` : '-'} </TableCell>\r\n                                        <TableCell align=\"right\">\r\n                                            <Button startIcon={<EditIcon />} size=\"small\" variant=\"outlined\" component={Link} to={`/${urlRoute}/lezioni/${l.id}`} >\r\n                                                Edit\r\n                                            </Button>\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                ))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </TableContainer>\r\n                    :\r\n                    renderNoData()\r\n                }\r\n            </Box>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Paper className={classes.root}>\r\n            {isLoading ? renderLoading() : (tipologieLezioni.length > 0 ? renderComponent() : renderNoData())}\r\n        </Paper>\r\n    )\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaEditTipologiaLezione.js",["411","412","413"],"import log from 'loglevel';\r\nimport React, { useState, useEffect } from 'react'\r\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\r\nimport { makeStyles, Grid, TextField, Button, Paper, InputAdornment, Select, MenuItem } from '@material-ui/core';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport { StruttureEventiAPI } from '../../api/strutture.eventi.api'\r\nimport R2DLoader from '../commons/R2DLoader'\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst _logger = log.getLogger('StrutturaEditTipologiaLezione');\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        minHeight: '400px',\r\n        position: \"relative\"\r\n    },\r\n    form: {\r\n        padding: '20px'\r\n    },\r\n    colorePickerLabel: {\r\n        transform: 'translate(0, 1.5px) scale(0.75)',\r\n        transformOrigin: 'top left'\r\n    },\r\n    colorePicker: {\r\n        marginTop: '24px'\r\n    },\r\n    btnSalva: {\r\n        marginTop: \"50px\",\r\n        backgroundColor: \"#E31F4F\",\r\n        color: \"white\",\r\n        margin: 'auto',\r\n    },\r\n    errorMessage: {\r\n        color: \"red\",\r\n        fontSize: \"0.7rem\"\r\n    }\r\n}));\r\n\r\n\r\nexport default (props) => {\r\n    const idStruttura = props.idStruttura;\r\n    const urlRoute = props.urlRoute;\r\n\r\n    let { idTipoLezione } = useParams(); //Leggiamo l'idLocation dall'url\r\n    let history = useHistory();\r\n    const [tipoLezioneIsLoading, setTipoLezioneIsLoading] = useState(true);\r\n    const [tipoLezione, setTipoLezione] = useState(null);\r\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n\r\n    const classes = useStyles();\r\n    _logger.debug(`StrutturaEditTipologiaLezione - idStruttura:${idStruttura}, idTipoLezione: ${idTipoLezione}`);\r\n\r\n    useEffect(() => {\r\n        async function fetchLocation(idStruttura, idLocation) {\r\n            const data = await StruttureEventiAPI.FetchTipologiaLezioneSingleAsync(idStruttura, idLocation);\r\n            _logger.debug(`StrutturaEditTipologiaLezione->useEffect()->fetchedLocation(${idStruttura}, ${idLocation}) => ${JSON.stringify(data)}`);\r\n            //facciamo l'override dei campi null per esigenze di Formik \r\n            if (data && (!data?.colore || data?.colore === '')) {\r\n                data.maxPartecipanti = data.maxPartecipanti ?? '';\r\n                data.limiteCancellazioneMinuti = data.limiteCancellazioneMinuti ?? '';\r\n                data.prezzo = data.prezzo ?? '';\r\n                data.descrizione = data.descrizione ?? '';\r\n            }\r\n            if (data.limiteCancellazioneMinuti >= 1440 &&\r\n                Number.isInteger(data.limiteCancellazioneMinuti / (60 * 24))) {\r\n                data.limiteCancellazioneUM = 'd';\r\n                data.limiteCancellazioneMinuti = data.limiteCancellazioneMinuti / (60 * 24);\r\n            }\r\n            else if ((data.limiteCancellazioneMinuti > 60) &&\r\n                Number.isInteger(data.limiteCancellazioneMinuti / 60)) {\r\n                data.limiteCancellazioneUM = 'h';\r\n                data.limiteCancellazioneMinuti = data.limiteCancellazioneMinuti / 60;\r\n            } else {\r\n                data.limiteCancellazioneUM = 'm';\r\n            }\r\n            setTipoLezione(data)\r\n            setTipoLezioneIsLoading(false);\r\n        }\r\n        if (idStruttura > 0 && !isNaN(idTipoLezione) && idTipoLezione > 0) {\r\n            fetchLocation(idStruttura, idTipoLezione);\r\n        } else if (idStruttura > 0 && isNaN(idTipoLezione)) {\r\n            //Inizializiamo un oggetto vuoto per gestire il caso di nuova location\r\n            setTipoLezione({\r\n                id: -1,\r\n                idCliente: idStruttura,\r\n                nome: '',\r\n                descrizione: '',\r\n                durata: '',\r\n                maxPartecipanti: '',\r\n                limiteCancellazioneMinuti: '',\r\n                limiteCancellazioneUM: 'h', //Campo fittizio \r\n                livello: '',\r\n                prezzo: ''\r\n            });\r\n            setTipoLezioneIsLoading(false);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [idStruttura, idTipoLezione]);\r\n\r\n    const handleFormSubmmit = async (values, actions) => {\r\n        _logger.debug(`StrutturaEditTipologiaLezione->FormSubmit() - values: ${JSON.stringify(values)}`);\r\n        let payload = Object.assign({}, values);\r\n        if (payload.maxPartecipanti === '') { payload.maxPartecipanti = null; }\r\n        if (payload.limiteCancellazioneMinuti === '') { payload.limiteCancellazioneMinuti = null; }\r\n        if (payload.prezzo === '') { payload.prezzo = null; }\r\n        if (payload.livello === '') { payload.livello = 0; }\r\n        if (payload.limiteCancellazioneMinuti > 0) {\r\n            switch (payload.limiteCancellazioneUM) {\r\n                case 'h':\r\n                    payload.limiteCancellazioneMinuti = payload.limiteCancellazioneMinuti * 60;\r\n                    break;\r\n                case 'd':\r\n                    payload.limiteCancellazioneMinuti = payload.limiteCancellazioneMinuti * 60 * 24;\r\n                    break;\r\n                default: // Già minuti\r\n                    break;\r\n            }\r\n        }\r\n        delete payload.limiteCancellazioneUM;\r\n        delete payload.dataCreazione;\r\n\r\n        const esito = await StruttureEventiAPI.SaveTipologiaLezioneAsync(idStruttura, payload);\r\n        actions.setSubmitting(false); //NOTA: essendo async non è tecnicamente necessaria questa chiamata, la fa Formik implicitamente\r\n        if (esito) {\r\n            enqueueSnackbar('Tipologia lezione salvata', {variant:'success'});\r\n            history.goBack(`/${urlRoute}/locations`);\r\n        }else{\r\n            enqueueSnackbar('Errore nel salvataggio', {variant:'error'});\r\n        }\r\n    }\r\n\r\n\r\n    function isFetchingInProgress() {\r\n        return tipoLezioneIsLoading;\r\n    }\r\n\r\n    async function formValidateAsync(values) {\r\n        const errors = {}\r\n        if (!values.nome) {\r\n            errors.nome = \"E' necessario specificare il nome\";\r\n        }\r\n        else if (!await StruttureEventiAPI.TipologiaLezioneCheckNomeAsync(idStruttura, values.id, values.nome)) {\r\n            errors.nome = \"Esiste già una tipologia lezione con questo nome\";\r\n        }\r\n        if (!values.durata && values.durata !== 0) {\r\n            errors.durata = \"Campo obbligatorio\";\r\n        } else if (values.durata <= 0) {\r\n            errors.durata = \"Durata non valida\"\r\n        }\r\n\r\n        if (values.maxPartecipanti === 0 || values.maxPartecipanti < 0) {\r\n            errors.maxPartecipanti = \"Valore non valido\"\r\n        }\r\n        _logger.debug(`StrutturaEditTipologiaLezione->formValidateAsync() - errors: ${JSON.stringify(errors)}`);\r\n        return errors;\r\n    }\r\n\r\n    function renderForm() {\r\n        return (\r\n            <Formik\r\n                initialValues={tipoLezione}\r\n                enableReinitialize={true}\r\n                validateOnChange={false}\r\n                onSubmit={handleFormSubmmit}\r\n                validate={formValidateAsync}\r\n            >\r\n                {\r\n                    (props, form) => (\r\n                        <Form onSubmit={props.handleSubmit} autoComplete=\"off\" className={classes.form}>\r\n                            <Grid container>\r\n                                <Grid item xs={12}>\r\n                                    <TextField name='nome'\r\n                                        label='Tipologia lezione *'\r\n                                        onChange={props.handleChange}\r\n                                        onBlur={props.handleBlur}\r\n                                        value={props.values.nome}\r\n                                        fullWidth\r\n                                        margin='normal'\r\n                                    />\r\n                                    <ErrorMessage className={classes.errorMessage} component=\"div\" name=\"nome\" />\r\n                                </Grid>\r\n                                <Grid item xs={4}>\r\n                                    <TextField name='durata'\r\n                                        label='Durata *'\r\n                                        onChange={props.handleChange}\r\n                                        onBlur={props.handleBlur}\r\n                                        value={props.values.durata}\r\n                                        InputProps={{ endAdornment: <InputAdornment position=\"end\">(minuti)</InputAdornment> }}\r\n                                        margin='normal'\r\n                                        type=\"number\"\r\n                                    />\r\n                                    <ErrorMessage className={classes.errorMessage} component=\"div\" name=\"durata\" />\r\n                                </Grid>\r\n                                <Grid item xs={4}>\r\n                                    <TextField name='maxPartecipanti'\r\n                                        label='Limite partecipanti'\r\n                                        onChange={props.handleChange}\r\n                                        onBlur={props.handleBlur}\r\n                                        value={props.values.maxPartecipanti}\r\n\r\n                                        margin='normal'\r\n                                        type=\"number\"\r\n                                    />\r\n                                    <ErrorMessage className={classes.errorMessage} component=\"div\" name=\"maxPartecipanti\" />\r\n                                </Grid>\r\n                                <Grid item xs={4} />\r\n                                <Grid item xs={4}>\r\n                                    <TextField name='limiteCancellazioneMinuti'\r\n                                        label='Preavviso Cancellazione'\r\n                                        onChange={props.handleChange}\r\n                                        onBlur={props.handleBlur}\r\n                                        value={props.values.limiteCancellazioneMinuti}\r\n                                        InputProps={{\r\n                                            endAdornment: <InputAdornment position=\"end\">\r\n                                                <Select name='limiteCancellazioneUM'\r\n                                                    value={props.values.limiteCancellazioneUM}\r\n                                                    onChange={props.handleChange}\r\n                                                >\r\n                                                    <MenuItem value=\"m\">Minuti</MenuItem>\r\n                                                    <MenuItem value=\"h\">Ore</MenuItem>\r\n                                                    <MenuItem value=\"d\">Giorni</MenuItem>\r\n                                                </Select>\r\n                                            </InputAdornment>\r\n                                        }}\r\n                                        margin='normal'\r\n                                        type=\"number\"\r\n                                    />\r\n                                </Grid>\r\n                                <Grid item xs={4}>\r\n                                    <TextField name='prezzo'\r\n                                        label='Prezzo'\r\n                                        onChange={props.handleChange}\r\n                                        onBlur={props.handleBlur}\r\n                                        value={props.values.prezzo}\r\n                                        InputProps={{ endAdornment: <InputAdornment position=\"end\">(€)</InputAdornment> }}\r\n                                        margin='normal'\r\n                                        type=\"number\"\r\n                                    />\r\n                                </Grid>\r\n                                <Grid item xs={4} />\r\n                                <Grid item xs={12}>\r\n                                    <TextField name='descrizione'\r\n                                        label='Descrizione'\r\n                                        onChange={props.handleChange}\r\n                                        onBlur={props.handleBlur}\r\n                                        value={props.values.descrizione}\r\n                                        fullWidth\r\n                                        margin='normal'\r\n                                        multiline\r\n                                    />\r\n                                </Grid>\r\n\r\n                                <Grid item xs={12} style={{ textAlign: \"center\" }}>\r\n                                    <Button size=\"large\" variant=\"contained\"\r\n                                        type=\"submit\"\r\n                                        className={classes.btnSalva}>Salva</Button>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Form>\r\n                    )\r\n                }\r\n            </Formik>\r\n        )\r\n    }\r\n\r\n    function renderLoading() {\r\n        return (\r\n            <R2DLoader/>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Paper className={classes.root}>\r\n            {!isFetchingInProgress() ? renderForm() : renderLoading()}\r\n        </Paper>\r\n    );\r\n\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaListaTipologiaAbbonamenti.js",["414","415","416","417"],"import log from 'loglevel';\r\nimport React, { useEffect, useState, Fragment } from 'react'\r\n\r\nimport { StruttureEventiAPI } from '../../api/strutture.eventi.api'\r\nimport { makeStyles, Grid, Box, Typography, TableContainer, Table, TableHead, TableRow, TableCell, TableBody, Button, IconButton, Paper, CircularProgress, Fab } from '@material-ui/core';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport { Link } from 'react-router-dom';\r\nimport AddIcon from '@material-ui/icons/Add';\r\n\r\nconst _logger = log.getLogger('StrutturaListaTipologiaAbbonamenti');\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        minHeight: '600px'\r\n    },\r\n    table: {\r\n        minWidth: 650,\r\n    },\r\n});\r\n\r\n\r\nexport default (props) => {\r\n    const idStruttura = props.idStruttura;\r\n    const urlRoute = props.urlRoute;\r\n\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [tipologieAbbonamenti, setTipologieAbbonamenti] = useState(null);\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        async function fetchTipologieAbbonamenti(page, pageSize) {\r\n            _logger.debug(`StrutturaListaTipologiaAbbonamenti->useEffect()->fetchTipologieAbbonamenti(idStruttura: ${idStruttura})`);\r\n            const data = await StruttureEventiAPI.FetchTipologieAbbonamentiAsync(idStruttura, page, pageSize);\r\n            setTipologieAbbonamenti(data ?? []);\r\n            setIsLoading(false);\r\n        }\r\n\r\n        if (idStruttura && idStruttura > 0) {\r\n            //TODO: Gestire la paginazione\r\n            fetchTipologieAbbonamenti(1, 500);\r\n        }\r\n    }, [idStruttura])\r\n\r\n    function renderLoading() {\r\n        return (\r\n            <CircularProgress />\r\n        )\r\n    }\r\n\r\n    function renderNoData() {\r\n        return (\r\n            <Typography variant=\"h6\">Nessuna Tipologia Abbonamento</Typography>\r\n        )\r\n    }\r\n\r\n    function renderComponent() {\r\n        return (\r\n            <Box>\r\n                <Box>\r\n                    <Typography variant=\"h5\" align=\"center\" >Gestione Tipologie Abbonamenti</Typography>\r\n                    <Fab color=\"primary\" aria-label=\"add\" style={{float:\"right\", marginRight:\"20px\", marginTop:\"-10px\"}} component={Link} to={`/${urlRoute}/abbonamenti/new`}>\r\n                        <AddIcon />\r\n                    </Fab>\r\n                </Box>\r\n                {tipologieAbbonamenti && tipologieAbbonamenti.length > 0 ?\r\n                    <TableContainer>\r\n                        <Table className={classes.table} aria-label=\"Elenco tipologie abbonamenti\">\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell>Nome</TableCell>\r\n                                    <TableCell align=\"center\">Durata (mesi)</TableCell>\r\n                                    <TableCell align=\"center\">Prezzo</TableCell>\r\n                                    <TableCell align=\"center\">Num. Ingressi</TableCell>\r\n                                    <TableCell align=\"center\"></TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {tipologieAbbonamenti.map(l => (\r\n                                    <TableRow key={l.id}>\r\n                                        <TableCell component=\"th\" scope=\"row\">\r\n                                            {l.nome}\r\n                                        </TableCell>\r\n                                        <TableCell align=\"center\">{l.durataMesi}</TableCell>\r\n                                        <TableCell align=\"center\">{(l.costo || l.costo === 0) ? `${l.costo.toLocaleString()}\\u00A0€` : '-'}</TableCell>\r\n                                        <TableCell align=\"center\">{l.numIngressi}</TableCell>\r\n                                        <TableCell align=\"right\">\r\n                                            <IconButton aria-label=\"edit\" component={Link} to={`/${urlRoute}/lezioni/${l.id}`} >\r\n                                                <EditIcon />\r\n                                            </IconButton>\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                ))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </TableContainer>\r\n                    :\r\n                    renderNoData()\r\n                }\r\n            </Box>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Paper className={classes.root}>\r\n            {isLoading ? renderLoading() : (tipologieAbbonamenti.length > 0 ? renderComponent() : renderNoData())}\r\n        </Paper>\r\n    )\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaEditTipologiaAbbonamento.js",["418","419","420","421","422"],"import log from \"loglevel\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\r\nimport { makeStyles, CircularProgress, Grid, TextField, Button, Paper, InputAdornment } from \"@material-ui/core\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { StruttureEventiAPI } from \"../../api/strutture.eventi.api\";\r\nimport { DateTimePicker, DatePicker } from \"@material-ui/pickers\";\r\nimport { useSnackbar } from \"notistack\";\r\n\r\nconst _logger = log.getLogger(\"StrutturaEditTipologiaAbbonamento\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    minHeight: \"400px\",\r\n  },\r\n  form: {\r\n    padding: \"20px\",\r\n  },\r\n  colorePickerLabel: {\r\n    transform: \"translate(0, 1.5px) scale(0.75)\",\r\n    transformOrigin: \"top left\",\r\n  },\r\n  colorePicker: {\r\n    marginTop: \"24px\",\r\n  },\r\n  btnSalva: {\r\n    marginTop: \"50px\",\r\n    backgroundColor: \"#E31F4F\",\r\n    color: \"white\",\r\n    margin: \"auto\",\r\n  },\r\n  errorMessage: {\r\n    color: \"red\",\r\n    fontSize: \"0.7rem\",\r\n  },\r\n}));\r\n\r\nexport default (props) => {\r\n  const idStruttura = props.idStruttura;\r\n  let { idTipoAbbonamento } = useParams(); //Leggiamo l'idLocation dall'url\r\n  let history = useHistory();\r\n  const [tipoAbbonamentoIsLoading, setTipoAbbonamentoIsLoading] = useState(true);\r\n  const [tipoAbbonamento, setTipoAbbonamento] = useState(null);\r\n\r\n  const classes = useStyles();\r\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n  _logger.debug(`StrutturaEditTipologiaAbbonamento - idStruttura:${idStruttura}, idTipoAbbonamento: ${idTipoAbbonamento}`);\r\n\r\n  useEffect(() => {\r\n    async function fetchAbbonamento(idStruttura, idTipoAbbonamento) {\r\n      const data = await StruttureEventiAPI.FetchTipologiaAbbonamentoSingleAsync(idStruttura, idTipoAbbonamento);\r\n      _logger.debug(`StrutturaEditTipologiaAbbonamento->useEffect()->fetchedAbbonamento(${idStruttura}, ${idTipoAbbonamento}) => ${JSON.stringify(data)}`);\r\n      //facciamo l'override dei campi null per esigenze di Formik\r\n      if (data) {\r\n        data.durataMesi = data.durataMesi ?? \"\";\r\n        data.numIngressi = data.numIngressi ?? \"\";\r\n        data.costo = data.costo ?? \"\";\r\n        data.maxLivCorsi = data.maxLivCorsi ?? \"\";\r\n      }\r\n      setTipoAbbonamento(data);\r\n      setTipoAbbonamentoIsLoading(false);\r\n    }\r\n    if (idStruttura > 0 && !isNaN(idTipoAbbonamento) && idTipoAbbonamento > 0) {\r\n      fetchAbbonamento(idStruttura, idTipoAbbonamento);\r\n    } else if (idStruttura > 0 && isNaN(idTipoAbbonamento)) {\r\n      //Inizializiamo un oggetto vuoto per gestire il caso di nuova location\r\n      setTipoAbbonamento({\r\n        id: -1,\r\n        idCliente: idStruttura,\r\n        nome: \"\",\r\n        durataMesi: \"\",\r\n        numIngressi: \"\",\r\n        costo: \"\",\r\n        maxLivCorsi: \"\",\r\n      });\r\n      setTipoAbbonamentoIsLoading(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [idStruttura, idTipoAbbonamento]);\r\n\r\n  const handleFormSubmmit = async (values, actions) => {\r\n    _logger.debug(`StrutturaEditTipologiaAbbonamento->FormSubmit() - values: ${JSON.stringify(values)}`);\r\n    let payload = Object.assign({}, values);\r\n    if (payload.durataMesi === \"\") {\r\n      payload.durataMesi = null;\r\n    }\r\n    if (payload.numIngressi === \"\") {\r\n      payload.numIngressi = null;\r\n    }\r\n    if (payload.costo === \"\") {\r\n      payload.costo = null;\r\n    }\r\n    if (payload.maxLivCorsi === \"\") {\r\n      payload.maxLivCorsi = 0;\r\n    }\r\n    const esito = await StruttureEventiAPI.SaveTipologiaAbbonamentoAsync(idStruttura, payload);\r\n    actions.setSubmitting(false); //NOTA: essendo async non è tecnicamente necessaria questa chiamata, la fa Formik implicitamente\r\n    if (esito) {\r\n      enqueueSnackbar(\"Sala salvata\", { variant: \"success\" });\r\n      history.goBack();\r\n    } else {\r\n      enqueueSnackbar(\"Errore nel salvataggio\", { variant: \"error\" });\r\n    }\r\n  };\r\n\r\n  function isFetchingInProgress() {\r\n    return tipoAbbonamentoIsLoading;\r\n  }\r\n\r\n  async function formValidateAsync(values) {\r\n    const errors = {};\r\n    if (!values.nome) {\r\n      errors.nome = \"E' necessario specificare il nome\";\r\n    }\r\n    if (!(await StruttureEventiAPI.TipologiaAbbonamentoCheckNomeAsync(idStruttura, values.id, values.nome))) {\r\n      errors.nome = \"Esiste già un abbonamento con questo nome\";\r\n    }\r\n\r\n    if ((!values.durataMesi || values.durataMesi <= 0) && (!values.numIngressi || values.numIngressi <= 0)) {\r\n      errors.durataMesi = \"E' necessario specificare almeno uno tra Durata e Numero Ingressi\";\r\n      errors.numIngressi = \"E' necessario specificare almeno uno tra Durata e Numero Ingressi\";\r\n    }\r\n\r\n    _logger.debug(`StrutturaEditTipologiaAbbonamento->formValidateAsync() - errors: ${JSON.stringify(errors)}`);\r\n    return errors;\r\n  }\r\n\r\n  function renderForm() {\r\n    return (\r\n      <Formik initialValues={tipoAbbonamento} enableReinitialize={true} onSubmit={handleFormSubmmit} validateOnChange={false} validate={formValidateAsync}>\r\n        {(props, form) => (\r\n          <Form onSubmit={props.handleSubmit} autoComplete=\"off\" className={classes.form}>\r\n            <Grid container>\r\n              <Grid item xs={8}>\r\n                <TextField name=\"nome\" label=\"Tipologia abbonamento\" onChange={props.handleChange} onBlur={props.handleBlur} value={props.values.nome} fullWidth margin=\"normal\" />\r\n                <ErrorMessage className={classes.errorMessage} component=\"span\" name=\"nome\" />\r\n              </Grid>\r\n              <Grid item xs={4} />\r\n\r\n              <Grid item xs={4}>\r\n                <TextField name=\"durataMesi\" label=\"Durata mesi\" onChange={props.handleChange} onBlur={props.handleBlur} value={props.values.durataMesi} margin=\"normal\" type=\"number\" />\r\n                <ErrorMessage className={classes.errorMessage} component=\"span\" name=\"durataMesi\" />\r\n              </Grid>\r\n              <Grid item xs={4}>\r\n                <TextField name=\"numIngressi\" label=\"Numero Ingressi\" onChange={props.handleChange} onBlur={props.handleBlur} value={props.values.numIngressi} margin=\"normal\" type=\"number\" />\r\n              </Grid>\r\n              <Grid item xs={4} />\r\n              {/* <Grid item xs={4}>\r\n                                    <TextField name='maxLivCorsi'\r\n                                        label='Livello Massimo Corsi'\r\n                                        onChange={props.handleChange}\r\n                                        onBlur={props.handleBlur}\r\n                                        value={props.values.maxLivCorsi}\r\n                                        // InputProps={{endAdornment:<InputAdornment position=\"end\">(minuti)</InputAdornment>}}\r\n                                        margin='normal'\r\n                                        type=\"number\"\r\n                                    />\r\n                                </Grid> */}\r\n              <Grid item xs={4}>\r\n                <TextField\r\n                  name=\"costo\"\r\n                  label=\"Prezzo\"\r\n                  onChange={props.handleChange}\r\n                  onBlur={props.handleBlur}\r\n                  value={props.values.costo}\r\n                  InputProps={{ endAdornment: <InputAdornment position=\"end\">(€)</InputAdornment> }}\r\n                  margin=\"normal\"\r\n                  type=\"number\"\r\n                />\r\n              </Grid>\r\n              {/* <Grid item xs={4}>\r\n                                    <Field name='validoDal'>\r\n                                        {({ field, form }) =>\r\n                                            (\r\n                                                <DatePicker name={field.name}\r\n                                                    margin=\"normal\"\r\n                                                    fullWidth\r\n                                                    //minDate={new Date()}\r\n                                                    label='Valido dal'\r\n                                                    value={field.value}\r\n                                                    onChange={dateTime => form.setFieldValue(field.name, dateTime, true)}\r\n                                                    format=\"dd MMMM yyyy\" />\r\n                                            )}\r\n                                    </Field>\r\n                                </Grid> */}\r\n              {/* <Grid item xs={12}>\r\n                                    <TextField name='descrizione'\r\n                                        label='Descrizione'\r\n                                        onChange={props.handleChange}\r\n                                        onBlur={props.handleBlur}\r\n                                        value={props.values.descrizione}\r\n                                        fullWidth\r\n                                        margin='normal'\r\n                                        multiline\r\n                                    />\r\n                                </Grid> */}\r\n\r\n              <Grid item xs={12} style={{ textAlign: \"center\" }}>\r\n                <Button size=\"large\" variant=\"contained\" type=\"submit\" className={classes.btnSalva}>\r\n                  Salva\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    );\r\n  }\r\n\r\n  function renderLoading() {\r\n    return <CircularProgress />;\r\n  }\r\n\r\n  return <Paper className={classes.root}>{!isFetchingInProgress() ? renderForm() : renderLoading()}</Paper>;\r\n};\r\n","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\utente\\UtenteLayout.js",["423"],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\utente\\UtenteProfilo.js",["424","425","426","427"],"import log from 'loglevel'\r\nimport React, { Fragment } from 'react'\r\nimport { Paper, makeStyles } from '@material-ui/core'\r\nimport UtenteProfiloEdit from './UtenteProfiloEdit'\r\nimport UtenteStruttureSeguite from './UtenteStruttureSeguite'\r\n\r\nconst _logger = log.getLogger('UtenteProfiloEdit');\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\r\n}));\r\n\r\n\r\nexport default (props) =>{\r\n    const classes = useStyles();\r\n\r\n    return(\r\n        <Fragment>\r\n            <UtenteProfiloEdit/>\r\n            <UtenteStruttureSeguite/>\r\n        </Fragment>\r\n    )\r\n\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\utente\\UtentePrenotazioni.js",["428","429","430","431","432","433","434","435","436"],"import log from 'loglevel'\r\nimport React, { Fragment } from 'react'\r\nimport { makeStyles, Paper, Typography, Button, Grid } from '@material-ui/core'\r\nimport addYears from 'date-fns/addYears'\r\nimport formatISO from 'date-fns/formatISO'\r\nimport parseISO from 'date-fns/parseISO'\r\nimport format from 'date-fns/format'\r\nimport { it as itLocal } from 'date-fns/locale'\r\nimport MUIDataTable from \"mui-datatables\";\r\nimport R2DLoader from '../commons/R2DLoader';\r\nimport { UsersAPI } from '../../api/users.api'\r\nimport PageviewIcon from '@material-ui/icons/Pageview';\r\nimport { Link } from 'react-router-dom'\r\nimport { DatePicker } from \"@material-ui/pickers\";\r\nimport startOfDay from 'date-fns/startOfDay'\r\nimport { UtentePrenotazioniFilter } from './UtentePrenotazioneFilter'\r\n\r\nconst _logger = log.getLogger('UtentePrenotazioni')\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root:{\r\n        minHeight: '600px',\r\n    },\r\n    dataTable:{\r\n        minHeight: '600px',\r\n    },\r\n    datePickerFilter: {\r\n        paddingRight: \"5px\",\r\n        paddingLeft: \"5px\",\r\n        fontSize: \"0.7rem\"\r\n    },\r\n    dtPickerInput: {\r\n        fontSize: \"0.5rem\"\r\n    }\r\n}));\r\n\r\nexport const UtentePrenotazioni = (props) => {\r\n    const classes = useStyles();\r\n    //Destinato a contenere la lista dei valori per cui filtrare per ciascuna colonna \r\n    const [filters, setFilters] = React.useState({\r\n        from: startOfDay(new Date()),\r\n        to: null,\r\n        text: null\r\n    })\r\n    const [serverSideFilterList, setServerSideFilterList] = React.useState([]);\r\n\r\n    const [isLoading, setIsLoading] = React.useState(true);\r\n    const [appuntamenti, setAppuntamenti] = React.useState(null);\r\n    const [gridData, setGridData] = React.useState([]); //Dati renderizzati dalla griglia\r\n    const [columnsSortDirection, setColumnsSortDirection] = React.useState(['none', 'none', 'none', 'none']);\r\n    const [totalRows, setTotalRows] = React.useState(0);\r\n    const [currentPage, setCurrentPage] = React.useState(1);\r\n    const [rowsPerPage, setRowsPerPage] = React.useState(20);\r\n    const [fetchInProgress, setFetchInProgress] = React.useState(false);\r\n\r\n    React.useEffect(() => {\r\n        async function fetchAppuntamenti() {\r\n            const startDateISO = formatISO(filters.from);\r\n            const endDateISO = filters.to ? formatISO(filters.to) : '9999-12-31';\r\n\r\n            const data = await UsersAPI.GetCurrentUserAppuntamentiAsync(startDateISO, endDateISO, rowsPerPage, currentPage);\r\n            if (data && Array.isArray(data)) {\r\n                const tmp = data.map(v => [format(parseISO(v.schedule.dataOraInizio), 'P p', { locale: itLocal }),\r\n                v.nomeCliente,\r\n                v.schedule.title,\r\n                v.schedule.tipologiaLezione.nome,\r\n                v.urlRouteCliente\r\n                ]);\r\n                setGridData(tmp);\r\n                console.log(tmp);\r\n            }\r\n            setAppuntamenti(data);\r\n            setFetchInProgress(false)\r\n        }\r\n        setFetchInProgress(true);\r\n        fetchAppuntamenti();\r\n    }, [columnsSortDirection, currentPage, rowsPerPage, filters])\r\n\r\n    const gridColumns = [\r\n        {\r\n            name: \"DataEvento\",\r\n            label: \"Data Evento\",\r\n            options: {\r\n                filter: false,\r\n                sortDirection: columnsSortDirection[0],\r\n            },\r\n        },\r\n        {\r\n            name: \"Struttura\",\r\n            label: \"Struttura\",\r\n            options: {\r\n                filter: false,\r\n                sort: true,\r\n                sortDirection: columnsSortDirection[1]\r\n            },\r\n        },\r\n        {\r\n            name: \"Evento\",\r\n            label: \"Evento\",\r\n            options: {\r\n                filter: false,\r\n                sort: true,\r\n                sortDirection: columnsSortDirection[2],\r\n            }\r\n        },\r\n        {\r\n            name: \"TipoLezione\",\r\n            label: \"Tipo Lezione\",\r\n            options: {\r\n                filter: false,\r\n                sort: true,\r\n                sortDirection: columnsSortDirection[3],\r\n            }\r\n        },\r\n        {\r\n            name: \"Azioni\",\r\n            label: \" \",\r\n            options: {\r\n                viewColumns: false,\r\n                filter: false,\r\n                sort: false,\r\n                customBodyRender: (value, tableMeta, updateValue) => {\r\n                    // console.log('tableMeta');\r\n                    // console.log(tableMeta);\r\n                    let urlRoute = tableMeta.rowData[4];\r\n                    return (\r\n                        <Button size=\"small\" variant=\"outlined\"\r\n                            style={{ float: \"right\" }}\r\n                            startIcon={<PageviewIcon />}\r\n                            component={Link}\r\n                            to={`/${urlRoute}/`}>Vai a Struttura</Button>\r\n                    )\r\n                }\r\n            }\r\n        }\r\n    ]\r\n\r\n    const sortGrid = (column, order) => {\r\n        const newColumnsSortDirection = ['none', 'none', 'none', 'none'];\r\n        switch (column) {\r\n            case 'DataEvento':\r\n                newColumnsSortDirection[0] = order;\r\n                break;\r\n            case 'Struttura':\r\n                newColumnsSortDirection[1] = order;\r\n                break;\r\n            case 'Evento':\r\n                newColumnsSortDirection[2] = order;\r\n                break;\r\n            case 'TipoLezione':\r\n                newColumnsSortDirection[3] = order;\r\n                break;\r\n            default:\r\n                _logger.warn(`StrutturaListaUtenti->sortGrid(${column}, ${order}) - UNMANAGED COLUMN!`);\r\n                break;\r\n        }\r\n        setColumnsSortDirection(newColumnsSortDirection);\r\n    }\r\n\r\n    const gridOptions = {\r\n        responsive: 'stacked',\r\n        serverSide: true,\r\n        count: totalRows,\r\n        page: currentPage,\r\n        selectableRows: 'none',\r\n        rowsPerPage: rowsPerPage,\r\n        filter: false,\r\n        search:false,\r\n        print: false,\r\n        viewColumns:false,\r\n        elevation: 0,\r\n        //serverSideFilterList: serverSideFilterList,\r\n        onChangeRowsPerPage: (numberOfRows) => {\r\n            _logger.debug(`StrutturaListaUtenti->onChangeRowsPerPage(${numberOfRows})`)\r\n            setRowsPerPage(numberOfRows);\r\n        },\r\n        rowsPerPageOptions: [20, 50, 100],\r\n        onChangePage: (currentPage) => {\r\n            setCurrentPage(currentPage);\r\n        },\r\n        onColumnSortChange: (changedColumns, order) => {\r\n            _logger.debug(`StrutturaListaUtenti->onColumnSortChange(${changedColumns}, ${order})`)\r\n            sortGrid(changedColumns, order);\r\n        },\r\n        onFilterChange: (column, filterList, type) => {\r\n            _logger.debug(`StrutturaListaUtenti->onFilterChange(column: ${column}, filterList:${JSON.stringify(filterList)}, type: ${type})`)\r\n            _logger.debug(`filter:${filterList}`)\r\n            setFilters(filterList);\r\n        }\r\n    }\r\n\r\n    const handleFilterChanged = (newFilter) => {\r\n        console.log(\"Filter changed, need to refresh data\");\r\n        setFilters(newFilter);\r\n        return;\r\n    }\r\n\r\n    function renderLoading() {\r\n        return (\r\n            <R2DLoader />\r\n        )\r\n    }\r\n\r\n    function renderData() {\r\n        return (\r\n            <Fragment>\r\n                <Typography variant=\"h6\">Le mie Prenotazioni</Typography>\r\n                \r\n                <MUIDataTable className={classes.dataTable} \r\n                title={<UtentePrenotazioniFilter onFilterChange={handleFilterChanged} filters={filters} />}\r\n                    data={gridData} columns={gridColumns} options={gridOptions} />\r\n            </Fragment>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Paper className={classes.root}>\r\n            {fetchInProgress ? renderLoading() : renderData()}\r\n        </Paper>\r\n    )\r\n\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\registrazione\\RegisterStrutturaStep1.js",["437","438","439","440"],"import React from 'react'\r\nimport { Paper, Typography, makeStyles, TextField, Grid, Card, Tooltip, Box, Button } from '@material-ui/core'\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport { StruttureAPI } from '../../api/strutture.api';\r\nimport log from 'loglevel';\r\n\r\nconst _logger = log.getLogger('RegistrazioneStrutturaStep1');\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        margin: 15,\r\n        padding: 20\r\n    },\r\n    registrationField: {\r\n        width: '90%'\r\n    },\r\n    tooltipIcon: {\r\n        float: \"right\",\r\n        color: '#6b6c6e',\r\n        // paddingTop: 5,\r\n        margin: 'auto',\r\n        height: '100%'\r\n    },\r\n    actionsRow: {\r\n        textAlign: \"center\"\r\n    },\r\n    buttonBack: {\r\n        minWidth: '120px',\r\n        minHeight: '50px',\r\n        marginTop: '60px',\r\n        float:'left'\r\n    },\r\n    buttonNext: {\r\n        minWidth: '320px',\r\n        minHeight: '50px',\r\n        marginTop: '60px',\r\n        float:'right'\r\n    }\r\n\r\n}));\r\n\r\nexport default (props) => {\r\n    const MIN_URLROUTE_LENGTH = 4;\r\n    const MIN_NOME_STRUTTURA_LENGTH = 3;\r\n    const MIN_DESCRIZIONE_LENGTH = 30;\r\n\r\n    const classes = useStyles();\r\n\r\n    const onDataSubmittedHandler = props.onDataSubmittedHandler;\r\n    const onBack = props.onBack;\r\n\r\n    const [nomeStruttura, setNomeStruttura] = React.useState(props?.datiStruttura?.nomeStruttura ?? '');\r\n    const [urlRoute, seturlRoute] = React.useState(props?.datiStruttura?.urlRoute ?? '');\r\n    const [descrizione, setDescrizione] = React.useState(props?.datiStruttura?.descrizione ?? '');\r\n\r\n    const [urlRouteValid, seturlRouteValid] = React.useState(true);\r\n    const [urlRouteErrorMessage, seturlRouteErrorMessage] = React.useState('');\r\n    const [nomeStrutturaValid, setNomeStrutturaValid] = React.useState(true);\r\n    const [nomeStrutturaErrorMessage, setNomeStrutturaErrorMessage] = React.useState('');\r\n    const [descrizioneValid, setDescrizioneValid] = React.useState(true);\r\n    const [descrizioneErrorMessage, setDescrizioneErrorMessage] = React.useState('');\r\n\r\n    React.useEffect(() => {\r\n        async function checkurlRoute(urlRoute) {\r\n            _logger.debug(`Verifica Url: ${urlRoute}`);\r\n            const esito = await StruttureAPI.CheckUrlStruttura(urlRoute);\r\n            _logger.debug(`Esito verifica Url: ${urlRoute} = ${esito}`);\r\n            seturlRouteValid(esito);\r\n            if (!esito) {\r\n                _logger.debug(`Esito non valido, imposto il messaggio di errore`);\r\n                seturlRouteErrorMessage(\"L'identitificativo inserito non è valido oppure risulta già utilizzato\");\r\n            } else {\r\n                _logger.debug(`Esito valido.`);\r\n                seturlRouteErrorMessage(\"\"); //reset messaggio d'errore\r\n            }\r\n        }\r\n        if (urlRoute && urlRoute.length >= MIN_URLROUTE_LENGTH) {\r\n            checkurlRoute(urlRoute);\r\n        }\r\n    }, [urlRoute]);\r\n\r\n\r\n    const handleChange = async (syntEvent, fieldName) => {\r\n        const newValue = syntEvent.target.value;\r\n        switch (fieldName) {\r\n            case 'NOME_STRUTTURA':\r\n                setNomeStruttura(newValue);\r\n                break;\r\n            case 'urlRoute_STRUTTURA':\r\n                seturlRoute(newValue);\r\n                break;\r\n            case 'DESCRIZIONE_STRUTTURA':\r\n                setDescrizione(newValue);\r\n                break;\r\n            default:\r\n                throw new Error('INVALID FIELD NAME');\r\n        }\r\n        ValidateFields();\r\n    }\r\n\r\n    const ValidateFields = () => {\r\n        _logger.debug(`Inizio validazione form. urlRouteValid: ${urlRouteValid}, nomeStrutturaValid: ${nomeStrutturaValid}, descrizioneValid: ${descrizioneValid}`)\r\n        if (!(nomeStruttura && nomeStruttura.length >= MIN_NOME_STRUTTURA_LENGTH)) {\r\n            setNomeStrutturaValid(false);\r\n            setNomeStrutturaErrorMessage(`Inserire un nome di almento ${MIN_NOME_STRUTTURA_LENGTH} caratteri`);\r\n            return false;\r\n        }else{\r\n            setNomeStrutturaValid(true);\r\n            setNomeStrutturaErrorMessage(null);\r\n        }\r\n        if (!(urlRoute && urlRoute.length >= MIN_URLROUTE_LENGTH)) {\r\n            seturlRouteValid(false);\r\n            seturlRouteErrorMessage(`Inserire un identificativo di almeno ${MIN_URLROUTE_LENGTH} caratteri`);\r\n            return false;\r\n        }else{\r\n            seturlRouteValid(true);\r\n            seturlRouteErrorMessage(null);\r\n        }\r\n        if (!(descrizione && descrizione.length >= MIN_DESCRIZIONE_LENGTH)) {\r\n            setDescrizioneValid(false);\r\n            setDescrizioneErrorMessage(\"La descrizione della struttura risulta troppo breve\")\r\n            return false;\r\n        }else{\r\n            setDescrizioneValid(true);\r\n            setDescrizioneErrorMessage(null)\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    const handleOnNext = async (syntEvent) => {\r\n        if (!ValidateFields()) { return; }\r\n        if (onDataSubmittedHandler) {\r\n            onDataSubmittedHandler(0, \r\n                {\r\n                nome: nomeStruttura,\r\n                urlRoute,\r\n                descrizione\r\n            });\r\n        }\r\n    }\r\n\r\n    const handleOnBack = (e) => {\r\n        if (onBack) { onBack(0); }\r\n    }\r\n\r\n    return (\r\n        <Box className={classes.root}>\r\n            <Grid container spacing={3}>\r\n                <Grid item xs={12}>\r\n                    <TextField\r\n                        className={classes.registrationField}\r\n                        label=\"Nome della Struttura\"\r\n                        error={!nomeStrutturaValid}\r\n                        helperText={nomeStrutturaErrorMessage}\r\n                        value={nomeStruttura}\r\n                        onChange={(e) => { handleChange(e, 'NOME_STRUTTURA') }}\r\n                    />\r\n                    <Tooltip title=\"Inserire il nome della struttura così come sarà visualizzato nel profilo\">\r\n                        <InfoIcon className={classes.tooltipIcon} fontSize=\"large\" />\r\n                    </Tooltip>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                    <TextField\r\n                        className={classes.registrationField}\r\n                        label=\"Identificativo WEB della Struttura\"\r\n                        error={!urlRouteValid}\r\n                        helperText={urlRouteErrorMessage}\r\n                        value={urlRoute}\r\n                        onChange={(e) => { handleChange(e, 'urlRoute_STRUTTURA') }}\r\n                    />\r\n                    <Tooltip title=\"Inserire l'identificativo utilizzato per costrutire l'indirizzo web a cui sarà raggiungibile la struttura. Ad esempio, inserendo l'identificato palestra-prova, l'indirizzo della struttura sarà https://www.ready2do/palestra-prova\">\r\n                        <InfoIcon className={classes.tooltipIcon} fontSize=\"large\" />\r\n                    </Tooltip>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                    <TextField\r\n                        className={classes.registrationField}\r\n                        label=\"Descrizione della Struttura\"\r\n                        error={!descrizioneValid}\r\n                        helperText={descrizioneErrorMessage}\r\n                        value={descrizione}\r\n                        multiline\r\n                        rows= {4}\r\n                        onChange={(e) => { handleChange(e, 'DESCRIZIONE_STRUTTURA') }}\r\n                    />\r\n                    <Tooltip title=\"Inserire un testo descrittivo della struttura che sarà visulizzato nel profilo.\">\r\n                        <InfoIcon className={classes.tooltipIcon} fontSize=\"large\" />\r\n                    </Tooltip>\r\n                </Grid>\r\n                <Grid item xs={12} className={classes.actionsRow}>\r\n                <Button variant=\"contained\" color=\"secondary\" className={classes.buttonBack}\r\n                        onClick={handleOnBack}\r\n                    >Annulla</Button>\r\n                    <Button variant=\"contained\" color=\"primary\" className={classes.buttonNext}\r\n                        onClick={handleOnNext}\r\n                    >Avanti</Button>\r\n                </Grid>\r\n            </Grid>\r\n        </Box>\r\n    )\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\registrazione\\RegisterStrutturaStep2.js",["441","442","443","444","445","446","447"],"import {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Grid,\r\n  makeStyles,\r\n  TextField,\r\n  Tooltip,\r\n  Input,\r\n  FormControl,\r\n  InputLabel,\r\n  FormHelperText,\r\n} from \"@material-ui/core\";\r\nimport InfoIcon from \"@material-ui/icons/Info\";\r\nimport {\r\n  Autocomplete,\r\n  GoogleMap,\r\n  useLoadScript,\r\n  Marker,\r\n} from \"@react-google-maps/api\";\r\nimport * as EmailValidator from \"email-validator\";\r\nimport log from \"loglevel\";\r\nimport React, { useState } from \"react\";\r\nimport config from \"../../config\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { pl } from \"date-fns/locale\";\r\n\r\nconst _logger = log.getLogger(\"RegistrazioneStrutturaStep1\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    margin: 15,\r\n    padding: 20,\r\n  },\r\n  registrationField: {\r\n    width: \"90%\",\r\n  },\r\n  tooltipIcon: {\r\n    float: \"right\",\r\n    color: \"#6b6c6e\",\r\n    // paddingTop: 5,\r\n    margin: \"auto\",\r\n    height: \"100%\",\r\n  },\r\n  actionsRow: {\r\n    textAlign: \"center\",\r\n  },\r\n  buttonBack: {\r\n    minWidth: \"120px\",\r\n    minHeight: \"50px\",\r\n    marginTop: \"60px\",\r\n    float: \"left\",\r\n  },\r\n  buttonNext: {\r\n    float: \"right\",\r\n    minWidth: \"320px\",\r\n    minHeight: \"50px\",\r\n    marginTop: \"60px\",\r\n  },\r\n  googleAutocomplete: {\r\n    display: \"inline\",\r\n  },\r\n  googleAutocompleteInput: {\r\n    \"&::placeholder\": {\r\n      color: \"red\",\r\n      opacity: 1,\r\n    },\r\n    \"&::-ms-input-placeholder\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default (props) => {\r\n  const MIN_NOME_STRUTTURA_LENGTH = 3;\r\n  const MIN_DESCRIZIONE_LENGTH = 30;\r\n\r\n  const onDataSubmittedHandler = props.onDataSubmittedHandler;\r\n  const onBack = props.onBack;\r\n\r\n  const classes = useStyles();\r\n  const { isLoaded, loadError } = useLoadScript({\r\n    googleMapsApiKey: config.GoogleAPI.MapsKey,\r\n    language: \"it-IT\",\r\n    libraries: config.GoogleAPI.Libraries,\r\n  });\r\n\r\n  const [email, setEmail] = React.useState(props?.datiStruttura?.email ?? \"\");\r\n  const [phone, setPhone] = React.useState(props?.datiStruttura?.phon ?? \"\");\r\n  const [ragSociale, setRagSociale] = React.useState(\r\n    props?.datiStruttura?.ragSociale ?? \"\"\r\n  );\r\n  const [indirizzo, setIndirizzo] = React.useState(\r\n    props?.datiStruttura?.indirizzo ?? \"\"\r\n  );\r\n\r\n  const [emailValid, setEmailValid] = React.useState(true);\r\n  const [emailErrorMsg, setEmailErrorMsg] = React.useState(\"\");\r\n  const [telefonoValid, setTelefonoValid] = React.useState(true);\r\n  const [telefonoErrorMsg, setTelefonoErrorMsg] = React.useState(\"\");\r\n  const [ragioneSocialeValid, setRagioneSocialeValid] = React.useState(true);\r\n  const [ragioneSocialeErrorMsg, setRagioneSocialeErrorMsg] = React.useState(\r\n    \"\"\r\n  );\r\n  const [indirizzoValid, setIndirizzoValid] = React.useState(true);\r\n  const [indirizzoErrorMsg, setIndirizzoErrorMsg] = React.useState(\"\");\r\n  const [autocomplete, setAutocomplete] = useState(null);\r\n\r\n  const [lat, setLat] = React.useState(null);\r\n  const [lng, setLng] = React.useState(null);\r\n\r\n  const randomName = uuidv4();\r\n\r\n  const handleChange = async (syntEvent, fieldName) => {\r\n    const newValue = syntEvent.target.value;\r\n    switch (fieldName) {\r\n      case \"EMAIL_STRUTTURA\":\r\n        setEmail(newValue);\r\n        break;\r\n      case \"TELEFONO_STRUTTURA\":\r\n        setPhone(newValue);\r\n        break;\r\n      case \"RAGIONE_SOCIALE_STRUTTURA\":\r\n        setRagSociale(newValue);\r\n        break;\r\n      case \"INDIRIZZO_STRUTTURA\":\r\n        setIndirizzo(newValue);\r\n        break;\r\n      default:\r\n        throw new Error(\"INVALID FIELD NAME\");\r\n    }\r\n    ValidateFields();\r\n  };\r\n\r\n  const ValidateFields = () => {\r\n    if (!email) {\r\n      setEmailValid(false);\r\n      setEmailErrorMsg(\"E' necessario inserire l'email\");\r\n    } else if (!EmailValidator.validate(email)) {\r\n      setEmailValid(false);\r\n      setEmailErrorMsg(\"Indirizzo email non valido\");\r\n    } else {\r\n      setEmailValid(true);\r\n      setEmailErrorMsg(null);\r\n    }\r\n\r\n    if (!phone) {\r\n      setTelefonoValid(false);\r\n      setTelefonoErrorMsg(\r\n        \"E' necessario specificare il numero telefonico della struttura\"\r\n      );\r\n    } else if (phone.length < 6 || !phone.match(/[+0-9]+/g)) {\r\n      setTelefonoValid(false);\r\n      setTelefonoErrorMsg(\r\n        \"Il numero telefonico della struttura non è in un formato valido\"\r\n      );\r\n      return false;\r\n    } else {\r\n      setTelefonoValid(true);\r\n      setTelefonoErrorMsg(null);\r\n    }\r\n\r\n    if (!ragSociale) {\r\n      setRagioneSocialeValid(false);\r\n      setRagioneSocialeErrorMsg(\r\n        \"E' necessario specificare la ragione sociale della struttura\"\r\n      );\r\n    } else if (ragSociale.length < 3) {\r\n      setRagioneSocialeValid(false);\r\n      setRagioneSocialeErrorMsg(\"La ragione sociale specificata non è valida\");\r\n      return false;\r\n    } else {\r\n      setRagioneSocialeValid(true);\r\n      setRagioneSocialeErrorMsg(null);\r\n    }\r\n\r\n    if (!indirizzo) {\r\n      setIndirizzoValid(false);\r\n      setRagioneSocialeErrorMsg(\r\n        \"E' necessario specificare la ragione sociale della struttura\"\r\n      );\r\n    } else if (indirizzo.length < 3) {\r\n      setIndirizzoValid(false);\r\n      setRagioneSocialeErrorMsg(\"La ragione sociale specificata non è valida\");\r\n      return false;\r\n    } else {\r\n      setIndirizzoValid(true);\r\n      setRagioneSocialeErrorMsg(null);\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const handleOnNext = async (syntEvent) => {\r\n    if (!ValidateFields()) {\r\n      return;\r\n    }\r\n    if (onDataSubmittedHandler) {\r\n     _logger.log(`RegisterStrutturaStep2 - handleOnNext -> RAW indirizzo: ${JSON.stringify(indirizzo)}`)\r\n      const dati = {\r\n        email,\r\n        phone,\r\n        ragSociale,\r\n        indirizzo: indirizzo?.indirizzo,\r\n        citta: indirizzo?.citta?.short_name,\r\n        cap: indirizzo?.zipOrPostalCode?.short_name,\r\n        country: indirizzo?.contry?.long_name,\r\n        coordinate: {\r\n            lat:lat,\r\n            long: lng\r\n        },\r\n      };\r\n      _logger.log(`RegisterStrutturaStep2 - handleOnNext -> dati: ${JSON.stringify(dati)}`)\r\n      onDataSubmittedHandler(1, dati);\r\n    }\r\n  };\r\n\r\n  const handleOnBack = (e) => {\r\n    if (onBack) {\r\n      onBack(1);\r\n    }\r\n  };\r\n\r\n  const onGoogleAutocompleteLoad = (a) => {\r\n    _logger.log(`Google Autocomplete loaded - ${a}`);\r\n    setAutocomplete(a);\r\n  };\r\n\r\n  const onGoogleAutocompletePlaceChanged = () => {\r\n    if (autocomplete !== null) {\r\n      let place = autocomplete.getPlace();\r\n      console.log(`Place: ${JSON.stringify(place)}`);\r\n      //Se l'utente non ha selezionato una voce dalla lista proposta viene valorizzato solo il campo name (che altrimenti non esiste)\r\n      if (!place || place.name) {\r\n        setIndirizzoValid(false);\r\n        setIndirizzoErrorMsg(\"Selezionare un indirizzo tra quelli proposti\");\r\n        setIndirizzo(null);\r\n        return;\r\n      } else {\r\n        setIndirizzoValid(true);\r\n        setIndirizzoErrorMsg(null);\r\n        setIndirizzo({\r\n          indirizzo: place.formatted_address,\r\n          citta: place?.address_components?.find((c) =>\r\n            c.types.find((t) => t === \"administrative_area_level_3\")\r\n          ),\r\n          zipOrPostalCode: place?.address_components?.find((c) =>\r\n            c.types.find((t) => t === \"postal_code\")\r\n          ),\r\n          country: place?.address_components?.find((c) =>\r\n            c.types.find((t) => t === \"country\")\r\n          ),\r\n          location: {\r\n            lat: place?.geometry?.location?.lat,\r\n            long: place?.geometry?.location?.lng,\r\n          },\r\n        });\r\n        setLat(place?.geometry?.location?.lat);\r\n        setLng(place?.geometry?.location?.lng);\r\n      }\r\n    }\r\n    console.log(`Indirizzo: ${JSON.stringify(indirizzo)}`);\r\n  };\r\n\r\n  return (\r\n    <Box className={classes.root}>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12}>\r\n          <TextField\r\n            className={classes.registrationField}\r\n            label=\"Indirizzo email della Struttura\"\r\n            error={!emailValid}\r\n            helperText={emailErrorMsg}\r\n            value={email}\r\n            onChange={(e) => {\r\n              handleChange(e, \"EMAIL_STRUTTURA\");\r\n            }}\r\n          />\r\n          <Tooltip title=\"Inserire l'indirizzo email della struttura; sarà visualizzato nella sezione contatti del profilo\">\r\n            <InfoIcon className={classes.tooltipIcon} fontSize=\"large\" />\r\n          </Tooltip>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <TextField\r\n            className={classes.registrationField}\r\n            label=\"Numero di telefono della Struttura\"\r\n            error={!telefonoValid}\r\n            helperText={telefonoErrorMsg}\r\n            value={phone}\r\n            onChange={(e) => {\r\n              handleChange(e, \"TELEFONO_STRUTTURA\");\r\n            }}\r\n          />\r\n          <Tooltip title=\"Inserire il numero di telefono della struttura; sarà visualizzato nella sezione contatti del profilo\">\r\n            <InfoIcon className={classes.tooltipIcon} fontSize=\"large\" />\r\n          </Tooltip>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <TextField\r\n            className={classes.registrationField}\r\n            label=\"Ragione Sociale della Struttura\"\r\n            error={!ragioneSocialeValid}\r\n            helperText={ragioneSocialeErrorMsg}\r\n            value={ragSociale}\r\n            onChange={(e) => {\r\n              handleChange(e, \"RAGIONE_SOCIALE_STRUTTURA\");\r\n            }}\r\n          />\r\n          <Tooltip title=\"Inserire la Ragione Sociale completa della Struttura\">\r\n            <InfoIcon className={classes.tooltipIcon} fontSize=\"large\" />\r\n          </Tooltip>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <Box style={{ display: \"inline\" }}>\r\n            {isLoaded ? (\r\n              <Autocomplete\r\n                onLoad={onGoogleAutocompleteLoad}\r\n                onPlaceChanged={onGoogleAutocompletePlaceChanged}\r\n                fields={[\"address_components\", \"formatted_address\", \"geometry\"]}\r\n                className={classes.googleAutocomplete}\r\n              >\r\n                <FormControl className={classes.registrationField}>\r\n                  <InputLabel htmlFor={randomName}>\r\n                    Localizzazione della struttura\r\n                  </InputLabel>\r\n                  <Input\r\n                    id={randomName}\r\n                    type=\"text\"\r\n                    placeholder=\"Es: Via Giuseppe Verdi, 32, Firenze, FI\"\r\n                    className={classes.googleAutocompleteInput}\r\n                  />\r\n                  {/* {indirizzoValid ?  <FormHelperText id=\"my-helper-text\">We'll never share your email.</FormHelperText> : ''} */}\r\n                </FormControl>\r\n              </Autocomplete>\r\n            ) : (\r\n              <CircularProgress></CircularProgress>\r\n            )}\r\n            <Tooltip title=\"Iniziare a digitare l'indirizzo della Struttura e selezionare una delle voci proposte\">\r\n              <InfoIcon className={classes.tooltipIcon} fontSize=\"large\" />\r\n            </Tooltip>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={12} className={classes.mapRow}>\r\n          {isLoaded && lat && lng && indirizzoValid ? (\r\n            <GoogleMap\r\n              id=\"circle-example\"\r\n              mapContainerStyle={{\r\n                height: \"300px\",\r\n                width: \"90%\",\r\n              }}\r\n              zoom={15}\r\n              center={{\r\n                lat: lat,\r\n                lng: lng,\r\n              }}\r\n            >\r\n              <Marker\r\n                label={ragSociale}\r\n                position={{\r\n                  lat: lat,\r\n                  lng: lng,\r\n                }}\r\n              />\r\n            </GoogleMap>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Grid>\r\n        <Grid item xs={12} className={classes.actionsRow}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            className={classes.buttonBack}\r\n            onClick={handleOnBack}\r\n          >\r\n            Indietro\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.buttonNext}\r\n            onClick={handleOnNext}\r\n          >\r\n            Avanti\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n};\r\n","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\registrazione\\RegisterStrutturaStep3.js",["448","449"],"import log from \"loglevel\";\r\nimport React from \"react\";\r\nimport { Redirect, useHistory } from \"react-router\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, Grid, Button } from \"@material-ui/core\";\r\nimport { GoogleMap, Marker } from \"@react-google-maps/api\";\r\nimport { StruttureAPI } from \"../../api/strutture.api\";\r\nimport { authProvider } from '../../authProvider'\r\n\r\nconst _logger = log.getLogger(\"RegistrazioneStruttura\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  rootPaper: {\r\n    padding: 30,\r\n  },\r\n  title: {\r\n    textAlign: \"center\",\r\n    fontSize: \"1.5rem\",\r\n    fontWeight: 500,\r\n  },\r\n  backButton: {\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  instructions: {\r\n    marginTop: theme.spacing(1),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n  label: {},\r\n  text: {},\r\n}));\r\n\r\nexport default (props) => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const onBack = props.onBack;\r\n  const datiStruttura = props.datiStruttura ?? {};\r\n\r\n  const handleOnBack = (e) => {\r\n    if (onBack) {\r\n      onBack(2);\r\n    }\r\n  };\r\n\r\n  const handleRegistration = async (e) => {\r\n    _logger.debug(`handleRegistration - datiStruttura: ${datiStruttura}`);\r\n    await StruttureAPI.RegistraNuovoClienteAsync(datiStruttura);\r\n    authProvider.logout();\r\n    history.push(`/${datiStruttura?.urlRoute}`);\r\n  };\r\n\r\n  return (\r\n    <Box className={classes.root}>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12}>\r\n          <div className={classes.label}>Nome della struttura</div>\r\n          <div className={classes.text}>{datiStruttura.nomeStruttura}</div>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <div className={classes.label}>Descrizione della struttura</div>\r\n          <div className={classes.text}>\r\n            {datiStruttura.descrizione}\r\n          </div>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <div className={classes.label}>\r\n            Identificativo WEB della struttura\r\n          </div>\r\n          <div className={classes.text}>{datiStruttura?.urlRoute\r\n          }</div>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <div className={classes.label}>Indirizzo e-mail della struttura</div>\r\n          <div className={classes.text}>{datiStruttura?.email}</div>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <div className={classes.label}>\r\n            Numero di telefono della struttura\r\n          </div>\r\n          <div className={classes.text}>{datiStruttura?.phone}</div>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <div className={classes.label}>Ragione sociale</div>\r\n          <div className={classes.text}>{datiStruttura?.ragSociale}</div>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <div className={classes.label}>Indirizzo</div>\r\n          <div className={classes.text}>\r\n            {datiStruttura?.indirizzo}\r\n          </div>\r\n        </Grid>\r\n        <Grid item xs={12} className={classes.mapRow}>\r\n          <GoogleMap\r\n            id=\"circle-example\"\r\n            mapContainerStyle={{\r\n              height: \"300px\",\r\n              width: \"90%\",\r\n            }}\r\n            zoom={15}\r\n            center={{\r\n              lat: datiStruttura?.coordinate?.lat,\r\n              lng: datiStruttura?.coordinate?.long\r\n              ,\r\n            }}\r\n          >\r\n            <Marker\r\n              label={datiStruttura.ragSociale}\r\n              position={{\r\n                lat: datiStruttura?.coordinate?.lat,\r\n                lng: datiStruttura?.coordinate?.long,\r\n              }}\r\n            />\r\n          </GoogleMap>\r\n        </Grid>\r\n        <Grid item xs={12} className={classes.actionsRow}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            className={classes.buttonBack}\r\n            onClick={handleOnBack}\r\n          >\r\n            Indietro\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.buttonNext}\r\n            onClick={handleRegistration}\r\n          >\r\n            Avanti\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n};\r\n","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\store\\selectors\\user.selectors.js",["450"],"//import { createSelector } from 'reselect'\r\n\r\n// const getStruttureOwned = (state)=>{\r\n//     if (!state.user || !state.user.userIsAuthenticated) return null;\r\n//     return state.user.accountInfo.account.idToken.extension_struttureOwned?.split(\",\");\r\n// }\r\n\r\nconst getUserInfo = (state) => {\r\n    if (!state.user || !state.user.userIsAuthenticated) return null;\r\n    return {\r\n        id: state.user.accountInfo.account.accountIdentifier,\r\n        name: state.user.accountInfo.account.name,\r\n        givenName: state.user.accountInfo.account.idToken.given_name,\r\n        familyName: state.user.accountInfo.account.idToken.family_name,\r\n        isGlobalAdmin: state.user.accountInfo.account.idToken.extension_isGlobalAdmin,\r\n        struttureOwned: state.user.accountInfo.account.idToken.extension_struttureOwned?.split(\",\"),\r\n        dataConfermaEmail: state.user.accountInfo.account.idToken.extension_emailConfirmationDate\r\n    };\r\n}\r\n\r\nexport const UserSelectors = {\r\n    getAccessToken: (state) => state.user.currentUser?.accessToken,\r\n    getIdToken: (state) => state.user.currentUser?.idToken,\r\n    getStruttureOwned: (state) => state.user.currentUser?.struttureOwned ?? [],\r\n    getIdStruttureOwned: (state) => state.user.currentUser?.idStruttureOwned ?? [],\r\n    getStruttureSeguite: (state) => state.user.currentUser?.struttureSeguite ?? [],\r\n    getIdStrutturaCorrente: (state) => state.user?.idStrutturaAttiva,\r\n    getAppuntamenti: (state) => state.user?.currentUser?.appuntamenti,\r\n    getUserInfo: (state) => state.user?.currentUser\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\store\\selectors\\strutture.selectors.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\dettaglio-utente\\StrutturaDettaglioUtente.js",["451","452"],"import { Box, Grid, Paper, Typography } from '@material-ui/core';\r\nimport log from 'loglevel';\r\nimport React, { Fragment, useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { StruttureUtentiAPI } from '../../../api/strutture.utenti.api';\r\nimport AbbonamentiUtenteSection from './AbbonamentiUtenteSection';\r\nimport CertificatiUtenteSection from './CertificatiUtenteSection';\r\nimport PrenotazioniUtenteSection from './PrenotazioniUtenteSection';\r\n\r\nconst _logger = log.getLogger('StrutturaEditEvento')\r\n\r\nconst StrutturaDettaglioUtente = (props) => {\r\n    const idStruttura = props.idStruttura;\r\n    //Recuperiamo i parametri dall'url\r\n    let { idUtente } = useParams();\r\n    const [utenteStrutturaIsLoading, setUtenteStrutturaIsLoading] = useState(true);\r\n    const [utenteStruttura, setUtenteStruttura] = useState(null);\r\n    const [utenteAssociazioneIsLoading, setUtenteAssociazioneIsLoading] = useState(true);\r\n    const [utenteAssociazione, setUtenteAssociazione] = useState(null);\r\n    const [reloadNeeded, setReloadNeeded] = useState(false);\r\n\r\n    _logger.debug(`StrutturaDettaglioUtente -> idStruttura: ${idStruttura}, idUtente: ${idUtente}`);\r\n\r\n    //Lettura profilo utente\r\n    useEffect(() => {\r\n        async function fetchProfiloUtente(idStruttura, idUtente) {\r\n            const data = await StruttureUtentiAPI.FetchProfiloUtenteAsync(idStruttura, idUtente);\r\n            _logger.debug(`StrutturaEditLocation->useEffect()->fetchProfiloUtente(${idStruttura}, ${idUtente}) => ${JSON.stringify(data)}`);\r\n            setUtenteStruttura(data)\r\n            setUtenteStrutturaIsLoading(false);\r\n        }\r\n        fetchProfiloUtente(idStruttura, idUtente);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [idStruttura, idUtente]);\r\n\r\n    //Lettura Associazione Utente\r\n    useEffect(() => {\r\n        async function fetchAssociazioneUtente(idStruttura, idUtente) {\r\n            const data = await StruttureUtentiAPI.FetchDettagliAssociazioneUtenteAsync(idStruttura, idUtente);\r\n            _logger.debug(`StrutturaEditLocation->useEffect()->fetchAssociazioneUtente(${idStruttura}, ${idUtente}) => ${JSON.stringify(data)}`);\r\n            setUtenteAssociazione(data)\r\n            setUtenteAssociazioneIsLoading(false);\r\n            setReloadNeeded(false);\r\n        }\r\n        fetchAssociazioneUtente(idStruttura, idUtente);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [idStruttura, idUtente, reloadNeeded]);\r\n    \r\n\r\n    //Quando vengono modificati i dati dell'associzione rileggiamo tutto dalle API\r\n    const handleAssociazioneChange = () =>{\r\n        _logger.debug(`StrutturaDettaglioUtente->handleAssociazioneChange(): setReloadNeeded = true`);\r\n        setReloadNeeded(true);\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n        {/* SEZIONE DATI UTENTE */}\r\n        <Paper>\r\n            <Box>\r\n                <Grid container spacing={3}>\r\n                    <Grid item xs={12}>\r\n                        <Grid container alignItems=\"center\" justify=\"center\" direction=\"column\">\r\n                            <Grid item xs={12}>\r\n                                <Typography variant=\"h5\" fontWeight=\"Bold\">Dati Utente</Typography>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Grid item xs={12} md={4}>\r\n                        <Typography component=\"div\">\r\n                            <Box component=\"span\" fontWeight=\"fontWeightBold\" mr={1}>Nome:</Box>\r\n                            <Box component=\"span\">{utenteStruttura?.nome}</Box>\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={12} md={4}>\r\n                        <Typography component=\"div\">\r\n                            <Box component=\"span\" fontWeight=\"fontWeightBold\" mr={1}>Cognome:</Box>\r\n                            <Box component=\"span\">{utenteStruttura?.cognome}</Box>\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={12} md={4}>\r\n                        <Typography component=\"div\">\r\n                            <Box component=\"span\" fontWeight=\"fontWeightBold\" mr={1}>Nickname:</Box>\r\n                            <Box component=\"span\">{utenteStruttura?.displayName}</Box>\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={12} md={6}>\r\n                        <Typography component=\"div\">\r\n                            <Box component=\"span\" fontWeight=\"fontWeightBold\" mr={1}>Email:</Box>\r\n                            <Box component=\"span\">{utenteStruttura?.email}</Box>\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={12} md={6}>\r\n                        <Typography component=\"div\">\r\n                            <Box component=\"span\" fontWeight=\"fontWeightBold\" mr={1}>Telefono mobile:</Box>\r\n                            <Box component=\"span\">{utenteStruttura?.telephoneNumber}</Box>\r\n                        </Typography>\r\n                    </Grid>\r\n                </Grid>\r\n            </Box>\r\n        </Paper>\r\n\r\n        {/* SEZIONE Abbonamenti */}\r\n        <AbbonamentiUtenteSection idStruttura={idStruttura} idUtente={idUtente} abbonamenti={utenteAssociazione?.abbonamenti} reloadHandler={handleAssociazioneChange}/>\r\n\r\n        {/* SEZIONE Certificati */}\r\n        <CertificatiUtenteSection idStruttura={idStruttura} idUtente={idUtente} certificati={utenteAssociazione?.certificati} reloadHandler={handleAssociazioneChange} />\r\n\r\n        {/* SEZIONE Prenotazioni */}\r\n        <PrenotazioniUtenteSection idStruttura={idStruttura} idUtente={idUtente} prenotazioniConfermate={utenteAssociazione?.appuntamenti} \r\n                                    prenotazioniNonConfermate={utenteAssociazione?.appuntamentiDaConfermare} waitList = {utenteAssociazione?.appuntamentiInCoda}\r\n                                    abbonamenti={utenteAssociazione?.abbonamenti} reloadHandler={handleAssociazioneChange} />\r\n\r\n    </Fragment>\r\n    )\r\n}\r\n\r\n\r\nexport default StrutturaDettaglioUtente;","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\commons\\R2DHeader.js",["453","454","455","456","457","458","459","460"],"﻿import * as log from 'loglevel';\r\nimport React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { fade, makeStyles } from '@material-ui/core/styles';\r\nimport { AppBar, Typography, Badge, Menu, MenuItem, Box, ListItemIcon, Button } from '@material-ui/core';\r\n\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport MoreIcon from '@material-ui/icons/MoreVert';\r\nimport { UserSelectors } from '../../store/selectors/user.selectors'\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport AccountBoxIcon from '@material-ui/icons/AccountBox';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport WatchLaterIcon from '@material-ui/icons/WatchLater';\r\nimport NotificationsIcon from '@material-ui/icons/Notifications';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport AzureAD, { AuthenticationState } from 'react-aad-msal';\r\nimport {authProvider} from '../../authProvider'\r\nimport {getStore} from '../../store/reduxStore'\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst _logger = log.getLogger(\"R2DHeader\");\r\n\r\nconst drawerWidth = 240;\r\nconst headerTextColor = '#89C443';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    appBar: {\r\n        //  paddingTop: '8px',\r\n        marginBottom: '8px',\r\n        height: '140px'\r\n    },\r\n    logo: {\r\n        width: '306px',\r\n        height: '126px',\r\n        marginTop: '6px',\r\n        marginLeft: '20px'\r\n    },\r\n    iconBox: {\r\n        marginRight: \"20px\"\r\n    },\r\n    headerIcon: {\r\n        color: headerTextColor,\r\n    },\r\n    headerMenu:{\r\n        color: headerTextColor\r\n    },\r\n    headerMenuItem:{\r\n        color: headerTextColor\r\n    },\r\n    loginBox: {\r\n        marginRight: \"5px\"\r\n    },\r\n    buttonLogin:{\r\n        backgroundColor: \"#89C443\",\r\n        color:\"white\",\r\n        width:\"100px\"\r\n    }\r\n}));\r\n\r\nexport default function R2DHeader() {\r\n    const classes = useStyles();\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const currentUser = useSelector(UserSelectors.getUserInfo);\r\n    const isMenuOpen = Boolean(anchorEl);\r\n\r\n    function handleProfileMenuOpen(event) {\r\n        setAnchorEl(event.currentTarget);\r\n    }\r\n\r\n    function hanldeHeaderMenuClick(e) {\r\n        _logger.debug(\"R2DHeader->hanldeHeaderMenuClick\");\r\n        setAnchorEl(e.currentTarget);\r\n    }\r\n\r\n    function handleClose() {\r\n        _logger.debug(\"R2DHeader->handleClose\");\r\n        setAnchorEl(null);\r\n    }\r\n\r\n    function renderMenu(fnLogout) {\r\n        return (\r\n            <Menu\r\n                className={classes.headerMenu}\r\n                id='headerUserMenu'\r\n                getContentAnchorEl={null}\r\n                anchorEl={anchorEl}\r\n                keepMounted\r\n                open={Boolean(anchorEl)}\r\n                onClose={handleClose}\r\n                anchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\r\n            >\r\n                <MenuItem>\r\n                    <ListItemIcon className={classes.headerMenuItem}>\r\n                        <span><AccountBoxIcon /> <NavLink to=\"/me/profilo\">IL MIO PROFILO</NavLink>\r\n                        </span>\r\n                    </ListItemIcon>\r\n                </MenuItem>\r\n                <MenuItem>\r\n                    <ListItemIcon className={classes.headerMenuItem}>\r\n                        <span>\r\n                        <FavoriteIcon /> I MIEI PREFERITI\r\n                        </span>\r\n                    </ListItemIcon>\r\n                </MenuItem>\r\n                <MenuItem>\r\n                    <ListItemIcon className={classes.headerMenuItem}>\r\n                        <span>\r\n                        <WatchLaterIcon /> <NavLink to=\"/me/prenotazioni\">LE MIE PRENOTAZIONI</NavLink>\r\n                        </span>\r\n                        </ListItemIcon>\r\n                        </MenuItem>\r\n                <MenuItem>\r\n                    <ListItemIcon className={classes.headerMenuItem}>\r\n                        <span>\r\n                        <NotificationsIcon /> NOTIFICHE\r\n                        </span>\r\n                    </ListItemIcon>\r\n                </MenuItem>\r\n                <MenuItem>\r\n                    <ListItemIcon className={classes.headerMenuItem} onClick={fnLogout}>\r\n                        <span>\r\n                        <ExitToAppIcon />LOGOUT\r\n                        </span>\r\n                    </ListItemIcon>\r\n                </MenuItem>\r\n            </Menu>\r\n        )\r\n    }\r\n\r\n\r\n    function RenderLoggedUserHeaderMenu(fnLogout) {\r\n        return (           \r\n            <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" className={classes.iconBox}\r\n            >\r\n                <AccountCircle className={classes.headerIcon} style={{ fontSize: 56 }} />\r\n                <Typography component=\"span\" style={{ color: headerTextColor, cursor: 'pointer' }} onClick={hanldeHeaderMenuClick}>\r\n                    {currentUser?.name}<ArrowDropDownIcon style={{ color: headerTextColor, verticalAlign: 'bottom' }} />\r\n                </Typography>\r\n                {renderMenu(fnLogout)}\r\n            </Box>\r\n        )\r\n    }\r\n\r\n    function RenderAnonymousUserHeaderMenu(fnLogin) {\r\n        return (\r\n            <Box display=\"flex\"  flexDirection=\"column-reverse\" className={classes.loginBox}>\r\n                <Button variant=\"contained\" className={classes.buttonLogin} onClick={fnLogin}>Accedi</Button>\r\n            </Box>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <AppBar position=\"static\" className={classes.appBar}>\r\n            <Box display=\"flex\" justifyContent=\"space-between\">\r\n                <img className={classes.logo} src=\"/images/logo.png\" alt=\"logo\" />\r\n                <Box alignSelf=\"flex-end\">\r\n                <AzureAD provider={authProvider} reduxStore={getStore()}>\r\n                    {\r\n                        ({login,logout, authenticationState, error, accountInfo})=>{\r\n                            switch(authenticationState){\r\n                                case AuthenticationState.Authenticated:{\r\n                                    return RenderLoggedUserHeaderMenu(logout)\r\n                                }\r\n                                default: {\r\n                                    return RenderAnonymousUserHeaderMenu(login)\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                </AzureAD>\r\n                    {/* {currentUser ? RenderLoggedUserHeaderMenu() : RenderAnonymousUserHeaderMenu()} */}\r\n                </Box>\r\n            </Box>\r\n        </AppBar>\r\n    );\r\n}\r\n","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\store\\sagas\\strutture.sagas.js",["461"],"import { call, put, takeEvery, select } from 'redux-saga/effects'\r\nimport * as log from 'loglevel';\r\nimport {StruttureAPI} from '../../api/strutture.api'\r\nimport {StruttureImagesAPI} from '../../api/strutture.images.api'\r\nimport {StruttureSelectors} from '../selectors/strutture.selectors'\r\nimport {UserSelectors} from '../selectors/user.selectors'\r\nimport {StuttureActionTypes, StruttureActionsCreator} from \"../actions/strutture.actions\";\r\nimport {getAccessToken} from './sagas.utils'\r\n\r\nconst _logger = log.getLogger(\"strutture.sagas\");\r\n\r\n\r\nexport function* watchFetchStruttura(){\r\n    //NOTA: take every passa l'action al worker\r\n    yield takeEvery(StuttureActionTypes.FETCH_STRUTTURA_BYNAME, fetchStrutturaByName);\r\n}\r\n\r\nexport function* watchUpdateStrutturaAnagraficaProp(){\r\n    //NOTA: take every passa l'action al worker\r\n    yield takeEvery(StuttureActionTypes.STRUTTURA_CHANGE_ANAGRAFICA_PROP, updateStrutturaAnagraficaProp);\r\n}\r\n\r\nexport function* watchUpdateStrutturaOrarioApertura(){\r\n    //NOTA: take every passa l'action al worker\r\n    yield takeEvery(StuttureActionTypes.STRUTTURA_CHANGE_ORARIO_APERTURA, updateStrutturaOrarioApertura);\r\n}\r\n\r\nexport function* watchUpdateStrutturaImage(){\r\n    yield takeEvery(StuttureActionTypes.STRUTTURA_CHANGE_IMAGE, updateStrutturaImage);\r\n}\r\n\r\nexport function* watchRemoveStrutturaImage(){\r\n    yield takeEvery(StuttureActionTypes.STRUTTURA_REMOVE_IMAGE, removeStrutturaImage);\r\n}\r\n\r\nexport function* watchFetchStrutturaImages(){\r\n    yield takeEvery(StuttureActionTypes.STRUTTURA_FETCH_IMAGES, fetchStrutturaImages);\r\n}\r\n\r\n\r\nexport function* fetchStrutturaByName(action){\r\n    //Nota: il parametro action viene valorizzato con l'action catturata dal watcher (dal metodo takeEvery)\r\n    try{\r\n        const nomeStruttura = action.payload;\r\n        //Se è già stata caricata l'anagrafica per la struttura non invochiamo l'API\r\n        const anagrafica = yield select(StruttureSelectors.getAnagrafica);\r\n        if(!anagrafica || !anagrafica.nome || anagrafica.nome !== nomeStruttura){\r\n            _logger.debug(`fetchStrutturaByName(${nomeStruttura}) - Invocazione API per recupero Anagrafica`);\r\n            const response = yield call(StruttureAPI.GetStrutturaByName, nomeStruttura);\r\n            _logger.debug(`fetchStrutturaByName(${nomeStruttura}) - returned: ${JSON.stringify(response.data)}`);\r\n            if(response){\r\n                yield put(StruttureActionsCreator.fetchStrutturaSuccess(response.data));\r\n            }else{\r\n                yield put(StruttureActionsCreator.fetchStrutturaError(response.data));\r\n            }\r\n        }else{\r\n            _logger.debug(`fetchStrutturaByName(${nomeStruttura}) - Anagrafica già risolta, API non invocata`);\r\n        }    \r\n    }catch(error)\r\n    {\r\n        _logger.error(error);\r\n        yield put(StruttureActionsCreator.fetchStrutturaError(error));\r\n    }\r\n}\r\n\r\n/* */\r\nexport function* updateStrutturaAnagraficaProp(action){\r\n    _logger.debug(`BEGIN updateStrutturaAnagraficaProp. Action: ${JSON.stringify(action)}`);\r\n    const propName = action.payload.propName;\r\n    const propValue = action.payload.propValue;\r\n    try{        \r\n        //Recuperiamo l'anagrafica corrente (pre modifica dallo store Redux)\r\n        const anagrafica  = yield select(StruttureSelectors.getAnagrafica);\r\n        const token = getAccessToken();\r\n        _logger.debug(`Recuperata anagrafica struttura dallo store. ${JSON.stringify(anagrafica)}`);\r\n        //Applichiamo la modifica alla specifica proprietà modificata\r\n        anagrafica[propName] = propValue;\r\n        _logger.debug(`Anagrafica patched con il nuovo valore per la proprieta [${propName}]. ${JSON.stringify(anagrafica)}`);\r\n        _logger.debug(`Invocazione StruttureAPI.UpdateStrutturaAnagrafica per update prop: ${propName} -newValue: ${propValue}`);\r\n        //Invochiamo l'API per aggiornare l'intera anagrafica\r\n        const response = yield call(StruttureAPI.UpdateStrutturaAnagrafica, anagrafica, token)\r\n        return response;\r\n    }catch(error){\r\n        _logger.error(`Errore durante l'invocazione di updateStrutturaAnagraficaProp. action: ${action} - ERROR: ${error}`);\r\n        yield put(StruttureActionsCreator.updateStrutturaPropError, propName, propValue, error);\r\n    }\r\n}\r\n\r\nexport function* updateStrutturaOrarioApertura(action){\r\n    _logger.debug(`BEGIN updateStrutturaOrarioApertura. Action: ${JSON.stringify(action)}`);\r\n    const newOrario = action.payload.value;\r\n    try{\r\n        const idStruttura  = yield select(StruttureSelectors.getIdStrutturaCorrente);\r\n        const token = getAccessToken();\r\n        //Invochiamo l'API per aggiornare l'orario\r\n        yield call(StruttureAPI.UpdateStrutturaOrarioApertura, idStruttura, newOrario, token);\r\n        yield put(StruttureActionsCreator.updateStrutturaOrarioAperturaSuccess(newOrario));\r\n    }catch(error){\r\n        _logger.error(`Errore durante l'invocazione di updateStrutturaOrarioApertura. action: ${action} - ERROR: ${error}`);\r\n        yield put(StruttureActionsCreator.updateStrutturaOrarioAperturaError(newOrario, error));\r\n    }\r\n}\r\n\r\n\r\nexport function* updateStrutturaImage(action){\r\n    _logger.debug(`BEGIN updateStrutturaImage. Action: ${JSON.stringify(action)}`);\r\n    try{\r\n        const idStruttura  = yield select(StruttureSelectors.getIdStrutturaCorrente);\r\n        _logger.debug(`IdStruttura: ${idStruttura}`);\r\n        const token = yield select(UserSelectors.getAccessToken);\r\n        const tipoImmagine = action.payload.imageType;\r\n        const file = action.payload.file;\r\n        const imageId = action.payload.imageKey ?? -1;\r\n        const ordinamento = action.payload.imageOrder ?? -1;\r\n        //Invochiamo l'API per caricare l'immagine\r\n        const response = yield call(StruttureImagesAPI.UpdateStrutturaImage, idStruttura, tipoImmagine, file, imageId, ordinamento, token);\r\n        yield put(StruttureActionsCreator.updateStrutturaImmagineSuccess(response.data));\r\n        _logger.debug(`Caricata immagine. Response: ${JSON.stringify(response)}`);\r\n    }catch(error){\r\n        _logger.error(`Errore durante l'invocazione di updateStrutturaImage. action: ${action} - ERROR: ${error}`);\r\n        yield put(StruttureActionsCreator.updateStrutturaImmagineError(error));\r\n    }\r\n}\r\n\r\nexport function* removeStrutturaImage(action){\r\n    _logger.debug(`BEGIN removeStrutturaImage. Action: ${JSON.stringify(action)}`);\r\n    const imageId = action.payload.idImage;\r\n    try{\r\n        const idStruttura  = yield select(StruttureSelectors.getIdStrutturaCorrente);\r\n        const token = yield select(UserSelectors.getAccessToken);\r\n        _logger.debug(`IdStruttura: ${idStruttura} - imageId: ${imageId} - token: ${token}`);\r\n        yield call(StruttureImagesAPI.RemoveStrutturaImage, idStruttura, imageId, token);\r\n        yield put(StruttureActionsCreator.removeStrutturaImmagineSuccess(imageId));\r\n    }catch(error){\r\n        _logger.error(`Errore durante l'invocazione di removeStrutturaImage. action: ${action} - ERROR: ${error}`);\r\n        yield put(StruttureActionsCreator.removeStrutturaImmagineError(imageId, imageId));\r\n    }\r\n}\r\n\r\nexport function* fetchStrutturaImages(action){\r\n    _logger.debug(`BEGIN fetchStrutturaImages. Action: ${JSON.stringify(action)}`);\r\n    try{\r\n        const idStruttura  = action.payload.idStruttura;\r\n        _logger.debug(`IdStruttura: ${idStruttura}`);\r\n        // if(!idStruttura){\r\n        //     _logger.debug(`fetchStrutturaImages -> non è ancora stata caricata l'anagrafica, la carichiamo. Action: ${JSON.stringify(action)}`);\r\n        //     //Se non è ancora stata caricata l'anagrafica, la carichiamo\r\n        //     yield call(fetchStrutturaByName, StruttureActionsCreator.fetchStrutturaByName(action.payload.nomeStruttura));\r\n        // }\r\n        const token = yield select(UserSelectors.getAccessToken);\r\n        let state = yield select();\r\n        const tipoImmagine = action.payload ? action.payload.imageType || null : null;\r\n        //Invochiamo l'API per caricare le immagini\r\n        const response = yield call(StruttureImagesAPI.FetchStrutturaImages, idStruttura, tipoImmagine, token);\r\n        yield put(StruttureActionsCreator.fetchStrutturaImmaginiSuccess(response.data));\r\n        _logger.debug(`Recuperate immagine. Response: ${JSON.stringify(response)}`);\r\n    }catch(error){\r\n        _logger.error(`Errore durante l'invocazione di fetchStrutturaImages. action: ${action} - ERROR: ${error}`);\r\n        yield put(StruttureActionsCreator.fetchStrutturaImmaginiError(error));\r\n    }\r\n\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\store\\sagas\\users.sagas.js",["462","463"],"import { call, put, takeEvery, all } from 'redux-saga/effects'\r\nimport * as log from 'loglevel';\r\nimport { AuthenticationActions } from 'react-aad-msal';\r\nimport { UserActionsCreator, R2D_LOGOUT_REQUESTED, R2D_FOLLOW_STRUTTURA_REQUESTED, R2D_UNFOLLOW_STRUTTURA_REQUESTED } from '../actions/user.actions';\r\nimport { StruttureAPI } from '../../api/strutture.api';\r\nimport { UsersAPI } from '../../api/users.api';\r\n\r\nconst _logger = log.getLogger(\"users.sagas\");\r\n\r\n/**\r\n * Intercetta le Action di tipo AAD_LOGIN_SUCCESS\r\n */\r\nexport function* watchLoginSucces() {\r\n    //NOTA: take every passa l'action al worker\r\n    yield takeEvery(AuthenticationActions.LoginSuccess, handleLoginSuccess);\r\n}\r\n\r\n// export function* watchLogoutRequest() {\r\n//     //NOTA: take every passa l'action al worker\r\n//     yield takeEvery(R2D_LOGOUT_REQUESTED, handleLogoutRequest);\r\n// }\r\n\r\nexport function* watchFollowStrutturaRequest(){\r\n    yield takeEvery(R2D_FOLLOW_STRUTTURA_REQUESTED, handleFollowStrutturaRequest)\r\n}\r\n\r\nexport function* watchUnFollowStrutturaRequest(){\r\n    yield takeEvery(R2D_UNFOLLOW_STRUTTURA_REQUESTED, handleUnFollowStrutturaRequest)\r\n}\r\n\r\n/**\r\n * Riceve l'action contenente i dati dell'account ritornati da Azure AD B2C e li rimappa in un oggetto di tipo R2DUserInfo \r\n * dopo aver integrato le informazioni con i dati recuperati tramite chiamate alle API\r\n * @param {*} action : il payload è di tipo IAccountInfo\r\n */\r\nexport function* handleLoginSuccess(action) {\r\n    _logger.debug(`user.sagas->handleLoginSuccess(${JSON.stringify(action)})`);\r\n    const account = action.payload.account;\r\n    //Iniziamo a costruire l'oggetto R2DUserInfo\r\n    //ATTENZIONE: le strutture gestite le recuperiamo dall' IdToken e non dalle API\r\n    const strutture = account.idTokenClaims?.extension_struttureOwned?.split(\",\") ?? [];\r\n    let struttureOwned = [];\r\n    const isNewUser = account.idTokenClaims?.isNewUser ?? false;\r\n\r\n    let userInfo = {\r\n        id: account.accountIdentifier,\r\n        name: account.name,\r\n        givenName: account.idTokenClaims?.given_name,\r\n        familyName: account.idTokenClaims?.family_name,\r\n        email: account.idTokenClaims.emails[0],\r\n        isGlobalAdmin: account.idTokenClaims?.extension_isGlobalAdmin,\r\n        dataConfermaEmail: account.idTokenClaims?.extension_emailConfirmationDate,\r\n        idStruttureOwned: account.idToken.extension_struttureOwned?.split(\",\"),\r\n        idToken: action.payload.jwtIdToken,\r\n        struttureOwned: [],\r\n        details: {}\r\n    }\r\n    //Generiamo l'action R2D_LOGIN_STARTED\r\n    yield put(UserActionsCreator.r2dLoginStarted(userInfo));\r\n    //Se è un nuovo utente, chimiamo l'API di backend per gestire l'evento di registrazione\r\n    call(UsersAPI.NotifyNewUser, userInfo.accountIdentifier, userInfo.email);\r\n    \r\n    //Recuperiamo le informazioni per l'utente e le integriamo nell'oggeto userInfo\r\n    //1. Se l'utente è owner di almeno una struttura facciamo il lookup delle strutture\r\n    if (strutture && strutture.length > 0) {\r\n        //Facciamo il lookup di tutte le strutture gestite in parallelo\r\n        struttureOwned = yield all(strutture.map(idStruttura=>call(StruttureAPI.GetStrutturaById, idStruttura)));\r\n        // for (let idx = 0; idx < strutture.length; idx++) {\r\n        //     let response = yield call(StruttureAPI.GetStrutturaById, strutture[idx]);\r\n        //     if (response) {\r\n        //         struttureOwned.push({\r\n        //             id: strutture[idx],\r\n        //             nome: response.data.nome,\r\n        //             urlRoute: response.data.urlRoute,\r\n        //             ragSociale: response.data.ragSociale,\r\n        //             logoUrl: response.data.logoUrl\r\n        //         });\r\n        //     }\r\n        // }\r\n    }\r\n    //Carichiamo le strutture seguite dall'utente e gli appuntamenti futuri esistenti in parallelo\r\n    const [struttureSeguite, appuntamenti] = yield all([call(UsersAPI.GetCurrentUserClientiFollowedAsync), call(UsersAPI.GetCurrentUserAppuntamentiAsync) ])\r\n    userInfo = Object.assign({}, userInfo, { struttureOwned: struttureOwned.map(so=>so.data), struttureSeguite, appuntamenti });\r\n    // let response = yield call(UsersAPI.GetCurrentUserDetailsAsync, { incAppDaConf: true, incCerts: true })\r\n    // userInfo = Object.assign({}, userInfo, { struttureOwned, details: response.data });\r\n    //Generiamo un action di tipo R2D_USER_LOOKUPS_COMPLETED\r\n    yield put(UserActionsCreator.r2dUserLookupsCompleted(userInfo));\r\n}\r\n\r\n// export function* handleLogoutRequest(action){\r\n//     yield call(UsersAPI.lo)\r\n\r\n// }\r\n\r\n\r\nexport function* handleFollowStrutturaRequest(action){\r\n    _logger.debug(`Usersagas->handleFollowStrutturaRequest->${JSON.stringify(action)}`);\r\n    //Invichiamo l'API per l'associazione\r\n    let associazione = yield call(StruttureAPI.FollowStruttura,action.payload.idStruttura);\r\n    //Generiamo l'action di completamento con il dettaglio dell'associazione come payload\r\n    yield put(UserActionsCreator.r2dFollowStrutturaSuccess(associazione));\r\n}\r\n\r\n\r\n\r\nexport function* handleUnFollowStrutturaRequest(action){\r\n    _logger.debug(`Usersagas->handleUnFollowStrutturaRequest->${JSON.stringify(action)}`);\r\n    //Invichiamo l'API per l'associazione\r\n    yield call(StruttureAPI.UnFollowStruttura,action.payload.idStruttura);\r\n    //Generiamo l'action di completamento con il dettaglio dell'associazione come payload\r\n    yield put(UserActionsCreator.r2dUnFollowStrutturaSuccess(action.payload.idStruttura));\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\store\\actions\\user.actions.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\store\\actions\\strutture.actions.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\OrarioAperturaEdit.js",["464","465","466"],"import log from \"loglevel\";\r\nimport React, { useState } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport cloneDeep from \"lodash.clonedeep\";\r\nimport PropTypes from \"prop-types\";\r\nimport {\r\n  Typography,\r\n  Grid,\r\n  Paper,\r\n  Box,\r\n  Button,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport GiornoAperturaEdit from \"./GiornoAperturaEdit\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { StruttureActionsCreator } from \"../../store/actions/strutture.actions\";\r\nimport InfoIcon from \"@material-ui/icons/Info\";\r\nimport format from \"date-fns/format\";\r\nimport { parseISO } from \"date-fns\";\r\nimport { StruttureSelectors } from \"../../store/selectors/strutture.selectors\";\r\n\r\nconst _logger = log.getLogger(\"OrarioApertura-Edit\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    padding: theme.spacing(1),\r\n    margin: theme.spacing(1, 0, 0, 0),\r\n  },\r\n  header: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n  },\r\n  headerButtonContainer: {\r\n    flexGrow: 0,\r\n    // paddingLeft: '5px',\r\n    // paddingTop: '5px',\r\n  },\r\n  headerButton: {\r\n    height: \"24px\",\r\n    width: \"70px\",\r\n  },\r\n  headerButtonSizeSmall: {\r\n    padding: \"3px 6px\",\r\n    fontSize: theme.typography.pxToRem(11),\r\n    lineHeight: theme.typography.pxToRem(11),\r\n  },\r\n  headerButtonSave: {\r\n    color: \"#E31F4F\",\r\n  },\r\n  headerTitle: {\r\n    flexGrow: 1,\r\n    justifyContent: \"center\",\r\n    textAlign: \"center\",\r\n  },\r\n  headerInfo: {\r\n    width: \"30px\",\r\n    flexGrow: 0,\r\n  },\r\n  contentBox: {\r\n    marginTop: \"10px\",\r\n  },\r\n}));\r\n\r\nconst OrarioAperturaEdit = (props) => {\r\n  const ORARIO_EMPTY = {\r\n    lunedi: { mattina: null, pomeriggio: null, tipoOrario: 1 },\r\n    sabato: { mattina: null, pomeriggio: null, tipoOrario: 1 },\r\n    domenica: { mattina: null, pomeriggio: null, tipoOrario: 1 },\r\n  };\r\n\r\n  \r\n  const [viewMode, setViewMode] = useState(props.viewMode || \"view\");\r\n  const orarioStore = useSelector(StruttureSelectors.getOrarioApertura);\r\n  const [orario, setOrario] = useState(orarioStore);\r\n  _logger.log(`OrarioAperturaEdit-Orario: ${JSON.stringify(orario)}`)\r\n  const styles = useStyles();\r\n  const dispatch = useDispatch();\r\n\r\n  const isInEdit = () => viewMode === \"edit\";\r\n\r\n  _logger.debug(\"OrarioAperturaEdit...\");\r\n\r\n  function getOrario(giorno) {\r\n    _logger.error(`getOrario(${giorno}) -> ${JSON.stringify(orario)}`);\r\n    switch (giorno) {\r\n      case \"lunedi\":\r\n        return orario\r\n          ? orario.lunedi\r\n          : {\r\n              lunedi: {\r\n                mattina: { inizio: null, fine: null },\r\n                pomeriggio: { inizio: null, fine: null },\r\n                tipoOrario: 1,\r\n              },\r\n            };\r\n      case \"sabato\":\r\n        return orario\r\n          ? orario.sabato\r\n          : {\r\n              sabato: {\r\n                mattina: { inizio: null, fine: null },\r\n                pomeriggio: { inizio: null, fine: null },\r\n                tipoOrario: 1,\r\n              },\r\n            };\r\n      case \"domenica\":\r\n        return orario\r\n          ? orario.domenica\r\n          : {\r\n              domenica: {\r\n                mattina: { inizio: null, fine: null },\r\n                pomeriggio: { inizio: null, fine: null },\r\n                tipoOrario: 1,\r\n              },\r\n            };\r\n      default:\r\n        log.debug(`getOrario(${giorno}) -> RETURN: NULL`);\r\n        return null;\r\n    }\r\n  }\r\n\r\n  const dateToTimeString = (date) => {\r\n    _logger.debug(`dateToTimeString: ${JSON.stringify(date)}`);\r\n    if (!date) return null;\r\n    if (!(date instanceof Date)) return date;\r\n    return format(date, \"HH:mm\");\r\n  };\r\n\r\n  const handleSaveClick = (e) => {\r\n    const formatday = (day) => {\r\n      _logger.debug(`handleSaveClick->formatday: day: ${JSON.stringify(day)}`);\r\n      if (!day) return null;\r\n      return {\r\n        tipoOrario: day?.tipoOrario,\r\n        mattina: {\r\n          inizio: dateToTimeString(day?.mattina?.inizio),\r\n          fine: dateToTimeString(day?.mattina?.fine),\r\n        },\r\n        pomeriggio: {\r\n          inizio: dateToTimeString(day?.pomeriggio?.inizio),\r\n          fine: dateToTimeString(day?.pomeriggio?.fine)\r\n        },\r\n      };\r\n    };\r\n\r\n    if (isInEdit()) {\r\n      //Dispatch del nuovo valore allo store\r\n      //TUNING: Verificare se lo stato è cambiato effettivamente prima di fare il dispatch dell'azione\r\n      const payload = {\r\n        lunedi: formatday(orario?.lunedi),\r\n        martedi: formatday(orario?.martedi),\r\n        mercoledi: formatday(orario?.mercoledi),\r\n        giovedi: formatday(orario?.giovedi),\r\n        venerdi: formatday(orario?.venerdi),\r\n        sabato: formatday(orario?.sabato),\r\n        domenica: formatday(orario?.domenica),\r\n      };\r\n      const action = StruttureActionsCreator.updateStrutturaOrarioApertura(\r\n        payload\r\n      );\r\n      _logger.debug(\r\n        `OrarioAperturaEdit->Salvataggio nuovo orario apertura - Dispatching action: ${JSON.stringify(\r\n          action\r\n        )}`\r\n      );\r\n      dispatch(action);\r\n      setViewMode(\"view\");\r\n    } else {\r\n      setViewMode(\"edit\");\r\n    }\r\n  };\r\n\r\n  /**\r\n   * @param {giorno} dayName - nome del giorno cambiato\r\n   * @param {Object} newValue - nuovo valore\r\n   */\r\n  const handleDayChange = (giorno, newValue) => {\r\n    _logger.debug(`handleDayChange(${giorno}, ${JSON.stringify(newValue)})`);\r\n    //Facciamo un copia dello stato\r\n    let newOrario = orario ? cloneDeep(orario) : {};\r\n    //Aggiorniamo il giorno variato\r\n    newOrario[giorno] = newValue;\r\n    //Cambiamo lo stato\r\n    setOrario(newOrario);\r\n  };\r\n\r\n  function render() {\r\n    _logger.debug(`OrarioAperturaEdit->render() - ${JSON.stringify(orario)}`);\r\n    return (\r\n      <Grid container spacing={3}>\r\n        {/* Header */}\r\n        <Grid item xs={2}></Grid>\r\n        <Grid item xs={3}>\r\n          Tipo di Orario\r\n        </Grid>\r\n        <Grid item xs={1}>\r\n          Dalle\r\n        </Grid>\r\n        <Grid item xs={1}>\r\n          Alle\r\n        </Grid>\r\n        <Grid item xs={1}></Grid>\r\n        <Grid item xs={1}>\r\n          Dalle\r\n        </Grid>\r\n        <Grid item xs={1}>\r\n          Alle\r\n        </Grid>\r\n        <Grid item xs={2}></Grid>\r\n        {/* LUN-VEN */}\r\n        <Grid item xs={2}>\r\n          LUN-VEN\r\n        </Grid>\r\n        <GiornoAperturaEdit\r\n          giorno=\"lunedi\"\r\n          tipoOrario={orario?.lunedi?.tipoOrario}\r\n          mattina={orario?.lunedi?.mattina}\r\n          pomeriggio={orario?.lunedi?.pomeriggio}\r\n          viewMode={viewMode}\r\n          onChangeHandler={handleDayChange}\r\n        ></GiornoAperturaEdit>\r\n        <Grid item xs={2}></Grid>\r\n        {/* SABATO */}\r\n        <Grid item xs={2}>\r\n          SABATO\r\n        </Grid>\r\n        <GiornoAperturaEdit\r\n          giorno=\"sabato\"\r\n          tipoOrario={orario?.sabato?.tipoOrario}\r\n          mattina={orario?.sabato?.mattina}\r\n          pomeriggio={orario?.sabato?.pomeriggio}\r\n          viewMode={viewMode}\r\n          onChangeHandler={handleDayChange}\r\n        ></GiornoAperturaEdit>\r\n        <Grid item xs={2}></Grid>\r\n        {/* DOMENICA */}\r\n        <Grid item xs={2}>\r\n          DOMENICA\r\n        </Grid>\r\n        <GiornoAperturaEdit\r\n          giorno=\"domenica\"\r\n          tipoOrario={orario?.domenica?.tipoOrario}\r\n          mattina={orario?.domenica?.mattina}\r\n          pomeriggio={orario?.domenica?.pomeriggio}\r\n          viewMode={viewMode}\r\n          onChangeHandler={handleDayChange}\r\n        ></GiornoAperturaEdit>\r\n        <Grid item xs={2}></Grid>\r\n      </Grid>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Paper className={styles.root}>\r\n      <Box className={styles.header}>\r\n        <Box className={styles.headerButtonContainer}>\r\n          <Button\r\n            variant=\"contained\"\r\n            size=\"small\"\r\n            classes={{ sizeSmall: styles.headerButtonSizeSmall }}\r\n            className={clsx(\r\n              styles.headerButton,\r\n              isInEdit() && styles.headerButtonSave\r\n            )}\r\n            onClick={handleSaveClick}\r\n          >\r\n            {isInEdit() ? \"Salva\" : \"Modifica\"}\r\n          </Button>\r\n        </Box>\r\n        <Box className={styles.headerTitle}>\r\n          <Typography variant=\"h6\">Orario Apertura</Typography>\r\n        </Box>\r\n        <Box className={styles.headerInfo}>\r\n          <Tooltip title={props.tooltip}>\r\n            <InfoIcon></InfoIcon>\r\n          </Tooltip>\r\n        </Box>\r\n      </Box>\r\n      <Box className={styles.contentBox}>{render()}</Box>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nOrarioAperturaEdit.propTypes = {\r\n  viewMode: PropTypes.oneOf([\"view\", \"edit\"]),\r\n};\r\n\r\nexport default OrarioAperturaEdit;\r\n","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\IndirizzoEdit.js",["467","468","469","470"],"import * as log from 'loglevel';\r\nimport React , { useState } from 'react'\r\nimport Fragment from '@material-ui/core'\r\nimport clsx from 'clsx';\r\nimport { Typography, Paper, Box, Button, Tooltip } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Autocomplete from 'react-google-autocomplete';\r\nimport GoogleMapReact from 'google-map-react';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n      padding: theme.spacing(1),\r\n      margin: theme.spacing(1,0,0,0),\r\n    },\r\n    header:{\r\n\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        alignItems: 'center'\r\n    },\r\n    headerButtonContainer: {\r\n        flexGrow: 0,\r\n        // paddingLeft: '5px',\r\n        // paddingTop: '5px',\r\n    },\r\n    headerButton:{\r\n        height: '24px',\r\n        width: '70px',\r\n    },\r\n    headerButtonSizeSmall:{\r\n        padding: '3px 6px',\r\n        fontSize: theme.typography.pxToRem(11),\r\n        lineHeight: theme.typography.pxToRem(11),\r\n    },\r\n    headerButtonSave:{\r\n        color: '#E31F4F',\r\n    },\r\n    headerTitle:{\r\n        flexGrow: 1,\r\n        justifyContent: 'center',\r\n        textAlign: 'center',\r\n    },\r\n    headerInfo:{\r\n        width: '30px',\r\n        flexGrow: 0,\r\n    },\r\n    contentBox:{\r\n        marginTop: '10px',\r\n        width: '100%',\r\n        height: '250px'\r\n    },\r\n}));\r\nexport default (props) => {\r\n    const _logger = log.getLogger('IndirizzoEdit');\r\n    const styles = useStyles();\r\n    const [viewMode, setViewMode] = useState(props.viewMode || 'view')\r\n    const [coordinate, setCoordinate] = useState(props.coordinate || {\r\n          lat: 59.95,\r\n          lng: 30.33\r\n        });\r\n    const isInEdit = () => (viewMode === 'edit')\r\n\r\n    const handleButtonClick = (e) =>{\r\n        if(isInEdit()){\r\n            //Dispatch del nuovo valore allo store\r\n            //TUNING: Verificare se lo stato è cambiato effettivamente prima di fare il dispatch dell'azione\r\n            // const action = StruttureActionsCreator.updateStrutturaOrarioApertura(orario)\r\n            // _logger.debug(`OrarioAperturaEdit->Salvataggio nuovo orario apertura - Dispatching action: ${JSON.stringify(action)}`);\r\n            // dispatch(action);\r\n            setViewMode(\"view\");\r\n        }else{\r\n            setViewMode(\"edit\");\r\n        }\r\n    }\r\n\r\n    return(\r\n        <Paper className={styles.root}>\r\n            <Box className={styles.header}>       \r\n                <Box className={styles.headerButtonContainer}>\r\n                    <Button variant=\"contained\" size=\"small\" \r\n                            classes={{sizeSmall: styles.headerButtonSizeSmall}}\r\n                            className={clsx(styles.headerButton, isInEdit() && styles.headerButtonSave)} \r\n                            onClick={handleButtonClick}>\r\n                            {isInEdit() ? 'Salva' : 'Modifica'}\r\n                    </Button>\r\n                 </Box>                \r\n                <Box className={styles.headerTitle}>\r\n                    <Typography variant=\"h6\">Orario Apertura</Typography>\r\n                </Box>\r\n                <Box className={styles.headerInfo}>\r\n                    <Tooltip title={props.tooltip}>\r\n                        <InfoIcon ></InfoIcon>\r\n                    </Tooltip>\r\n                </Box>\r\n                </Box>\r\n                <Box className={styles.contentBox}>\r\n                    <Autocomplete\r\n                    style={{width: '90%'}}\r\n                    onPlaceSelected={(place) => {\r\n                    console.log(place);\r\n                    }}\r\n                    types={['address']}\r\n                    componentRestrictions={{country: \"it\"}}/>\r\n                    <GoogleMapReact\r\n                        bootstrapURLKeys={{ key: 'AIzaSyB3QBIUnHrigeqjjnEmwZn717ixOCcMYUw' }}\r\n                        defaultCenter={coordinate}\r\n                        defaultZoom={11}\r\n                        >\r\n                            <InfoIcon lat={59.955413}\r\n                            lng={30.337844}\r\n                            text=\"My Marker\"></InfoIcon>\r\n                        {/* <AnyReactComponent\r\n                            lat={59.955413}\r\n                            lng={30.337844}\r\n                            text=\"My Marker\"\r\n                        /> */}\r\n                    </GoogleMapReact>\r\n            </Box>\r\n        </Paper>\r\n        )\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\R2DClienteEditItem.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaCalendarAdmin.js",["471","472"],"import * as log from 'loglevel';\r\nimport React, { useEffect, useState, Fragment } from 'react'\r\nimport FullCalendar from '@fullcalendar/react'\r\nimport itLocale from '@fullcalendar/core/locales/it'\r\nimport dayGridPlugin from '@fullcalendar/timegrid'\r\nimport interactionPlugin from '@fullcalendar/interaction';\r\nimport {\r\n    format as dfnsFormat, isToday as dfnsIsToday,\r\n    startOfWeek as dfnsStartOfWeek, endOfWeek as dfnsEndOfWeek,\r\n    isSameDay as dfnsIsSameDay, isFuture as dfnsIsFuture,\r\n    addMinutes as dfnsAddMinutes, parseISO as dfnsParseISO\r\n} from 'date-fns'\r\nimport dfnsITLocale from 'date-fns/locale/it'\r\n// import '@fullcalendar/core/main.css'\r\n// import '@fullcalendar/timegrid/main.css'\r\nimport './StrutturaCalendar.css'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { StruttureEventiAPI } from '../../api/strutture.eventi.api';\r\n\r\nconst _logger = log.getLogger(\"StrutturaCalendarAdmin\");\r\n\r\n\r\nexport default (props) => {\r\n    const idStruttura = props.idStruttura ?? -1;\r\n    const idLocation = props.idLocation ?? -1;\r\n    const urlRoute = props.urlRoute;\r\n    const history = useHistory();\r\n    const [periodo, setPeriodo] = useState(props.periodo ??\r\n    {\r\n        startDate: dfnsStartOfWeek(new Date(), { weekStartsOn: 1 }),\r\n        endDate: dfnsEndOfWeek(new Date(), { weekStartsOn: 1 })\r\n    });\r\n\r\n    const [eventi, setEventi] = useState([]);\r\n    const DEFAULT_EVENT_COLOR = '#'\r\n\r\n    useEffect(() => {\r\n        _logger.debug(`StrutturaCalendarAdmin->useEffect(idStruttura: ${idStruttura}, idLocation: ${idLocation}), periodo: ${JSON.stringify(periodo)}`);\r\n        async function fetchData(periodo) {\r\n            _logger.debug(\"StrutturaCalendarAdmin->fetchData()\");\r\n            const data = await StruttureEventiAPI.FetchEventiAsync(idStruttura, idLocation, periodo.startDate, periodo.endDate);\r\n            //Convertiamo gli Schedules in oggetti gestibili dal calendario\r\n            if (data && data.length > 0) {\r\n                let ev = data.map((value, index) => {\r\n                    const r = {\r\n                        id: value.id,\r\n                        start: value.dataOraInizio,\r\n                        end: dfnsAddMinutes(dfnsParseISO(value.dataOraInizio), value.durata),\r\n                        title: value.title,\r\n                        allDay: false\r\n                    }\r\n                    _logger.debug(`Evento [${value.id}]: ${JSON.stringify(r)} \\r\\n value:${JSON.stringify(value)}`);\r\n                    return r;\r\n                });\r\n                setEventi(ev);\r\n            } else {\r\n                setEventi([])\r\n            };\r\n        }\r\n        if (idStruttura && idStruttura > 0 && idLocation && idLocation > 0) {\r\n            fetchData(periodo);\r\n        }\r\n    }, [idStruttura, idLocation, periodo]);\r\n\r\n    const columnHeaderHtml = (date) => {\r\n        //_logger.debug(`StrutturaCalendarAdmin->columnHeaderHtml(${date}) - ${typeof date}- ${date instanceof Date}`);\r\n        var result = \"<div class='rd2-cal-header-dayname'>\" + dfnsFormat(date, \"eee\", { locale: dfnsITLocale }).toUpperCase() + \"</div><div class='rd2-cal-header-daynum\"\r\n        //Per il giorno corrente applichiamo una classe speciale\r\n        if (dfnsIsToday(date)) {\r\n            result += \" rd2-cal-header-daynum-current\"\r\n        }\r\n        result += \"'>\" + dfnsFormat(date, 'd') + \"</div>\";\r\n        return {html: result};\r\n    }\r\n\r\n    const handleDataChange = (info) => {\r\n        _logger.debug(`StrutturaCalendarAdmin->handleDataChange(${info.view.currentStart} - ${info.view.currentEnd})`);\r\n        if (!info || !info.view) return;\r\n        const newPeriodo = {\r\n            startDate: info.view.currentStart,\r\n            endDate: info.view.currentEnd\r\n        }\r\n        if (!dfnsIsSameDay(periodo.startDate, newPeriodo.startDate)) {\r\n            _logger.debug(`StrutturaCalendarAdmin->handleDataChange->setPeriodo(${JSON.stringify(newPeriodo)})`);\r\n            setPeriodo(newPeriodo);\r\n        }\r\n    }\r\n\r\n    const handleDateClick = (dateClickInfo) => {\r\n        _logger.debug(`StrutturaCalendarAdmin->handleDateClick()`);\r\n        const url = `/${urlRoute}/eventi/new?date=${dateClickInfo.dateStr}&allDay=${dateClickInfo.allDay}&lid=${idLocation}`;\r\n        _logger.debug(`StrutturaCalendarAdmin->handleDateClick() -> Redirect to: ${url}`);\r\n        if (dfnsIsFuture(dateClickInfo.date)) {\r\n            //Redirect alla pagina di nuovo evento\r\n            history.push(url);\r\n        }\r\n    }\r\n\r\n    const handleEventClick = (eventClickInfo) => {\r\n        _logger.debug(`StrutturaCalendarAdmin->handleEventClick()`);\r\n        const url = `/${urlRoute}/eventi/${eventClickInfo.event.id}`;\r\n        _logger.debug(`StrutturaCalendarAdmin->handleDateClick() -> Redirect to: ${url}`);\r\n        //Redirect alla pagina di edit evento\r\n        history.push(url);\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n            <FullCalendar\r\n                initialView=\"timeGridWeek\"\r\n                initialDate={periodo.startDate}\r\n                plugins={[dayGridPlugin, interactionPlugin]}\r\n                headerToolbar={{\r\n                    left: 'today',\r\n                    center: 'title',\r\n                    right: 'prev,next'\r\n                }}\r\n                locale={itLocale}\r\n                weekends={true}\r\n                slotDuration=\"01:00:00\"\r\n                slotLabelInterval=\"01:00\"\r\n                //timeGridEventMinHeight={25} //removed in v5\r\n                nowIndicator={false}\r\n                allDaySlot={false}\r\n\r\n                contentHeight=\"auto\"\r\n                slotMinTime=\"00:00\" //TODO: Leggere da impostazioni struttura\r\n                slotMaxTime=\"24:00\" //TODO: Leggere da impostazioni struttura\r\n                //Determina le data \"valide\", quelle fuori dal range sono in grigio\r\n                //Non è utilizzabile in questo contesto perché devono essere visibili anche l edate passate\r\n                // ==> gestiamo a livello di click la disabilitazione di creazione di eventi passati\r\n                //validRange={{start:new Date()}}\r\n\r\n                dayHeaderContent={(args)=> columnHeaderHtml(args?.date)}\r\n                datesSet={handleDataChange}\r\n\r\n                dateClick={handleDateClick}\r\n                eventClick={handleEventClick}\r\n\r\n                events={eventi}\r\n            >\r\n            </FullCalendar>\r\n        </Fragment>\r\n    );\r\n\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\ImageGalleryEdit.js",["473","474","475","476","477","478","479","480","481"],"import * as log from 'loglevel';\r\nimport React, { useState, useEffect, Fragment,useRef } from 'react'\r\nimport {useDispatch} from 'react-redux'\r\nimport {useDropzone} from 'react-dropzone'\r\nimport { Box, Button, GridListTile, GridListTileBar } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport UploadIcon from '@material-ui/icons/Publish';\r\nimport PropTypes from 'prop-types';\r\nimport {StruttureActionsCreator} from '../../store/actions/strutture.actions'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  tile:{\r\n    height: '230px',\r\n    width: '480px',\r\n    padding: '5px'\r\n  },\r\n  tileImage:{\r\n    maxHeight: '230px',\r\n    maxWidth: '482px'\r\n  },\r\n   tileBar:{\r\n     '& div:nth-of-type(2)':{width: '100%'}\r\n   },\r\n  icon: {\r\n    color: 'rgba(255, 255, 255, 0.54)',\r\n  },\r\n  btnModifica:{\r\n    width:'50%',\r\n    color: 'white'\r\n  },\r\n  btnElimina:{\r\n    width:'50%',\r\n    color: 'white'\r\n  },\r\n  inputFile:{\r\n    display:'none'\r\n  }\r\n}));\r\n\r\n/**\r\n * Il componente permette l'edit di una singola immagine della gallery.\r\n * Permette di:\r\n *  - visualizzare un'immagine già caricata\r\n *  - caricare una nuova immagine \r\n *  - eliminare un'immagine già caricata\r\n *  - sostituire un'immagine precedentemente caricata con un'altra\r\n * @param {*} props \r\n */\r\nconst ImageGalleryEdit = (props) =>{\r\n    const _logger = log.getLogger(\"ImageGallery\");\r\n    const imageKey = props.imageKey ?? -1;\r\n    const imageOrder = props.order ?? 0;\r\n    const imageType = props.imageType ?? 3;\r\n    const [imageUrl, setImageUrl] = useState(props.imageUrl);\r\n    const [file, setFile] = useState({});\r\n    const classes = useStyles();\r\n    const dispatch = useDispatch();\r\n    const inputFile = useRef(null) \r\n    const isSmallScreen = useMediaQuery(theme => theme.breakpoints.up('sm'));\r\n    const isMediumScreen = useMediaQuery(theme => theme.breakpoints.up('md'));\r\n    const isLargeScreen = useMediaQuery(theme => theme.breakpoints.up('lg'));\r\n\r\n    //NOTA: se useEffect ritorna una funzione, questa viene invocata come cleanup quando cambia la dipendenza\r\n    useEffect(()=>()=>{\r\n      //Siamo nella funzione di cleanup, invocata prima di aggiornare lo stato (quindi con il vecchio stato)\r\n      //Rimuoviamo l'URL associato al file per evitare Memory leaks (solo se il file è stato caricato dal componente e non se )\r\n      if(file && imageUrl){\r\n        URL.revokeObjectURL(imageUrl); //Tecnicamente se l'URL schema non è \"blob\" dovrebbe essere una NOP\r\n      }\r\n    },[file, imageUrl]);\r\n\r\n    const {getRootProps, getInputProps, open} = useDropzone({\r\n        noKeyboard: true, //disabilitiamo l'apertura del file dialog da tastiera\r\n        noClick: true, //disabilitiamo l'apertura del file dialog tramite click sull'intera drop zone\r\n        accept: 'image/*',\r\n        multiple: false, //accettiamo un singolo file\r\n        onDrop: acceptedFiles => {\r\n          if(acceptedFiles.length === 0){\r\n            _logger.warn(\"Nessun file accettato.\")\r\n            return;\r\n          }\r\n          //In teoria dovrebbe esserci solo un file accettato, se ce ne dovesse essere più di uno prendiamo l'ultimo\r\n          let file = acceptedFiles[acceptedFiles.length -1];\r\n          let url = URL.createObjectURL(file);\r\n          setImageUrl(url);\r\n          setFile(file);\r\n          handleImageUpload(file, url);\r\n          //TODO: caricare il file sul server\r\n        }\r\n      });\r\n\r\n      const getIdImageType = ()=>{\r\n        switch(imageType){\r\n          case 'logo': return 1;\r\n          case 'sfondo': return 2;\r\n          default: return 3;\r\n        }\r\n      }\r\n\r\n      const handleImageUpload = (file, url)=>{\r\n        const action = StruttureActionsCreator.updateStrutturaImmagine({\r\n          file: file,\r\n          imageKey: imageKey,\r\n          imageType: getIdImageType(),\r\n          imageUrl: file ? null : url, //l'url lo carichiamo solo se non stiamo facendo l'upload di una nuova immagine\r\n          imageOrder: imageOrder\r\n        });\r\n        _logger.debug(`ImageGalleryEdit->Upload immagine  - Dispatching action: ${JSON.stringify(action)}`);\r\n        dispatch(action);\r\n      }\r\n\r\n      const removeFile=(idImage)=>{\r\n        //Invoco l'API per rimuovere il file corrente\r\n        //TODO: IMPLEMENTARE\r\n        const actionDelete = StruttureActionsCreator.removeStrutturaImmagine(idImage);\r\n        _logger.debug(`OrarioAperturaEdit->Salvataggio nuovo orario apertura - Dispatching action: ${JSON.stringify(actionDelete)}`);\r\n        dispatch(actionDelete);\r\n      }\r\n\r\n      const handleImageUploadClick = (e)=>{\r\n        _logger.debug(\"Inside handleImageUploadClick\");\r\n        //forziamo l'apertura del dialo di caricamento dell'immagine\r\n        //open();\r\n        inputFile.current.click();\r\n        //Dopo che l'utente ha selezionato il file, cosa succede? viene scatenato l'evento onDrop?\r\n      }\r\n\r\n      const handleImageDeleteClick = (e)=>{\r\n          _logger.debug(\"Inside handleImageDeleteClick\");\r\n          removeFile(imageKey);\r\n      }\r\n\r\n      const handleFileChange = (e)=>{\r\n        e.preventDefault();\r\n        let reader = new FileReader();\r\n        let file = e.target.files[0];\r\n        reader.onloadend = () =>{\r\n          setFile(file);\r\n          setImageUrl(reader.result);\r\n          handleImageUpload(file, null);\r\n        }\r\n        reader.readAsDataURL(file);\r\n\r\n      }\r\n\r\n      const dropzoneInlineStyle = {\r\n        backgroundImage: `url(${imageUrl})`\r\n      }\r\n\r\n      const getNumCols = () =>{\r\n        if(isSmallScreen){\r\n            return 1;\r\n        }else {\r\n          return 2;\r\n        }\r\n      }\r\n\r\n    return (\r\n            <GridListTile key={imageKey} cols={1} rows={1} className={classes.tile}\r\n              >\r\n              <img alt=\"\" src={imageUrl} className={classes.tileImage}></img>              \r\n              {/* <div {...getRootProps({className: 'dropzone'})} style={dropzoneInlineStyle}>\r\n                    <input {...getInputProps()}></input>            \r\n                </div>  */}\r\n              <GridListTileBar className={classes.tileBar}\r\n              actionIcon={\r\n                <Fragment>\r\n                  <Button variant=\"outlined\" className={classes.btnModifica} \r\n                          onClick={handleImageUploadClick}\r\n                          startIcon={<EditIcon />}>Modifica</Button>\r\n                  <Button variant=\"outlined\" className={classes.btnElimina} \r\n                          onClick={handleImageDeleteClick}\r\n                          startIcon={<DeleteIcon />}>Elimina</Button>\r\n                  <input type=\"file\" accept=\"image/*\" ref={inputFile} className={classes.inputFile} \r\n                         autoComplete=\"false\" onChange={handleFileChange}></input>\r\n                {/* <IconButton aria-label={`Modifica`} className={classes.icon}>\r\n                  <InfoIcon />\r\n                </IconButton>\r\n                <IconButton aria-label={`Elimina`} className={classes.icon}>\r\n                  <InfoIcon />\r\n                </IconButton> */}\r\n                </Fragment>\r\n              }\r\n            />\r\n                {/* <div {...getRootProps({className: 'dropzone'})} style={dropzoneInlineStyle}>\r\n                    <input {...getInputProps()}></input>            \r\n                </div>\r\n                <div>\r\n                    <Button onClick={handleImageUploadClick}>Carica</Button>\r\n                    <Button onClick={handleImageDeleteClick}>Elimina</Button>\r\n                </div> */}\r\n                \r\n            </GridListTile>\r\n            )\r\n    /*\r\n      useEffect(() => () => {\r\n    // Make sure to revoke the data uris to avoid memory leaks\r\n    files.forEach(file => URL.revokeObjectURL(file.preview));\r\n  }, [files]);\r\n\r\n  return (\r\n    <section className=\"container\">\r\n      <div {...getRootProps({className: 'dropzone'})}>\r\n        <input {...getInputProps()} />\r\n        <p>Drag 'n' drop some files here, or click to select files</p>\r\n      </div>\r\n      <aside style={thumbsContainer}>\r\n        {thumbs}\r\n      </aside>\r\n    </section>\r\n  );\r\n  */\r\n};\r\n\r\nImageGalleryEdit.propTypes = {\r\n  imageUrl: PropTypes.string,\r\n  imageType: PropTypes.oneOf(['sfondo', 'logo', 'gallery']),\r\n  imageKey: PropTypes.number\r\n}\r\n\r\nexport default ImageGalleryEdit;","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\R2DCalendariContainer.js",["482"],"/**\r\n * Componente che renderizza i Tabs con le varie location e per ciascuna location presenta il rispettivo calnedario\r\n */\r\nimport log from 'loglevel';\r\nimport React, { useEffect, useState, Fragment } from 'react'\r\nimport { Tab, Tabs, Paper, makeStyles, CircularProgress } from '@material-ui/core'\r\nimport { StruttureEventiAPI } from '../../api/strutture.eventi.api';\r\nimport StrutturaCalendarAdmin from './StrutturaCalendarAdmin';\r\nimport StrutturaCalendarView from './StrutturaCalendarView';\r\n\r\nconst _logger = log.getLogger('R2DCalendariContainer')\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    TabContainer: {\r\n        marginTop: \"10px\"\r\n    }\r\n}));\r\n\r\n\r\nexport default  (props) => {\r\n    const idStruttura = props.idStruttura ?? -1;\r\n    const urlRoute = props.urlRoute;\r\n    const renderMode = props.renderMode ?? 'view'\r\n    const classes = useStyles();\r\n    const [locationsIsLoading, setLocationsIsLoading] = useState(true);\r\n    const [locations, setLocations] = useState(null);\r\n    const [selectedTab, setSelectedTab] = useState(0);\r\n\r\n    useEffect(() => {\r\n        async function fetchData() {\r\n            _logger.debug(`R2DCalendariContainer->useEffect() - Fetching Locations (${idStruttura})`);\r\n            const data = await StruttureEventiAPI.FetchLocationsAsync(idStruttura);\r\n            setLocations(data);\r\n            setLocationsIsLoading(false);\r\n        };\r\n        if (idStruttura && idStruttura > 0) {\r\n            fetchData();\r\n        }\r\n    }, [idStruttura, selectedTab])\r\n\r\n    const handleChange = (event, newTab) => {\r\n        setSelectedTab(newTab);\r\n    };\r\n\r\n    function renderTabs() {\r\n        _logger.debug(`R2DCalendariContainer->renderTabs() - locations: ${JSON.stringify(locations)}`);\r\n        return (\r\n            <Paper className={classes.TabContainer}>\r\n                <Tabs variant=\"fullWidth\" value={selectedTab} onChange={handleChange}   >\r\n                    {\r\n                        locations.map((location, index) => {\r\n                            return (\r\n                                <Tab key={location.id} value={index} label={location.nome} />\r\n                            )\r\n                        })\r\n                    }\r\n                </Tabs>\r\n                {\r\n                    renderMode === 'view' ? \r\n                    <StrutturaCalendarView idStruttura={idStruttura} idLocation={locations[selectedTab].id} urlRoute={urlRoute} />\r\n                    :                    \r\n                    <StrutturaCalendarAdmin idStruttura={idStruttura} idLocation={locations[selectedTab].id} urlRoute={urlRoute} />\r\n                }\r\n            </Paper>\r\n        )\r\n    }\r\n\r\n    function renderNoLocations() {\r\n        _logger.debug(`R2DCalendariContainer->renderNoLocations() - locations: ${JSON.stringify(locations)}`);\r\n        return (\r\n            <div>No locations!</div>\r\n        )\r\n    }\r\n\r\n    function renderLocationsLoading() {\r\n        return (\r\n            <CircularProgress />\r\n        )\r\n    }\r\n    return (\r\n        <Fragment>\r\n            {\r\n                locationsIsLoading ? renderLocationsLoading() : (locations && locations.length > 0 ? renderTabs() : renderNoLocations())\r\n            }\r\n        </Fragment>\r\n    )\r\n}\r\n","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaOrarioView.js",["483"],"import log from \"loglevel\";\r\nimport React from \"react\";\r\nimport { Box, makeStyles, Typography } from \"@material-ui/core\";\r\nimport {useSelector} from 'react-redux'\r\nimport {StruttureSelectors} from '../../store/selectors/strutture.selectors'\r\n\r\nconst _logger = log.getLogger(\"StrutturaOrarioView\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    padding: theme.spacing(1),\r\n    margin: theme.spacing(1, 0, 0, 0),\r\n  },\r\n  header: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n  },\r\n  orarioContainer: {},\r\n  ora: {},\r\n  oraSeparatore: {},\r\n}));\r\n\r\nconst StrutturaOrarioView = (props) => {\r\n  const orarioStruttura = useSelector(StruttureSelectors.getOrarioApertura);\r\n\r\n  const styles = useStyles();\r\n  const alignSelf = props.alignSelf ?? \"flex-start\";\r\n  const flex = props.flex ?? 1;\r\n\r\n  _logger.log(`StrutturaOrarioView->StrutturaOrarioView: ${JSON.stringify(orarioStruttura)}`);\r\n\r\n  const writeData = (data)=>{\r\n    if(!data) return null;\r\n    if(typeof data !== 'string') return null;\r\n    let parts = data.split(':',2);\r\n    return (parts[0][0] === '0' ? parts[0][1]+':'+parts[1] : parts[0]+':'+parts[1])\r\n  }\r\n\r\n  const renderTipoOrarioSpezzato = (day) => {\r\n    return (\r\n      <span className={styles.orarioContainer}>\r\n        <span className={styles.ora}>{writeData(day?.mattina?.inizio)}</span>\r\n        <span className={styles.oraSeparatore}> - </span>\r\n        <span className={styles.ora}>{writeData(day?.mattina?.fine)}</span>\r\n        <span className={styles.oraSeparatore}>{\"\\u00a0 e \\u00a0\"}</span>\r\n        <span className={styles.ora}>{writeData(day?.pomeriggio?.inizio)}</span>\r\n        <span className={styles.oraSeparatore}> - </span>\r\n        <span className={styles.ora}>{writeData(day?.pomeriggio?.fine)}</span>\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const renderTipoOrarioContinuato = (day) => {\r\n    return (\r\n      <span className={styles.orarioContainer}>\r\n        <span className={styles.ora}>{writeData(day?.mattina?.inizio)}</span>\r\n        <span className={styles.oraSeparatore}> - </span>\r\n        <span className={styles.ora}>{writeData(day?.pomeriggio?.fine)}</span>\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const renderTipoOrarioMattino = (day) => {\r\n    return (\r\n      <span className={styles.orarioContainer}>\r\n        <span className={styles.ora}>{writeData(day?.mattina?.inizio)}</span>\r\n        <span className={styles.oraSeparatore}> - </span>\r\n        <span className={styles.ora}>{writeData(day?.mattina?.fine)}</span>\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const renderTipoOrarioPomeriggio = (day) => {\r\n    return (\r\n      <span className={styles.orarioContainer}>\r\n        <span className={styles.ora}>{writeData(day?.pomeriggio?.inizio)}</span>\r\n        <span className={styles.oraSeparatore}> - </span>\r\n        <span className={styles.ora}>{writeData(day?.pomeriggio?.fine)}</span>\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const renderTipoOrarioChiuso = (day) => {\r\n    return (\r\n      <span className={styles.orarioContainer}>\r\n        <span className={styles.chiuso}>Chiuso</span>\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const renderDay = (dayName, day) => {\r\n      _logger.log(`StrutturaOrarioView->renderDay(${dayName}): ${JSON.stringify(day)}`)\r\n    let orario;\r\n    switch (day?.tipoOrario) {\r\n      case 'Spezzato':\r\n        orario = renderTipoOrarioSpezzato(day);\r\n        break;\r\n      case 'Continuato':\r\n        orario = renderTipoOrarioContinuato(day);\r\n        break;\r\n      case 'Mattina':\r\n        orario = renderTipoOrarioMattino(day);\r\n        break;\r\n      case 'Pomeriggio':\r\n        orario = renderTipoOrarioPomeriggio(day);\r\n        break;\r\n      case 'Chiuso':\r\n        orario = renderTipoOrarioChiuso(day);\r\n        break;\r\n    }\r\n    return (\r\n      <div className={styles.day}>\r\n        <span>{dayName}</span>\r\n        {orario}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderOrario = (orario) => {\r\n    return (\r\n      <div>\r\n        {orario && orario && orario?.lunedi ? renderDay(\"Lun-Ven:\", orario?.lunedi) : null}\r\n        {/* {orario && orario?.martedi ? renderDay(\"Lunedì:\", orario?.lunedi) : \"\"}\r\n        {orario && orario?.mercoledi ? renderDay(\"Lunedì:\", orario?.lunedi) : \"\"}\r\n        {orario && orario?.giovedi ? renderDay(\"Lunedì: \", orario?.lunedi) : \"\"}\r\n        {orario && orario?.venerdi ? renderDay(\"Lunedì:\", orario?.lunedi) : \"\"} */}\r\n        {orario && orario?.sabato ? renderDay(\"Sabato:\", orario?.sabato) : \"\"}\r\n        {orario && orario?.domenica ? renderDay(\"Domenica:\", orario?.domenica) : \"\"}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Box alignSelf={alignSelf} flex={flex}>\r\n      <Typography variant=\"h5\" gutterBottom>\r\n        Orari\r\n      </Typography>\r\n      {renderOrario(orarioStruttura)}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default StrutturaOrarioView;\r\n","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaContattiView.js",["484"],"import React from 'react'\r\nimport { Typography, Box } from '@material-ui/core';\r\nimport AlternateEmailIcon from '@material-ui/icons/AlternateEmail';\r\nimport PhoneIcon from '@material-ui/icons/Phone';\r\n\r\nconst StrutturaContattiView = (props)=>{\r\n    const anagraficaStruttura = props.struttura;\r\n    const alignSelf = props.alignSelf ?? \"flex-end\";\r\n    const flex = props.flex ?? 2;\r\n\r\n    return(\r\n        <Box alignSelf={alignSelf} >\r\n            <Typography variant=\"h5\" gutterBottom>Contatti</Typography>\r\n            <Typography style={{fontWeight:\"bold\"}} gutterBottom>{anagraficaStruttura?.ragioneSociale}</Typography>\r\n            <Typography gutterBottom>{anagraficaStruttura?.indirizzo}</Typography>\r\n            {anagraficaStruttura?.email ? <Typography gutterBottom><AlternateEmailIcon style={{fontSize:\"1rem\"}}/> {anagraficaStruttura?.email}</Typography> : '' }\r\n            {anagraficaStruttura?.numTelefono ? <Typography gutterBottom><PhoneIcon style={{fontSize:\"1rem\"}}/> {anagraficaStruttura?.numTelefono}</Typography> : ''}            \r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default StrutturaContattiView;","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaMap.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\commons\\R2DLoader.js",["485"],"import React from 'react'\r\nimport Loader from 'react-loader-spinner';\r\nimport { Box, makeStyles, Modal } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles({\r\n    boxLoader: {\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        transform: \"translate(-50%, -50%)\",\r\n        textAlign: \"center\",\r\n    }\r\n});\r\n\r\n\r\nexport default (props) => {\r\n    const color = props.color ?? \"#E31F4F\";\r\n    const height = props.height ?? 200;\r\n    const width = props.width ?? 200;\r\n    const fullPage = props.fullPage ?? false;\r\n    const visible = props.visible ?? true;\r\n    const classes = useStyles();\r\n\r\n\r\n    function fullPageLoader() {\r\n        return (\r\n            <Modal open={visible} style={{ position: \"relative\" }}>\r\n                {componentLoader()}\r\n            </Modal>\r\n        )\r\n    }\r\n\r\n    function componentLoader() {\r\n        return (\r\n            <Box className={classes.boxLoader}>\r\n                <Loader type=\"Watch\" color={color} height={height} width={width} ></Loader>\r\n            </Box>\r\n        )\r\n    }\r\n\r\n    return (\r\n        fullPage ? fullPageLoader() : componentLoader()\r\n    )\r\n\r\n\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\utente\\UtenteStruttureSeguite.js",["486","487"],"import log from 'loglevel'\r\nimport React from 'react'\r\nimport appInsights from '../../applicationInsights'\r\nimport { UsersAPI } from '../../api/users.api'\r\nimport { Paper, TableContainer, Table, TableHead, TableRow, TableCell, makeStyles, TableBody, Button, Typography, Box } from '@material-ui/core';\r\nimport R2DLoader from '../commons/R2DLoader';\r\nimport { Link } from 'react-router-dom';\r\nimport SentimentDissatisfiedIcon from '@material-ui/icons/SentimentDissatisfied';\r\nimport dfnsITLocale from 'date-fns/locale/it'\r\nimport dfnsFormat from 'date-fns/format'\r\nimport parseISO from 'date-fns/parseISO'\r\n\r\nconst _logger = log.getLogger('UtenteStruttureSeguite');\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        minHeight: '400px',\r\n        position: \"relative\"\r\n    },\r\n    title: {\r\n        paddingTop: '10px',\r\n        marginBottom: '10px',\r\n        fontWeight: \"700\"\r\n    }\r\n}));\r\n\r\nexport default (props) => {\r\n    const classes = useStyles();\r\n    const [isLoadingAbbonamenti, setIsLoadingAbbonamenti] = React.useState(true);\r\n    const [isLoadingClienti, setIsLoadingClienti] = React.useState(true);\r\n    const [abbonamenti, setAbbonamenti] = React.useState(null);\r\n    const [clienti, setClienti] = React.useState(null);\r\n\r\n    React.useEffect(() => {\r\n        async function fetchClientiFollowed() {\r\n            const data = await UsersAPI.GetCurrentUserClientiFollowedAsync()\r\n            setClienti(data);\r\n            setIsLoadingClienti(false);\r\n        }\r\n        async function fetchAbbonamenti() {\r\n            const data = await UsersAPI.GetCurrentUserAbbonamentiAsync()\r\n            if (data) {\r\n                setAbbonamenti(data);\r\n            } else {\r\n                setAbbonamenti([]);\r\n            }\r\n            setIsLoadingAbbonamenti(false);\r\n        }\r\n        fetchClientiFollowed();\r\n        fetchAbbonamenti();\r\n    }, []);\r\n\r\n    const isLoading = () => {\r\n        return isLoadingClienti || isLoadingAbbonamenti;\r\n    }\r\n\r\n    function renderAbbonamentoForCliente(idCliente) {\r\n        _logger.debug(`UtenteStruttureSeguite()->renderAbbonamentoForCliente(idCliente: ${idCliente}) - abbonamenti: ${JSON.stringify(abbonamenti)}`)\r\n        const abbonamentiCliente = abbonamenti.filter(v => v.idCliente === idCliente)\r\n            .sort((a, b) => {\r\n                //Ordiniamo in ordine DECRESCENTE di scadenza\r\n                if (a.scadenza > b.scadenza) { return -1 }\r\n                else if (a.scadenza < b.scadenza) { return 1 }\r\n                else { return 0 }\r\n            });\r\n        _logger.debug(`abbonamentiCliente: ${JSON.stringify(abbonamentiCliente)}`)\r\n        if (abbonamentiCliente && abbonamentiCliente.length > 0) {\r\n            if (abbonamentiCliente[0].scadenza < (new Date()))\r\n                return (<span>Scaduto</span>)\r\n            else {\r\n                return (<span>{dfnsFormat(parseISO(abbonamentiCliente[0].scadenza), 'P', { locale: dfnsITLocale })}</span>)\r\n            }\r\n        } else {\r\n            return (<span>Nessun Abbonamento</span>)\r\n        }\r\n    }\r\n\r\n    function renderClienti() {\r\n        if (clienti && clienti.length > 0) {\r\n            return (\r\n                <TableContainer>\r\n                    <Table className={classes.table} aria-label=\"Elenco locations\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <TableCell>Nome Struttura</TableCell>\r\n                                <TableCell align=\"center\">Data Associazione</TableCell>\r\n                                <TableCell align=\"center\">Scadenza Abbonamento</TableCell>\r\n                                <TableCell align=\"center\">Link</TableCell>\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {clienti.map(m => (\r\n                                <TableRow key={m.id}>\r\n                                    <TableCell component=\"th\" scope=\"row\">{m.nome}</TableCell>\r\n                                    <TableCell align=\"center\">{dfnsFormat(parseISO(m.dataFollowing), 'P p', { locale: dfnsITLocale })}</TableCell>\r\n                                    <TableCell align=\"center\">{renderAbbonamentoForCliente(m.idCliente)}</TableCell>\r\n                                    <TableCell align=\"center\">\r\n                                        <Button size=\"small\" variant=\"outlined\" component={Link} to={`/${m.urlRoute}/`} >\r\n                                            Vai\r\n                                            </Button>\r\n\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ))}\r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            )\r\n        } else {\r\n            return (\r\n                <Box>\r\n                    <Typography component=\"div\" variant=\"h6\">Non stai ancora seguendo nessuna struttura</Typography>\r\n                    <SentimentDissatisfiedIcon />\r\n                </Box>\r\n            )\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <Paper className={classes.root}>\r\n            <Typography className={classes.title} align=\"center\" variant=\"h5\">Le mie strutture</Typography>\r\n            {isLoading() ? <R2DLoader /> : renderClienti()}\r\n        </Paper>\r\n    )\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\utente\\UtentePrenotazioneFilter.js",["488","489","490","491","492","493","494","495","496","497"],"import React, { useState } from 'react'\r\nimport Accordion from '@material-ui/core/Accordion';\r\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\r\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\r\nimport FilterListIcon from '@material-ui/icons/FilterList';\r\nimport { Typography, InputAdornment, Button, Box, makeStyles, Grid } from '@material-ui/core';\r\nimport { KeyboardDatePicker, DatePicker } from '@material-ui/pickers';\r\nimport { ParsableDate } from '@material-ui/pickers/constants/prop-types';\r\nimport { MaterialUiPickersDate } from '@material-ui/pickers/typings/date';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n    root: {\r\n\r\n    },\r\n    filterGrid:{\r\n        \r\n    },\r\n    dateFilter: {\r\n        maxWidth: '150px',\r\n        marginRight: '20px',\r\n        '& label': {\r\n            fontSize: '0.8rem'\r\n        },\r\n        '& input': {\r\n            fontSize: '0.9rem'\r\n        }\r\n    },\r\n    textFilter: {\r\n        fontSize: '0.9rem',\r\n        minWidth: '300px',\r\n        marginRight: '20px',\r\n        '& label': {\r\n            fontSize: '0.8rem'\r\n        },\r\n        '& input': {\r\n            fontSize: '0.9rem'\r\n        }\r\n\r\n    },\r\n    searchButton: {\r\n        marginTop: '15px',\r\n    }\r\n}));\r\n\r\nexport const UtentePrenotazioniFilter = (props) => {\r\n    const classes = useStyle();\r\n    const [from, setFrom] = useState(props?.filters?.from);\r\n    const [to, setTo] = useState(props?.filters?.to);\r\n    const [text, setText] = useState(props?.filters?.text ?? '');\r\n\r\n    const handleDataChange = (filter, newDate) => {\r\n        // eslint-disable-next-line default-case\r\n        switch (filter?.trim()?.toLowerCase()) {\r\n            case 'from':\r\n                setFrom(newDate);\r\n                return;\r\n            case 'to':\r\n                setTo(newDate);\r\n                return;\r\n        }\r\n    }\r\n\r\n    const handleTextFilterChange = (event) => {\r\n        setText(event.target.value);\r\n    }\r\n\r\n    const handleSearchClick = ()=>{\r\n        if(props.onFilterChange && props.onFilterChange instanceof Function){\r\n            props.onFilterChange({\r\n                from,\r\n                to,\r\n                text\r\n            });\r\n        }\r\n    }\r\n\r\n    return (\r\n        // <Accordion variant=\"outlined\"> \r\n        //     <AccordionSummary\r\n        //         expandIcon={<FilterListIcon />}\r\n        //         aria-controls=\"panel1a-content\"\r\n        //         id=\"panel1a-header\"\r\n        //     >\r\n        //         <Typography >Filtri</Typography>\r\n        //     </AccordionSummary>\r\n        //     <AccordionDetails>\r\n                <Grid container spacing={0} className={classes.filterGrid}>\r\n                    <Grid item>\r\n                        <KeyboardDatePicker className={classes.dateFilter}\r\n                            label=\"Eventi dal (dd/mm/yyyy)\"\r\n                            value={from}\r\n                            format=\"dd/MM/yyyy\"\r\n                            onChange={(newDate) => { handleDataChange('from', newDate) }}\r\n                        /></Grid>\r\n                    <Grid item>\r\n                        <KeyboardDatePicker className={classes.dateFilter}\r\n                            label=\"al (dd/mm/yyyy)\"\r\n                            format=\"dd/MM/yyyy\"\r\n                            value={to}\r\n                            onChange={(newDate) => { handleDataChange('to', newDate) }}\r\n                        />\r\n                    </Grid>\r\n                    <Grid item>\r\n                        <TextField\r\n                            className={classes.textFilter}\r\n                            id=\"input-with-icon-textfield\"\r\n                            value={text}\r\n                            label=\"Testo da ricercare (struttura, lezione o evento)\"\r\n                            onChange={handleTextFilterChange}\r\n                        />\r\n                    </Grid>\r\n                    <Grid item>\r\n                        <Button endIcon={<SearchIcon />} size=\"small\" variant=\"outlined\" className={classes.searchButton} onClick={handleSearchClick}> Cerca</Button>\r\n                    </Grid>\r\n                </Grid>\r\n\r\n        //     </AccordionDetails>\r\n        // </Accordion>\r\n    )\r\n\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\editEvento\\R2DEditEventoForm.js",["498","499","500","501"],"import log from \"loglevel\";\r\nimport React, { useState, useEffect, Fragment } from \"react\";\r\nimport { Formik, Form, Field, ErrorMessage, FieldArray } from \"formik\";\r\nimport {\r\n  makeStyles,\r\n  TextField,\r\n  Button,\r\n  Grid,\r\n  Select,\r\n  MenuItem,\r\n  Box,\r\n  FormControl,\r\n  InputLabel,\r\n  Accordion,\r\n  AccordionSummary,\r\n  Typography,\r\n  FormControlLabel,\r\n  AccordionDetails,\r\n  Switch,\r\n  RadioGroup,\r\n  Radio,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport ToggleButton from \"@material-ui/lab/ToggleButton\";\r\nimport ToggleButtonGroup from \"@material-ui/lab/ToggleButtonGroup\";\r\nimport { DatePicker, DateTimePicker } from \"@material-ui/pickers\";\r\nimport parseISO from \"date-fns/parseISO\";\r\nimport differenceInHours from \"date-fns/differenceInHours\";\r\nimport subHours from \"date-fns/subHours\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { StruttureEventiAPI } from \"../../api/strutture.eventi.api\";\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst _logger = log.getLogger(\"R2DEditEventoForm\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  form: {\r\n    padding: \"20px\",\r\n  },\r\n  gridContainer: {},\r\n  fullWidth: {\r\n    width: \"100%\",\r\n  },\r\n  flexDisplay: {\r\n    display: \"flex\",\r\n  },\r\n  selectField: {\r\n    alignSelf: \"flex-end\",\r\n  },\r\n  paddingRight: {\r\n    paddingRight: \"20px\",\r\n  },\r\n  toggleDay: {\r\n    backgroundColor: \"#89C443\",\r\n    marginRight: \"5px\",\r\n    minWidth: \"110px\",\r\n  },\r\n  btnSalva: {\r\n    backgroundColor: \"#E31F4F\",\r\n    color: \"white\",\r\n    margin: \"auto\",\r\n  },\r\n}));\r\n\r\nconst R2DEditEventoForm = (props) => {\r\n  const idStruttura = props.idStruttura;\r\n  const idEvento = props.idEvento ?? -1;\r\n  const dataEvento = props.dataEvento ? parseISO(props.dataEvento) : new Date();\r\n  const idLocation = props.idLocation ?? \"\";\r\n  const [tipologieLezioni, setTipologieLezioni] = useState([]);\r\n  const [locations, setLocations] = useState([]);\r\n  const [lezioniLoading, setLezioniLoading] = useState(true);\r\n  const [locationsLoading, setLocationsLoading] = useState(true);\r\n  //    const [isSubmitionCompleted, setSubmitionCompleted] = useState(false);\r\n  const [evento, setEvento] = useState(null);\r\n  const classes = useStyles();\r\n  let history = useHistory();\r\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n\r\n  function buildArrayGiorniSettimana(daysOfWeek) {\r\n    let result = [\r\n      { id: 1, code: \"Lun\", nome: \"lunedi\", label: \"Lunedì\", selezionato: false },\r\n      { id: 2, code: \"Mar\", nome: \"martedi\", label: \"Martedì\", selezionato: false },\r\n      { id: 3, code: \"Mer\", nome: \"mercoledi\", label: \"Mercoledì\", selezionato: false },\r\n      { id: 4, code: \"Gio\", nome: \"giovedi\", label: \"Giovedì\", selezionato: false },\r\n      { id: 5, code: \"Ven\", nome: \"venerdi\", label: \"Venerdì\", selezionato: false },\r\n      { id: 6, code: \"Sab\", nome: \"sabato\", label: \"Sabato\", selezionato: false },\r\n      { id: 7, code: \"Dom\", nome: \"domenica\", label: \"Domenica\", selezionato: false },\r\n    ];\r\n    if (typeof daysOfWeek !== \"undefined\" && daysOfWeek !== null && Array.isArray(daysOfWeek)) {\r\n      daysOfWeek.forEach((v) => {\r\n        switch (v) {\r\n          case \"Lun\": {\r\n            result[0].selezionato = true;\r\n            break;\r\n          }\r\n          case \"Mar\": {\r\n            result[1].selezionato = true;\r\n            break;\r\n          }\r\n          case \"Mer\": {\r\n            result[2].selezionato = true;\r\n            break;\r\n          }\r\n          case \"Gio\": {\r\n            result[3].selezionato = true;\r\n            break;\r\n          }\r\n          case \"Ven\": {\r\n            result[4].selezionato = true;\r\n            break;\r\n          }\r\n          case \"Sab\": {\r\n            result[5].selezionato = true;\r\n            break;\r\n          }\r\n          case \"Dom\": {\r\n            result[6].selezionato = true;\r\n            break;\r\n          }\r\n          default: {\r\n            throw new Error(\"Giorno delle settimana non valido\");\r\n          }\r\n        }\r\n      });\r\n    }\r\n    return result;\r\n  }\r\n\r\n  //Carichiamo le tipologie di lezioni per la struttura\r\n  //NOTA: la fetch dipende solo dalla struttura corrente\r\n  useEffect(() => {\r\n    async function fetchTipologieLezione() {\r\n      _logger.debug(\"R2DEditEventoForm->fetchTipologieLezione()\");\r\n      const data = await StruttureEventiAPI.FetchTipologieLezioniAsync(idStruttura);\r\n      _logger.debug(`R2DEditEventoForm->fetchTipologieLezione() - Retrieved lezioni: ${JSON.stringify(data)}`);\r\n      setTipologieLezioni(data);\r\n      setLezioniLoading(false);\r\n    }\r\n    if (idStruttura > 0) {\r\n      setLezioniLoading(true);\r\n      fetchTipologieLezione();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [idStruttura]);\r\n\r\n  //Carichiamo le locations  per la struttura\r\n  //NOTA: la fetch dipende solo dalla struttura corrente\r\n  useEffect(() => {\r\n    async function fetchLocations() {\r\n      _logger.debug(\"R2DEditEventoForm->FetchLocationsAsync()\");\r\n      const data = await StruttureEventiAPI.FetchLocationsAsync(idStruttura);\r\n      _logger.debug(`R2DEditEventoForm->FetchLocationsAsync() - Retrieved locations: ${JSON.stringify(data)}`);\r\n      setLocations(data);\r\n      setLocationsLoading(false);\r\n    }\r\n    if (idStruttura > 0) {\r\n      setLocationsLoading(true);\r\n      fetchLocations();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [idStruttura]);\r\n\r\n  useEffect(() => {\r\n    //Non usiamo redux-saga per caricare l'evento perché non c'è necessita di salvarlo nello Store Redux\r\n    async function fetchData() {\r\n      _logger.debug(`R2DEditEventoForm->useEffect()->fetchData() - Fetching Event (${idStruttura}, ${idEvento})`);\r\n      let data = await StruttureEventiAPI.FetchEventoAsync(idStruttura, idEvento);\r\n      _logger.debug(`R2DEditEventoForm->useEffect->fetchData(): Event Fetched: ${JSON.stringify(data)}`);\r\n      //Ci serve aggiungere la proprietà preavvisoCancellazione espressa come differenza in ore tra dataOraInizio e cancellabileFinoAl (se valorizzata)\r\n      data.preavvisoCancellazione = data.cancellabileFinoAl ? differenceInHours(parseISO(data.dataOraInizio), parseISO(data.cancellabileFinoAl)) : \"\";\r\n      //rimappiamo i giorni della settimana in una struttura più comoda per Formik\r\n      data.giorniSettimanaRicorrenza = buildArrayGiorniSettimana(data?.recurrency?.daysOfWeek);\r\n      data.tipoRicorrenza = data.recurrency?.recurrency ?? \"None\";\r\n      data.tipoFineRecurrency = data.recurrency ? (data.recurrency.repeatUntil ? \"data\" : \"ripetizioni\") : \"unknown\";\r\n      data.ripetiFinoAl = data?.recurrency?.repeatUntil ?? null;\r\n      data.numeroRipezioni = data?.recurrency?.repeatFor ?? \"\";\r\n      setEvento(data);\r\n    }\r\n    if (idStruttura) {\r\n      if (idEvento && idEvento > 0) {\r\n        fetchData();\r\n      } else {\r\n        //Iniziliziamo un nuovo evento\r\n        let data = {\r\n          id: null,\r\n          idCliente: idStruttura,\r\n          title: \"\",\r\n          idTipoLezione: \"\",\r\n          idLocation: !isNaN(idLocation) ? parseInt(idLocation) : \"\",\r\n          dataOraInizio: dataEvento,\r\n          postiDisponibili: \"\",\r\n          note: \"\",\r\n          cancellazioneConsentita: false,\r\n          preavvisoCancellazione: \"\",\r\n          waitListDisponibile: false,\r\n          dataAperturaIscrizione: null,\r\n          dataChiusuraIscrizione: null,\r\n          istruttore: \"\",\r\n          recurrency: {\r\n            recurrency: \"None\",\r\n            daysOfWeek: [],\r\n            repeatUntil: \"\",\r\n            repeatFor: -1,\r\n          },\r\n          //I campi sottostanti sono di ausilio per la compilazione dell aproprietà recurrency soprastante e non sono richiesti dalla API\r\n          tipoRicorrenza: \"None\",\r\n          giorniSettimanaRicorrenza: buildArrayGiorniSettimana(),\r\n          tipoFineRecurrency: \"\",\r\n          ripetiFinoAl: null,\r\n          numeroRipezioni: \"\",\r\n        };\r\n        setEvento(data);\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [idStruttura, idEvento]);\r\n\r\n  const isFetchingInProgress = () => {\r\n    const result = lezioniLoading || locationsLoading || evento == null;\r\n    _logger.debug(`isFetchingInProgress: ${result}`);\r\n    return result;\r\n  };\r\n  const handleFormSubmmit = async (values, actions) => {\r\n    //E' necessario fare un po' di reshaping dei values prima di inviarli al server, in particolare per la gestione degli eventi ricorrenti\r\n    //Ci creiamo una copia (shallow) dei dati su cui apportare le modifiche con la proprietà recurrency vuota\r\n    let schedule = Object.assign({}, values, { recurrency: { recurrency: null, daysOfWeek: null, repeatUntil: null, repeatFor: null } });\r\n    if (schedule.tipoRicorrenza !== \"None\") {\r\n      schedule.recurrency.recurrency = values.tipoRicorrenza;\r\n      if (schedule.recurrency.recurrency === \"Weekly\") {\r\n        schedule.recurrency.daysOfWeek = values.giorniSettimanaRicorrenza.filter((v) => v.selezionato).map((d) => d.code);\r\n      } else {\r\n        schedule.recurrency.DaysOfWeek = [];\r\n      }\r\n\r\n      if (values.tipoFineRecurrency === \"data\") {\r\n        schedule.recurrency.repeatUntil = values.ripetiFinoAl;\r\n        schedule.recurrency.repeatFor = null;\r\n      } else if (values.tipoFineRecurrency === \"ripetizioni\") {\r\n        schedule.recurrency.repeatUntil = null;\r\n        schedule.recurrency.repeatFor = values.numeroRipezioni;\r\n      }\r\n    }\r\n    //rimuoviamo le proprietà non necessarie\r\n    delete schedule.tipoRicorrenza;\r\n    delete schedule.giorniSettimanaRicorrenza;\r\n    delete schedule.tipoFineRecurrency;\r\n    delete schedule.ripetiFinoAl;\r\n    delete schedule.numeroRipezioni;\r\n    delete schedule.props;\r\n\r\n    //aggiungiamo la proprietà cancellabileFinoAl come differenza tra la data inizio lezione ed il numero di ore minime di preavviso richieste\r\n    //per la cancellazione\r\n    let cancellabileFinoAl = subHours(schedule.dataOraInizio, isNaN(values.preavvisoCancellazione) ? 0 : values.preavvisoCancellazione);\r\n    schedule.cancellabileFinoAl = cancellabileFinoAl;\r\n    delete schedule.preavvisoCancellazione;\r\n\r\n    _logger.debug(`SUBMITTING FORM - VALUES: ${JSON.stringify(schedule)}`);\r\n    await StruttureEventiAPI.SaveEventoAsync(idStruttura, schedule);\r\n    enqueueSnackbar('Lezione creata', {variant:'success'});\r\n    history.goBack();\r\n  };\r\n\r\n  /**\r\n   * Stop enter submitting the form.\r\n   * @param keyEvent Event triggered when the user presses a key.\r\n   */\r\n  function onKeyDown(keyEvent) {\r\n    if ((keyEvent.charCode || keyEvent.keyCode) === 13) {\r\n      keyEvent.preventDefault();\r\n    }\r\n  }\r\n\r\n  _logger.debug(`R2DEditEventoForm->evento: ${JSON.stringify(evento)}`);\r\n\r\n  const renderForm = () => {\r\n    return (\r\n      <Formik initialValues={evento} enableReinitialize={true} onSubmit={handleFormSubmmit}>\r\n        {(props, form) => (\r\n          <Form onSubmit={props.handleSubmit} autoComplete=\"off\" className={classes.form} onKeyDown={onKeyDown}>\r\n            <Grid container>\r\n              <Grid item xs={12}>\r\n                <Accordion defaultExpanded expanded={true} elevation={0}>\r\n                  <AccordionSummary>\r\n                    <Typography variant=\"h6\">Dati Lezione</Typography>\r\n                  </AccordionSummary>\r\n                  <AccordionDetails>\r\n                    <Grid container>\r\n                      <Grid item xs={12}>\r\n                        <TextField\r\n                          name=\"title\"\r\n                          label=\"Nome Lezione\"\r\n                          onChange={props.handleChange}\r\n                          onBlur={props.handleBlur}\r\n                          value={props.values.title}\r\n                          fullWidth\r\n                          margin=\"normal\"\r\n                          required\r\n                          //className={classes.fullWidth}\r\n                        />\r\n                      </Grid>\r\n                      <Grid item xs={6} className={classes.paddingRight}>\r\n                        <FormControl fullWidth margin=\"normal\" required>\r\n                          <InputLabel id=\"editEventoTipoLezioneLbl\">Tipo Lezione</InputLabel>\r\n                          <Select name=\"idTipoLezione\" labelId=\"editEventoTipoLezioneLbl\" value={props.values.idTipoLezione} onChange={props.handleChange} onBlur={props.handleBlur}>\r\n                            {(tipologieLezioni ?? []).map((tipoLezione, index) => {\r\n                              return (\r\n                                <MenuItem key={tipoLezione.id} value={tipoLezione.id}>\r\n                                  {tipoLezione.nome}\r\n                                </MenuItem>\r\n                              );\r\n                            })}\r\n                          </Select>\r\n                        </FormControl>\r\n                      </Grid>\r\n                      <Grid item xs={3}>\r\n                        <Field name=\"dataOraInizio\">\r\n                          {({ field, form }) => (\r\n                            <DateTimePicker\r\n                              name={field.name}\r\n                              margin=\"normal\"\r\n                              fullWidth\r\n                              required\r\n                              minDate={new Date()}\r\n                              label=\"Data ed ora inizio lezione\"\r\n                              value={field.value}\r\n                              onChange={(dateTime) => form.setFieldValue(field.name, dateTime, true)}\r\n                              format=\"dd MMMM yyyy  ' alle'  HH:mm\"\r\n                            />\r\n                          )}\r\n                        </Field>\r\n                      </Grid>\r\n\r\n                      <Grid item xs={6} className={classes.paddingRight}>\r\n                        <FormControl fullWidth margin=\"normal\" required>\r\n                          <InputLabel id=\"editEventoLocationLbl\">Location</InputLabel>\r\n                          <Select name=\"idLocation\" labelId=\"editEventoLocationLbl\" value={props.values.idLocation} onChange={props.handleChange} onBlur={props.handleBlur}>\r\n                            {(locations ?? []).map((location, index) => {\r\n                              return (\r\n                                <MenuItem key={location.id} value={location.id}>\r\n                                  {location.nome}\r\n                                </MenuItem>\r\n                              );\r\n                            })}\r\n                          </Select>\r\n                        </FormControl>\r\n                      </Grid>\r\n                      <Grid item xs={3}>\r\n                        <TextField\r\n                          name=\"postiDisponibili\"\r\n                          label=\"Posti disponibili\"\r\n                          type=\"number\"\r\n                          onChange={props.handleChange}\r\n                          onBlur={props.handleBlur}\r\n                          value={props.values.postiDisponibili}\r\n                          fullWidth\r\n                          margin=\"normal\"\r\n                          required\r\n                        />\r\n                      </Grid>\r\n\r\n                      <Grid item xs={12}>\r\n                        <TextField name=\"note\" label=\"Note\" rows=\"3\" onChange={props.handleChange} onBlur={props.handleBlur} value={props.values.note} fullWidth margin=\"normal\" />\r\n                      </Grid>\r\n                    </Grid>\r\n                  </AccordionDetails>\r\n                </Accordion>\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <Accordion elevation={0}>\r\n                  <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n                    <Typography variant=\"h6\">Impostazioni Avanzate</Typography>\r\n                  </AccordionSummary>\r\n                  <AccordionDetails>\r\n                    <Grid container>\r\n                      <Grid item xs={6}>\r\n                        <FormControl fullWidth margin=\"normal\">\r\n                          <FormControlLabel\r\n                            control={\r\n                              <Switch\r\n                                name=\"cancellazioneConsentita\"\r\n                                checked={props.values.cancellazioneConsentita}\r\n                                value={props.values.cancellazioneConsentita}\r\n                                onChange={props.handleChange}\r\n                                onBlur={props.handleBlur}\r\n                              />\r\n                            }\r\n                            label=\"Cancellazione Consentita\"\r\n                          />\r\n                        </FormControl>\r\n                      </Grid>\r\n                      <Grid item xs={6}>\r\n                        <TextField\r\n                          name=\"preavvisoCancellazione\"\r\n                          label=\"Preavviso minimo di cancellazione (in ore)\"\r\n                          type=\"number\"\r\n                          onChange={props.handleChange}\r\n                          onBlur={props.handleBlur}\r\n                          value={props.values.preavvisoCancellazione}\r\n                          disabled={!props.values.cancellazioneConsentita}\r\n                          fullWidth\r\n                          margin=\"normal\"\r\n                        />\r\n                      </Grid>\r\n                      <Grid item xs={6}>\r\n                        <FormControl fullWidth margin=\"normal\">\r\n                          <FormControlLabel\r\n                            control={\r\n                              <Switch\r\n                                name=\"waitListDisponibile\"\r\n                                checked={props.values.waitListDisponibile}\r\n                                value={props.values.waitListDisponibile}\r\n                                onChange={props.handleChange}\r\n                                onBlur={props.handleBlur}\r\n                              />\r\n                            }\r\n                            label=\"Lista d'attesa disponibile\"\r\n                          />\r\n                        </FormControl>\r\n                      </Grid>\r\n                      <Grid item xs={6}>\r\n                        <Field name=\"dataAperturaIscrizione\">\r\n                          {({ field, form }) => (\r\n                            <DateTimePicker\r\n                              name={field.name}\r\n                              label=\"Data ed ora apertura iscrizioni\"\r\n                              value={props.values.dataAperturaIscrizione}\r\n                              onChange={(dateTime) => form.setFieldValue(field.name, dateTime, true)}\r\n                              format=\"dd/MM/yyyy HH:mm\"\r\n                              fullWidth\r\n                              margin=\"normal\"\r\n                            />\r\n                          )}\r\n                        </Field>\r\n                      </Grid>\r\n\r\n                      <Grid item xs={6} className={classes.paddingRight}>\r\n                        <TextField name=\"istruttore\" label=\"Istruttore\" onChange={props.handleChange} onBlur={props.handleBlur} value={props.values.istruttore} fullWidth margin=\"normal\" />\r\n                      </Grid>\r\n\r\n                      <Grid item xs={6}>\r\n                        <Field name=\"dataChiusuraIscrizione\">\r\n                          {({ field, form }) => (\r\n                            <DateTimePicker\r\n                              name={field.name}\r\n                              label=\"data ed ora chiusura iscrizioni\"\r\n                              value={field.value}\r\n                              onChange={(dateTime) => form.setFieldValue(field.name, dateTime, true)}\r\n                              format=\"dd/MM/yyyy HH:mm\"\r\n                              fullWidth\r\n                              margin=\"normal\"\r\n                            />\r\n                          )}\r\n                        </Field>\r\n                      </Grid>\r\n                    </Grid>\r\n                  </AccordionDetails>\r\n                </Accordion>\r\n              </Grid>\r\n\r\n              <Grid item xs={12}>\r\n                <Accordion elevation={0}>\r\n                  <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n                    <Typography variant=\"h6\">Lezione Ricorrente</Typography>\r\n                  </AccordionSummary>\r\n                  <AccordionDetails>\r\n                    <Grid container>\r\n                      <Grid item xs={12}>\r\n                        <FormControl fullWidth margin=\"normal\">\r\n                          <InputLabel id=\"editEventoTipoRicorrenzaLbl\">Ricorrenza lezione</InputLabel>\r\n                          <Select name=\"tipoRicorrenza\" labelId=\"editEventoTipoRicorrenzaLbl\" value={props.values.tipoRicorrenza} onChange={props.handleChange} onBlur={props.handleBlur}>\r\n                            <MenuItem value=\"None\">Non si ripete</MenuItem>\r\n                            <MenuItem value=\"Daily\">Tutti i giorni</MenuItem>\r\n                            <MenuItem value=\"Weekly\">Ogni Settimana</MenuItem>\r\n                            <MenuItem value=\"Monthly\">Ogni Mese</MenuItem>\r\n                          </Select>\r\n                        </FormControl>\r\n                      </Grid>\r\n                      {props.values.tipoRicorrenza === \"Weekly\" ? (\r\n                        <Grid item xs={12}>\r\n                          <FieldArray name=\"recurrency.giorniSettimanaRicorrenza\">\r\n                            {({ move, swap, push, insert, unshift, pop, form }) => {\r\n                              return (\r\n                                <ToggleButtonGroup\r\n                                  margin=\"normal\"\r\n                                  name=\"recurrency.giorniSettimanaRicorrenza\"\r\n                                  value={props.values.giorniSettimanaRicorrenza}\r\n                                  //onChange={dateTime => form.setFieldValue(field.name, dateTime, true)}\r\n                                  onChange={props.handleChange}\r\n                                >\r\n                                  {props.values.giorniSettimanaRicorrenza.map((dow, index) => (\r\n                                    <Field name={`recurrency.giorniSettimanaRicorrenza.${index}`} key={dow.id}>\r\n                                      {() => (\r\n                                        <ToggleButton\r\n                                          value={dow.nome}\r\n                                          selected={props.values.giorniSettimanaRicorrenza[index].selezionato}\r\n                                          className={classes.toggleDay}\r\n                                          onChange={() => {\r\n                                            const newValues = props.values.giorniSettimanaRicorrenza;\r\n                                            newValues[index].selezionato = !newValues[index].selezionato;\r\n                                            _logger.debug(`ToggleButton[${index} - ${dow.nome}] -> Selected: ${newValues[index].selezionato}`);\r\n                                            form.setFieldValue(`props.values.giorniSettimanaRicorrenza`, newValues);\r\n                                          }}\r\n                                        >\r\n                                          <Typography>{dow.label}</Typography>\r\n                                        </ToggleButton>\r\n                                      )}\r\n                                    </Field>\r\n                                  ))}\r\n                                </ToggleButtonGroup>\r\n                              );\r\n                            }}\r\n                          </FieldArray>\r\n                        </Grid>\r\n                      ) : (\r\n                        \"\"\r\n                      )}\r\n                      {props.values.tipoRicorrenza !== \"None\" ? (\r\n                        <Field name=\"tipoFineRecurrency\">\r\n                          {({ field, form }) => (\r\n                            <Fragment>\r\n                              <Grid item xs={12}>\r\n                                <Typography style={{ marginTop: \"10px\", fontWeight: 700 }}>Fine ricorrenza:</Typography>\r\n                              </Grid>\r\n                              <Grid item xs={3}>\r\n                                <FormControl>\r\n                                  <FormControlLabel\r\n                                    value=\"data\"\r\n                                    label=\"Data fine ricorrenza\"\r\n                                    labelPlacement=\"end\"\r\n                                    checked={props.values.tipoFineRecurrency === \"data\"}\r\n                                    control={\r\n                                      <Radio\r\n                                        onChange={(event) => {\r\n                                          //_logger.debug(`tipoFineRecurrency-> endType: ${JSON.stringify(endType)}`)\r\n                                          console.log(event.target.value);\r\n                                          form.setFieldValue(field.name, event.target.value);\r\n                                        }}\r\n                                      />\r\n                                    }\r\n                                  />\r\n                                </FormControl>\r\n                              </Grid>\r\n                              <Grid item xs={3}>\r\n                                <Field name=\"ripetiFinoAl\">\r\n                                  {({ field, form }) => (\r\n                                    <DatePicker\r\n                                      name={field.name}\r\n                                      disabled={props.values.tipoFineRecurrency !== \"data\"}\r\n                                      value={field.value}\r\n                                      onChange={(dateTime) => form.setFieldValue(field.name, dateTime, true)}\r\n                                      format=\"dd/MM/yyyy\"\r\n                                    />\r\n                                  )}\r\n                                </Field>\r\n                              </Grid>\r\n                              <Grid item xs={6}></Grid>\r\n                              <Grid item xs={3}>\r\n                                <FormControl>\r\n                                  <FormControlLabel\r\n                                    value=\"ripetizioni\"\r\n                                    checked={props.values.tipoFineRecurrency === \"ripetizioni\"}\r\n                                    label=\"Numero Ripetizioni\"\r\n                                    labelPlacement=\"end\"\r\n                                    control={\r\n                                      <Radio\r\n                                        onChange={(event) => {\r\n                                          //_logger.debug(`tipoFineRecurrency-> endType: ${JSON.stringify(endType)}`)\r\n                                          console.log(event.target.value);\r\n                                          form.setFieldValue(field.name, event.target.value);\r\n                                        }}\r\n                                      />\r\n                                    }\r\n                                  />\r\n                                </FormControl>\r\n                              </Grid>\r\n                              <Grid item xs={3}>\r\n                                <TextField\r\n                                  disabled={props.values.tipoFineRecurrency !== \"ripetizioni\"}\r\n                                  name=\"numeroRipezioni\"\r\n                                  value={props.values.numeroRipezioni}\r\n                                  type=\"number\"\r\n                                  onChange={props.handleChange}\r\n                                />\r\n                              </Grid>\r\n                            </Fragment>\r\n                          )}\r\n                        </Field>\r\n                      ) : (\r\n                        \"\"\r\n                      )}\r\n                    </Grid>\r\n                  </AccordionDetails>\r\n                </Accordion>\r\n              </Grid>\r\n\r\n              <Grid item xs={12} style={{ textAlign: \"center\" }}>\r\n                <Button size=\"large\" variant=\"contained\" type=\"submit\" className={classes.btnSalva}>\r\n                  Salva\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    );\r\n  };\r\n\r\n  return !isFetchingInProgress() ? renderForm() : <CircularProgress />;\r\n};\r\n\r\nexport default R2DEditEventoForm;\r\n","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\api\\strutture.eventi.api.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\api\\strutture.utenti.api.js",["502"],"import log from 'loglevel'\r\nimport axios from 'axios';\r\nimport buildUrl from 'build-url';\r\nimport formatISO from 'date-fns/formatISO'\r\nimport sub from 'date-fns/sub'\r\nimport add from 'date-fns/add'\r\nimport config from '../config'\r\nimport { APIUtils } from './apiUtils'\r\nimport qs from 'query-string'\r\n\r\n\r\nconst _logger = log.getLogger('strutture.utenti.api');\r\n\r\n\r\nasync function FetchUtentiStrutturaAsync(idStruttura, includeStato, page, pageSize, sortBy, sortDirection, filters) {\r\n    let querystring = qs.stringify({\r\n        stato:includeStato,\r\n        page: page,\r\n        pageSize: pageSize,\r\n        sortby:sortBy,\r\n        asc: sortDirection === 'asc',\r\n        filters: filters\r\n    },{\r\n        skipNull: true\r\n    })\r\n    const url = `${config.BaseAPIPath}/clienti/${idStruttura}/users?${querystring}`;\r\n    _logger.debug(`Invokin API: [GET] ${url}`);\r\n    const response = await axios.get(url, await APIUtils.addBearerToken());\r\n    return response.data;\r\n}\r\n\r\nasync function AddUpdateAbbonamentoUtenteAsync(idStruttura, idUtente, abbonamentoUtente){\r\n    const url = `${config.BaseAPIPath}/clienti/${idStruttura}/abbonamenti/${idUtente}`;\r\n    if(!abbonamentoUtente.id){\r\n        const response = await axios.post(url, abbonamentoUtente, await APIUtils.addBearerToken());\r\n        return response.data;\r\n    }else{\r\n        const response = await axios.put(url, abbonamentoUtente, await APIUtils.addBearerToken());\r\n        return response.data;\r\n\r\n    }\r\n}\r\n\r\nasync function FetchAbbonamentiUtenteAsync(idStruttura, idUtente){\r\n    const url = `${config.BaseAPIPath}/clienti/${idStruttura}/abbonamenti/${idUtente}`;\r\n    const response = await axios.get(url, await APIUtils.addBearerToken());\r\n    return response.data;\r\n}\r\n\r\n\r\nasync function FetchProfiloUtenteAsync(idStruttura, idUtente){\r\n    const url = `${config.BaseAPIPath}/clienti/${idStruttura}/users/${idUtente}/profile`;\r\n    const response = await axios.get(url, await APIUtils.addBearerToken());\r\n    return response.data;\r\n}\r\n\r\nasync function FetchDettagliAssociazioneUtenteAsync(idStruttura, idUtente, numAbbonamenti = 3, appFrom = null, appTo = null, incCert=true, incWL= true){\r\n    if(!appFrom){appFrom = sub(new Date(), {days:7});}\r\n    if(!appTo){appTo = add(new Date(), {months:120});}\r\n\r\n    const url = `${config.BaseAPIPath}/clienti/${idStruttura}/users/${idUtente}?incAbb=${numAbbonamenti}&apFrom=${formatISO(appFrom, {representation: 'date'})}&apTo=${formatISO(appTo, {representation: 'date'})}&incCert=${incCert}&incWL=${incWL}`;\r\n    const response = await axios.get(url, await APIUtils.addBearerToken());\r\n    return response.data;\r\n}\r\n\r\nasync function AddUpdateCertificatoUtenteAsync(idStruttura, idUtente, certificatoUtente){\r\n    const url = `${config.BaseAPIPath}/clienti/${idStruttura}/users/${idUtente}/certificati`;\r\n    if(!certificatoUtente.id){\r\n        const response = await axios.post(url, certificatoUtente, await APIUtils.addBearerToken());\r\n        return response.data;\r\n    }else{\r\n        const response = await axios.put(url, certificatoUtente, await APIUtils.addBearerToken());\r\n        return response.data;\r\n\r\n    }\r\n}\r\n\r\n \r\nexport const StruttureUtentiAPI = {\r\n    FetchUtentiStrutturaAsync,\r\n    FetchAbbonamentiUtenteAsync,\r\n    FetchProfiloUtenteAsync,\r\n    FetchDettagliAssociazioneUtenteAsync,\r\n    AddUpdateAbbonamentoUtenteAsync,\r\n    AddUpdateCertificatoUtenteAsync\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\api\\strutture.api.js",["503","504"],"import axios from 'axios';\r\nimport config from '../config'\r\nimport { APIUtils } from './apiUtils'\r\nimport * as log from 'loglevel'\r\nimport { STRUTTURE_API_MOCKED } from './strutture.api.mock'\r\nimport appInsights from '../applicationInsights'\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-common'\r\n\r\n\r\nconst _logger = log.getLogger('strutture.api');\r\n\r\n//Dato l'id di una struttura ne ritorna l'urlRoute\r\nasync function GetUrlStrutturaFromId(id) {\r\n  const url = `${config.BaseAPIPath}/clienti/resolve/${id}`\r\n  _logger.debug(`GetNomeStrutturaFromId->Invoking API: [GET] ${url}`);\r\n  const response = await axios.get(url);\r\n  return response.data;\r\n}\r\n\r\nasync function GetStrutturaByName(name, token) {\r\n  const url = `${config.BaseAPIPath}/clienti/${name}`\r\n  _logger.debug(`GetStrutturaByName->Invoking API: [GET] ${url}`);\r\n  return await axios.get(url);\r\n}\r\n\r\nasync function GetStrutturaById(id, token) {\r\n  const url = `${config.BaseAPIPath}/clienti/${id}`\r\n  _logger.debug(`GetStrutturaById->Invoking API: [GET] ${url}`);\r\n  return await axios.get(url);\r\n}\r\n\r\nasync function UpdateStrutturaAnagrafica(anagrafica, token) {\r\n  const url = `${config.BaseAPIPath}/clienti/${anagrafica.id}/profilo/anagrafica`\r\n  _logger.debug(`Invoking API: [PUT] ${url} - Payload: ${JSON.stringify(anagrafica)}`);\r\n  return await axios.put(url, anagrafica, await APIUtils.addBearerToken());\r\n}\r\n\r\nasync function UpdateStrutturaOrarioApertura(idStruttura, orarioApertura, token) {\r\n  const url = `${config.BaseAPIPath}/clienti/${idStruttura}/profilo/orario`\r\n  _logger.debug(`Invoking API: [PUT] ${url} - Payload: ${JSON.stringify(orarioApertura)}`);\r\n  return await axios.put(url, orarioApertura, await APIUtils.addBearerToken());\r\n}\r\n\r\n/**\r\n * Associa l'utente corrente con la struttura specificata e ritorna i dettagli dell'associazione\r\n * @param {number} idStruttura \r\n * @returns {object} dettaglioAssociazione\r\n */\r\nasync function FollowStruttura(idStruttura) {\r\n  const url = `${config.BaseAPIPath}/clienti/${idStruttura}/follow`\r\n  _logger.debug(`Invoking API: [POST] ${url}`);\r\n  const response = await axios.post(url, null, await APIUtils.addBearerToken());\r\n  return response.data;\r\n}\r\n\r\nasync function UnFollowStruttura(idStruttura) {\r\n  const url = `${config.BaseAPIPath}/clienti/${idStruttura}/unfollow`\r\n  _logger.debug(`Invoking API: [POST] ${url}`);\r\n  await axios.post(url, null, await APIUtils.addBearerToken()); \r\n}\r\n\r\nasync function CheckUrlStruttura(urlRoute) {\r\n  const url = `${config.BaseAPIPath}/clienti/checkurl?url=${urlRoute}`\r\n  _logger.debug(`Invoking API: [POST] ${url}`);\r\n  const response = await axios.get(url, await APIUtils.addBearerToken()); \r\n  return response.data;  \r\n}\r\n\r\n//Registra un nuovo cliente\r\nasync function RegistraNuovoClienteAsync(cliente) {\r\n  const url = `${config.BaseAPIPath}/clienti`\r\n  _logger.debug(`RegistraNuovoClienteAsync->Invoking API: [POST] ${JSON.stringify(cliente)}`);\r\n  const response = await axios.post(url, cliente, await APIUtils.addBearerToken());\r\n  return response.data;\r\n}\r\n\r\nexport const StruttureAPI = {\r\n  GetStrutturaByName: config.MockedAPI ? STRUTTURE_API_MOCKED.GetStrutturaByName_Mocked : GetStrutturaByName,\r\n  GetStrutturaById: GetStrutturaById,\r\n  UpdateStrutturaAnagrafica: config.MockedAPI ? STRUTTURE_API_MOCKED.UpdateStrutturaAnagrafica_Mocked : UpdateStrutturaAnagrafica,\r\n  UpdateStrutturaOrarioApertura: config.MockedAPI ? STRUTTURE_API_MOCKED.UpdateStrutturaOrarioApertura_Mocked : UpdateStrutturaOrarioApertura,\r\n  FollowStruttura,\r\n  UnFollowStruttura,\r\n  GetUrlStrutturaFromId,\r\n  CheckUrlStruttura,\r\n  RegistraNuovoClienteAsync\r\n}\r\n","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\commons\\sidenav\\R2DSideNav.js",["505"],"import React, { Fragment } from 'react'\r\nimport { List, ListItem, ListItemIcon, ListItemText, Fab } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport { NavLink } from 'react-router-dom'\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport AssignmentIcon from '@material-ui/icons/Assignment';\r\nimport DateRangeIcon from '@material-ui/icons/DateRange';\r\nimport FitnessCenterIcon from '@material-ui/icons/FitnessCenter';\r\nimport BookIcon from '@material-ui/icons/Book';\r\nimport CreditCardIcon from '@material-ui/icons/CreditCard';\r\nimport PeopleIcon from '@material-ui/icons/People';\r\nimport ImageIcon from '@material-ui/icons/Image'\r\nimport SideNavHeader from './R2DSideNavHeader';\r\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AzureAD from 'react-aad-msal';\r\nimport {authProvider} from '../../../authProvider'\r\nimport {getStore} from '../../../store/reduxStore'\r\n\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  drawerPaper: {\r\n    width: drawerWidth,\r\n  },\r\n  drawer: {\r\n    [theme.breakpoints.up('lg')]: {\r\n      width: drawerWidth,\r\n      flexShrink: 0,\r\n    },\r\n  },\r\n  link: {\r\n    textDecoration: 'none',\r\n    color: 'unset',\r\n  },\r\n  navToggleFAB: {\r\n    position: \"fixed\",\r\n    marginLeft: \"20px\",\r\n    marginTop: \"20px\",\r\n    backgroundColor: \"#000000\",\r\n    zIndex: theme.zIndex.drawer\r\n  }\r\n}));\r\n\r\nexport default (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  //TODO: Gestire il cambio di struttura corrente passando una callback al componente header\r\n  const urlStruttura = props.urlStruttura;\r\n\r\n  const [drawerIsOpen, setDrawerIsOpen] = React.useState(props.drawerIsOpen ?? false);\r\n\r\n\r\n  const handleDrawerToggle = (stato) => event => {\r\n    if (event && event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\r\n      return;\r\n    }\r\n    setDrawerIsOpen(stato);\r\n  };\r\n\r\n  const drawerContent = (\r\n    <div>\r\n      <SideNavHeader strutturaCorrente={urlStruttura}></SideNavHeader>\r\n      <List>\r\n        {\r\n          [\r\n            { pageType: '', text: 'Home', icon: (<HomeIcon />) },\r\n            { pageType: 'edit', text: 'Dati Struttura', icon: (<AssignmentIcon />) },\r\n            { pageType: 'images', text: 'Immagini', icon: (<ImageIcon />) },\r\n            { pageType: 'calendari', text: 'Calendari', icon: (<DateRangeIcon />) },\r\n            { pageType: 'locations', text: 'Sale e Trainer', icon: (<FitnessCenterIcon />) },\r\n            { pageType: 'lezioni', text: 'Tipologie Lezioni', icon: (<BookIcon />) },\r\n            { pageType: 'abbonamenti', text: 'Tipologie Abbonamenti', icon: (<CreditCardIcon />) },\r\n            { pageType: 'utenti', text: 'Utenti', icon: (<PeopleIcon />) },\r\n          ].map((item, idx) => (\r\n            <ListItem button key={item.pageType}>\r\n              <ListItemIcon>\r\n                {/* <HomeIcon/> */}\r\n                {item.icon}\r\n              </ListItemIcon>\r\n              <NavLink onClick={handleDrawerToggle(false)} to={{ pathname: `/${urlStruttura}/${item.pageType}` }} className={classes.link}>\r\n                <ListItemText primary={item.text} />\r\n              </NavLink>\r\n            </ListItem>\r\n          ))\r\n        }\r\n      </List>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <AzureAD reduxStore={getStore()} provider={authProvider}>\r\n      <Fragment>\r\n        <Fab size=\"medium\" variant=\"round\"\r\n          className={classes.navToggleFAB}\r\n          onClick={handleDrawerToggle(true)}>\r\n          <MenuIcon style={{ color: \"white\" }} />\r\n        </Fab>\r\n        <SwipeableDrawer\r\n          variant=\"temporary\"\r\n          anchor={theme.direction === 'rtl' ? 'right' : 'left'}\r\n          open={drawerIsOpen}\r\n          onClose={handleDrawerToggle(false)}\r\n          onOpen={handleDrawerToggle(true)}\r\n          classes={{\r\n            paper: classes.drawerPaper,\r\n          }}\r\n          ModalProps={{\r\n            keepMounted: true, // Better open performance on mobile.\r\n          }}\r\n        >\r\n          {drawerContent}\r\n        </SwipeableDrawer>\r\n      </Fragment >\r\n    </AzureAD>\r\n  );\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\store\\sagas\\sagas.utils.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\api\\users.api.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\api\\strutture.images.api.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\StrutturaCalendarView.js",["506","507"],"import * as log from 'loglevel';\r\nimport React, { useEffect, useState, Fragment } from 'react'\r\nimport FullCalendar from '@fullcalendar/react'\r\nimport itLocale from '@fullcalendar/core/locales/it'\r\nimport dayGridPlugin from '@fullcalendar/timegrid'\r\nimport interactionPlugin from '@fullcalendar/interaction';\r\nimport {\r\n    format as dfnsFormat, isToday as dfnsIsToday,\r\n    startOfWeek as dfnsStartOfWeek, endOfWeek as dfnsEndOfWeek,\r\n    isSameDay as dfnsIsSameDay, isFuture as dfnsIsFuture,\r\n    addMinutes as dfnsAddMinutes, parseISO as dfnsParseISO\r\n} from 'date-fns'\r\nimport dfnsITLocale from 'date-fns/locale/it'\r\n// import '@fullcalendar/core/main.css'\r\n// import '@fullcalendar/timegrid/main.css'\r\nimport './StrutturaCalendar.css'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { StruttureEventiAPI } from '../../api/strutture.eventi.api';\r\n\r\nconst _logger = log.getLogger(\"StrutturaCalendarView\");\r\n\r\n\r\nexport default (props) => {\r\n    const idStruttura = props.idStruttura ?? -1;\r\n    const idLocation = props.idLocation ?? -1;\r\n    const urlRoute = props.urlRoute;\r\n    const history = useHistory();\r\n    const [periodo, setPeriodo] = useState(props.periodo ??\r\n    {\r\n        startDate: dfnsStartOfWeek(new Date(), { weekStartsOn: 1 }),\r\n        endDate: dfnsEndOfWeek(new Date(), { weekStartsOn: 1 })\r\n    });\r\n\r\n    const [eventi, setEventi] = useState([]);\r\n    const DEFAULT_EVENT_COLOR = '#'\r\n\r\n    useEffect(() => {\r\n        _logger.debug(`StrutturaCalendarView->useEffect(idStruttura: ${idStruttura}, idLocation: ${idLocation}), periodo: ${JSON.stringify(periodo)}`);\r\n        async function fetchData(periodo) {\r\n            _logger.debug(\"StrutturaCalendarView->fetchData()\");\r\n            const data = await StruttureEventiAPI.FetchEventiAsync(idStruttura, idLocation, periodo.startDate, periodo.endDate);\r\n            //Convertiamo gli Schedules in oggetti gestibili dal calendario\r\n            if (data && data.length > 0) {\r\n                let ev = data.map((value, index) => {\r\n                    const r = {\r\n                        id: value.id,\r\n                        start: value.dataOraInizio,\r\n                        end: dfnsAddMinutes(dfnsParseISO(value.dataOraInizio), value.durata),\r\n                        title: value.title,\r\n                        allDay: false\r\n                    }\r\n                    _logger.debug(`Evento [${value.id}]: ${JSON.stringify(r)} \\r\\n value:${JSON.stringify(value)}`);\r\n                    return r;\r\n                });\r\n                setEventi(ev);\r\n            } else {\r\n                setEventi([])\r\n            };\r\n        }\r\n        if (idStruttura && idStruttura > 0 && idLocation && idLocation > 0) {\r\n            fetchData(periodo);\r\n        }\r\n    }, [idStruttura, idLocation, periodo]);\r\n\r\n    const columnHeaderHtml = (date) => {\r\n        //_logger.debug(`StrutturaCalendarAdmin->columnHeaderHtml(${date}) - ${typeof date}- ${date instanceof Date}`);\r\n        var result = \"<div class='rd2-cal-header-dayname'>\" + dfnsFormat(date, \"eee\", { locale: dfnsITLocale }).toUpperCase() + \"</div><div class='rd2-cal-header-daynum\"\r\n        //Per il giorno corrente applichiamo una classe speciale\r\n        if (dfnsIsToday(date)) {\r\n            result += \" rd2-cal-header-daynum-current\"\r\n        }\r\n        result += \"'>\" + dfnsFormat(date, 'd') + \"</div>\";\r\n        return {html: result}  ;\r\n    }\r\n\r\n    const handleDataChange = (info) => {\r\n        _logger.debug(`StrutturaCalendarView->handleDataChange(${info.view.currentStart} - ${info.view.currentEnd})`);\r\n        if (!info || !info.view) return;\r\n        const newPeriodo = {\r\n            startDate: info.view.currentStart,\r\n            endDate: info.view.currentEnd\r\n        }\r\n        if (!dfnsIsSameDay(periodo.startDate, newPeriodo.startDate)) {\r\n            _logger.debug(`StrutturaCalendarView->handleDataChange->setPeriodo(${JSON.stringify(newPeriodo)})`);\r\n            setPeriodo(newPeriodo);\r\n        }\r\n    }\r\n\r\n    const handleDateClick = (dateClickInfo) => {\r\n        _logger.debug(`StrutturaCalendarView->handleDateClick()`);\r\n        const url = `/${urlRoute}/eventi/new?date=${dateClickInfo.dateStr}&allDay=${dateClickInfo.allDay}&lid=${idLocation}`;\r\n        _logger.debug(`StrutturaCalendarView->handleDateClick() -> Redirect to: ${url}`);\r\n        if (dfnsIsFuture(dateClickInfo.date)) {\r\n            //Redirect alla pagina di nuovo evento\r\n            history.push(url);\r\n        }\r\n    }\r\n\r\n    const handleEventClick = (eventClickInfo) => {\r\n        _logger.debug(`StrutturaCalendarView->handleEventClick()`);\r\n        const url = `/${urlRoute}/eventi/${eventClickInfo.event.id}`;\r\n        _logger.debug(`StrutturaCalendarView->handleDateClick() -> Redirect to: ${url}`);\r\n        //Redirect alla pagina di edit evento\r\n        history.push(url);\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n            <FullCalendar\r\n                initialView=\"timeGridWeek\"\r\n                initialDate={periodo.startDate}\r\n                plugins={[dayGridPlugin, interactionPlugin]}\r\n                headerToolbar={{\r\n                    left: 'today',\r\n                    center: 'title',\r\n                    right: 'prev,next'\r\n                }}\r\n                locale={itLocale}\r\n                weekends={true}\r\n                slotDuration=\"01:00:00\"\r\n                slotLabelInterval=\"01:00\"\r\n                //timeGridEventMinHeight={25} //removed in v5\r\n                nowIndicator={false}\r\n                allDaySlot={false}\r\n\r\n                contentHeight=\"auto\"\r\n                slotMinTime=\"00:00\" //TODO: Leggere da impostazioni struttura\r\n                slotMaxTime=\"24:00\" //TODO: Leggere da impostazioni struttura\r\n                //Determina le data \"valide\", quelle fuori dal range sono in grigio\r\n                //Non è utilizzabile in questo contesto perché devono essere visibili anche l edate passate\r\n                // ==> gestiamo a livello di click la disabilitazione di creazione di eventi passati\r\n                //validRange={{start:new Date()}}\r\n\r\n                //columnHeaderHtml={columnHeaderHtml}\r\n                dayHeaderContent={(args)=> columnHeaderHtml(args?.date)}\r\n                datesSet={handleDataChange}\r\n\r\n                dateClick={handleDateClick}\r\n                eventClick={handleEventClick}\r\n\r\n                events={eventi}\r\n            >\r\n            </FullCalendar>\r\n        </Fragment>\r\n    );\r\n\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\config.js",["508"],"export default  {\r\n    MockedAPI: false,\r\n    //APIServer: \"https://localhost:44346\",\r\n    APIServer: \"https://ready2doapi.azurewebsites.net\",\r\n    BaseAPIPath: \"https://ready2doapi.azurewebsites.net/api\",\r\n    //BaseAPIPath: \"https://localhost:44346/api\",\r\n    AzureB2COptions: {\r\n        auth: {\r\n          //authority: 'https://login.microsoftonline.com/tfp/ready2do.onmicrosoft.com/B2C_1_SigninSignup',\r\n          authority: 'https://ready2do.b2clogin.com/ready2do.onmicrosoft.com/oauth2/v2.0/authorize?p=B2C_1_SigninSignup',\r\n          clientId: '2f7c5099-8cf6-4cc3-a601-6e8afdac86f7',\r\n          //redirectUri: 'https://localhost:44343/'\r\n            redirectUri: 'https://ready2do.azurewebsites.net'\r\n        },\r\n        cache: {\r\n          cacheLocation: \"localStorage\",\r\n          storeAuthStateInCookie: true\r\n        }\r\n      },\r\n      AzureB2CAuthenticationParameters: {\r\n        scopes: [\r\n          'https://ready2do.onmicrosoft.com/api/api_all'\r\n        ]\r\n    },\r\n    GoogleAPI:{\r\n      MapsKey:\"AIzaSyB3QBIUnHrigeqjjnEmwZn717ixOCcMYUw\",\r\n      Libraries: ['places']\r\n    }\r\n}\r\n","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\applicationInsights.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\api\\apiUtils.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\api\\strutture.images.api.mock.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\commons\\sidenav\\R2DSideNavHeader.js",["509"],"import React from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { shallowEqual, useSelector } from 'react-redux'\r\nimport { FormControl, Select, Avatar } from '@material-ui/core';\r\nimport { UserSelectors } from \"../../../store/selectors/user.selectors\";\r\n//import { changeStrutturaCorrente} from '../../../store/actions/user.actions'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root:{\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        width: '100%',\r\n        height: '160px',\r\n        backgroundColor: '#636363',\r\n    },\r\n    formControl: {\r\n      margin: theme.spacing(1),\r\n      minWidth: 120,\r\n    },\r\n    selectEmpty: {\r\n      marginTop: theme.spacing(2),\r\n    },\r\n    avatar: {\r\n        marginTop:'25px',\r\n        marginLeft:'25px',\r\n        width: theme.spacing(7),\r\n        height: theme.spacing(7),\r\n        color:'black',\r\n        backgroundColor:'#FFFFFF'\r\n    }\r\n  }));\r\n\r\n  export default (props) =>  {\r\n    const classes = useStyles();\r\n    const struttureGestite = useSelector(UserSelectors.getStruttureOwned, shallowEqual)\r\n    const idStrutturaCorrente= useSelector(UserSelectors.getIdStrutturaCorrente, shallowEqual)\r\n\r\n    return(\r\n        <div className={classes.root}>\r\n            <Avatar className={classes.avatar}>\r\n\r\n            </Avatar>\r\n            <FormControl className={classes.formControl}>\r\n                <Select\r\n                    native\r\n                    value={idStrutturaCorrente}\r\n                    //onChange={handleChangeStruttura}\r\n                    name=\"struttura\"\r\n                    className={classes.selectEmpty}>\r\n                    {\r\n                        //TODO: Sostituire l'Id della struttura con il nome quando sarà disponibile\r\n                    struttureGestite ? struttureGestite.map((struttura, index) => <option key={index} value={struttura.id}>{struttura.nome}</option>) \r\n                        : \"\"\r\n                    }\r\n                </Select>\r\n            </FormControl>\r\n        </div>\r\n    );\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\api\\strutture.api.mock.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\GiornoAperturaEdit.js",["510","511","512","513","514"],"import log from \"loglevel\";\r\nimport cloneDeep from \"lodash.clonedeep\";\r\nimport React, { useState, Fragment } from \"react\";\r\nimport {useSelector} from 'react-redux';\r\nimport PropTypes from \"prop-types\";\r\nimport { Grid, Typography, Select, MenuItem } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { TimePicker } from \"@material-ui/pickers\";\r\nimport dfnsFormat from \"date-fns/format\";\r\nimport parseISO from \"date-fns/parseISO\";\r\n\r\nconst _logger = log.getLogger(\"GiornoAperturaEdit\");\r\n\r\nconst GiornoAperturaEdit = (props) => {\r\n  const giorno = props.giorno || \"\";\r\n  const viewMode = props.viewMode || \"view\";\r\n  const [tipoOrario, setTipoOrario] = useState(props.tipoOrario ? props.tipoOrario : 2);\r\n  const changeHandler = props.onChangeHandler;\r\n  const [mattina, setOrarioMattina] = useState(props.mattina ? props.mattina : { inizio: null, fine: null });\r\n  const [pomeriggio, setOrarioPomeriggio] = useState(props.pomeriggio ? props.pomeriggio : { inizio: null, fine: null });\r\n\r\n  const isInEdit = () => {\r\n    return viewMode === \"edit\";\r\n  };\r\n\r\n  _logger.debug(`GiornoAperturaEdit->giorno: ${giorno} - mattina: ${JSON.stringify(props.mattina)} - pomeriggio: ${JSON.stringify(props.pomeriggio)}`);\r\n\r\n  function handleChangeTipoOrario(event) {\r\n    setTipoOrario(event.target.value);\r\n    handleChanges(giorno, mattina, pomeriggio, tipoOrario);\r\n  }\r\n\r\n  function handleChangeOra(newValue, isMattina, isInizio) {\r\n    let localMattina = cloneDeep(mattina);\r\n    let localPomeriggio = cloneDeep(pomeriggio);\r\n\r\n    if (isMattina) {\r\n      if (isInizio) {\r\n        localMattina.inizio = newValue;\r\n      } else {\r\n        localMattina.fine = newValue;\r\n      }\r\n      setOrarioMattina(localMattina);\r\n    } else {\r\n      if (isInizio) {\r\n        localPomeriggio.inizio = newValue;\r\n      } else {\r\n        localPomeriggio.fine = newValue;\r\n      }\r\n      setOrarioPomeriggio(localPomeriggio);\r\n    }\r\n    handleChanges(giorno, localMattina, localPomeriggio, tipoOrario);\r\n  }\r\n\r\n  function handleChanges(giorno, mattina, pomeriggio, tipoOrario) {\r\n    _logger.debug(`GiornoAperturaEdit->handleChanges - giorno: ${JSON.stringify(giorno)}, mattina: ${JSON.stringify(mattina)} - pomeriggio: ${JSON.stringify(pomeriggio)} - tipoOrario: ${tipoOrario}`);\r\n    if (changeHandler) {\r\n      let result = {\r\n        mattina,\r\n        pomeriggio,\r\n        tipoOrario,\r\n      };\r\n      if (changeHandler) {\r\n        changeHandler(giorno, result);\r\n      }\r\n    }\r\n  }\r\n\r\n  function decodeTipoOrario(idTipoOrario) {\r\n    switch (idTipoOrario) {\r\n      case 1:\r\n        return \"Spezzato\";\r\n      case 2:\r\n        return \"Continuato\";\r\n      case 3:\r\n        return \"Solo Mattina\";\r\n      case 4:\r\n        return \"Solo Pomeriggio\";\r\n      case 5:\r\n        return \"Chiuso\";\r\n      default:\r\n        return \"Sconosciuto\";\r\n    }\r\n  }\r\n\r\n  function formatTime(date) {\r\n    _logger.debug(`formatTime: Tentativo di conversione del valore [${JSON.stringify(date)}] in una stringa...`);\r\n    if (date && typeof date === \"string\") {\r\n      const d = date.length > 8 ? parseISO(date) : parseISO(\"2020-01-01T\" + date);\r\n      _logger.debug(`formatTime: Data ricostruita: [${JSON.stringify(d)}]`);\r\n      return dfnsFormat(d, \"HH:mm\");\r\n    } else {\r\n      return \"-\";\r\n    }\r\n  }\r\n\r\n  function parseTime(date) {\r\n    return date ? parseISO(\"2020-01-01T\" + date) : null;\r\n  }\r\n\r\n  /** Tenta di converteri il valore in input in una Date se è una stringa, assumendo che contenga solo l'ora nel formato HH:mm */\r\n  const ensureDate = (val) => {\r\n    _logger.debug(`ensureDate: Tentativo di conversione del valore [${JSON.stringify(val)}] in una data...`);\r\n    if (!val) return null;\r\n    if (val instanceof Date) return val;\r\n    let d = \"2020-01-01T\" + (val.length < 7 ? val + \":00\" : val); //assumiamo che sia una stringa con l'ora\r\n    _logger.debug(`ensureDate: Tentativo di conversione del valore [${d}] in una data...`);\r\n    return parseISO(d);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid item xs={3}>\r\n        {isInEdit() ? (\r\n          <Select value={tipoOrario} onChange={handleChangeTipoOrario}>\r\n            <MenuItem value=\"Spezzato\">Spezzato</MenuItem>\r\n            <MenuItem value=\"Continuato\">Continuato</MenuItem>\r\n            <MenuItem value=\"Mattina\">Solo Mattina</MenuItem>\r\n            <MenuItem value=\"Pomeriggio\">Solo Pomeriggio</MenuItem>\r\n            <MenuItem value=\"Chiuso\">Chiuso</MenuItem>\r\n          </Select>\r\n        ) : (\r\n          <Typography>{tipoOrario}</Typography>\r\n        )}\r\n      </Grid>\r\n      <Grid item xs={1}>\r\n        {isInEdit() ? (\r\n          <TimePicker clearable autoOk ampm={false} value={ensureDate(mattina.inizio)} onChange={(value) => handleChangeOra(value, true, true)} />\r\n        ) : (\r\n          <Typography variant=\"h6\">{formatTime(mattina.inizio)}</Typography>\r\n        )}\r\n      </Grid>\r\n      <Grid item xs={1}>\r\n        {isInEdit() ? (\r\n          <TimePicker clearable autoOk ampm={false} value={ensureDate(mattina.fine)} onChange={(value) => handleChangeOra(value, true, false)} />\r\n        ) : (\r\n          <Typography variant=\"h6\">{formatTime(mattina.fine)}</Typography>\r\n        )}\r\n      </Grid>\r\n      <Grid item xs={1}></Grid>\r\n      <Grid item xs={1}>\r\n        {isInEdit() ? (\r\n          <TimePicker clearable autoOk ampm={false} value={ensureDate(pomeriggio.inizio)} onChange={(value) => handleChangeOra(value, false, true)} />\r\n        ) : (\r\n          <Typography variant=\"h6\">{formatTime(pomeriggio.inizio)}</Typography>\r\n        )}\r\n      </Grid>\r\n      <Grid item xs={1}>\r\n        {isInEdit() ? (\r\n          <TimePicker clearable autoOk ampm={false} value={ensureDate(pomeriggio.fine)} onChange={(value) => handleChangeOra(value, false, false)} />\r\n        ) : (\r\n          <Typography variant=\"h6\">{formatTime(pomeriggio.fine)}</Typography>\r\n        )}\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default GiornoAperturaEdit;\r\n","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\dettaglio-utente\\PrenotazioniUtenteSection.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\dettaglio-utente\\CertificatiUtenteSection.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\dettaglio-utente\\AbbonamentiUtenteSection.js",["515","516"],"import {\r\n    Box,\r\n    Fab,\r\n    Fade,\r\n    makeStyles,\r\n    Paper,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport log from 'loglevel';\r\nimport React, { Fragment, useState } from 'react';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport AbbonamentiUtenteList from './AbbonamentiUtenteList';\r\nimport AbbonamentiUtenteAdd from './AbbonamentoUtenteAdd';\r\n\r\nconst _logger = log.getLogger('AbbonamentiUtenteSection');\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        padding: theme.spacing(1),\r\n        margin: theme.spacing(4, 0, 0, 0),\r\n        minHeight: 130\r\n    },\r\n    headerTitle: {\r\n        flexGrow: 1,\r\n        justifyContent: 'center',\r\n        textAlign: 'center',\r\n    },\r\n    fabAdd:{\r\n        float: 'right',\r\n        marginRight: '20px'\r\n        // right:'10px'\r\n    }\r\n}));\r\n\r\nconst AbbonamentiUtenteSection = (props) => {\r\n    const idStruttura = props.idStruttura;\r\n    const idUtente = props.idUtente;\r\n    const abbonamenti = props.abbonamenti;\r\n    const reloadHandler = props.reloadHandler;\r\n    const classes = useStyles();\r\n\r\n    const [editMode, setEditMode] = useState(false);\r\n    const [abbonamentoSelezionato, setAbbonamentoSelezionato] = useState(null);\r\n\r\n    _logger.debug(`AbbonamentiUtenteSection -> idStruttura: ${idStruttura}, idUtente: ${idUtente}`);\r\n\r\n    const handleEditAbbonamento = (idAbbonamento) => {\r\n        if (!idAbbonamento) { return; }\r\n        let abbonamento = abbonamenti?.find(a => a.id === idAbbonamento);\r\n        setAbbonamentoSelezionato(abbonamento);\r\n        setEditMode(true);\r\n    }\r\n\r\n    const handleAbbonamentiChange = ()=>{\r\n        setEditMode(false);\r\n        if(reloadHandler){reloadHandler();}\r\n    }\r\n\r\n    return (\r\n        <Paper className={classes.root}>\r\n             <Box className={classes.headerTitle}>\r\n                <Typography variant=\"h6\">Abbonamenti</Typography>\r\n                {!editMode ? \r\n                    <Fab color=\"primary\" size=\"small\" aria-label=\"add\"\r\n                        className={classes.fabAdd}\r\n                        onClick={(e)=>{setAbbonamentoSelezionato(null); setEditMode(!editMode); _logger.debug(`editMode: ${editMode}`)}}>  \r\n                        <AddIcon />\r\n                        </Fab> : \"\" }\r\n            </Box>\r\n            \r\n            \r\n            {!editMode ? \r\n                <AbbonamentiUtenteList idStruttura={idStruttura} idUtente={idUtente} abbonamenti={abbonamenti} onChangeHandler={handleAbbonamentiChange} onEditAbbonamento={handleEditAbbonamento}/> :\r\n                <AbbonamentiUtenteAdd idStruttura={idStruttura} idUtente={idUtente} abbonamentoUtente={abbonamentoSelezionato} \r\n                                    onCancelHandler={()=>{setEditMode(false);}}\r\n                                    onChangeHandler={handleAbbonamentiChange}/>\r\n            }              \r\n        </Paper>\r\n    )\r\n\r\n}\r\n\r\nexport default AbbonamentiUtenteSection;","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\utente\\UtenteProfiloEdit.js",["517","518","519"],"import log from 'loglevel';\r\nimport React, { Fragment } from 'react'\r\nimport { Formik, ErrorMessage, Form } from 'formik'\r\nimport { UsersAPI } from '../../api/users.api'\r\nimport { Grid, Button, makeStyles, TextField, Typography, Box, Paper } from '@material-ui/core';\r\nimport R2DLoader from '../commons/R2DLoader';\r\n\r\nconst _logger = log.getLogger('UtenteProfiloEdit');\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        minHeight: '380px',\r\n        position: \"relative\",\r\n        marginBottom: \"20px\"\r\n    },\r\n    form: {\r\n        padding: '20px'\r\n    },\r\n    btnSalva: {\r\n        backgroundColor: \"#E31F4F\",\r\n        color: \"white\",\r\n        margin: 'auto',\r\n    },\r\n    errorMessage: {\r\n        color: \"red\",\r\n        fontSize: \"0.7rem\"\r\n    }\r\n}));\r\n\r\nexport default (props) => {\r\n    const classes = useStyles();\r\n    const [viewMode, setViewMode] = React.useState('View');\r\n    const [isLoading, setIsLoading] = React.useState(true);\r\n    const [profilo, setProfilo] = React.useState(null);\r\n\r\n\r\n    //Recuperiamo tutti i dati necessari per la pagina (Profilo + Clienti + Abbonamenti)\r\n    React.useEffect(() => {\r\n        //const fetchOperations = [];\r\n        async function fetchProfiloUtente() {\r\n            const data = await UsersAPI.GetCurrentUserProfileAsync()\r\n            _logger.debug(`UtenteProfiloEdit->fetchProfiloUtente() - data: ${JSON.stringify(data)}`);\r\n            setProfilo(data);\r\n            setIsLoading(false);\r\n        }\r\n        // fetchOperations.push(fetchProfiloUtente());\r\n        // fetchOperations.push(fetchClientiFollowed());\r\n        // fetchOperations.push(fetchAbbonamenti());\r\n        // Promise.all(fetchOperations).then(setIsLoading(false));\r\n        fetchProfiloUtente();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n\r\n    const isFetchingInProgress = () => {\r\n        return isLoading;\r\n    }\r\n\r\n    const isViewMode = () => {\r\n        const result = viewMode === \"View\";\r\n        return result;\r\n    }\r\n\r\n    function renderForm() {\r\n\r\n        const handleFormSubmmit = async (values, actions) => {\r\n            _logger.debug(`UtenteProfiloEdit->FormSubmit() - values: ${JSON.stringify(values)}`);\r\n            await UsersAPI.SaveUserProfiloAsync(values);\r\n            actions.setSubmitting(false); //NOTA: essendo async non è tecnicamente necessaria questa chiamata, la fa Formik implicitamente\r\n        }\r\n\r\n        const handleFormReset = async (values, actions) => {\r\n            //Ripristiniamo i valori iniziali, eliminando le modifiche\r\n            actions.resetForm();\r\n            //Switchiamo in View Mode\r\n            setViewMode('View');\r\n        }\r\n\r\n        const formValidateAsync = async (values) => {\r\n            const errors = {}\r\n            if (!values.nome) {\r\n                errors.nome = \"E' necessario specificare il nome\";\r\n            }\r\n            if (!values.cognome) {\r\n                errors.cognome = \"E' necessario specificare il cognome\";\r\n            }\r\n            if (!values.displayName) {\r\n                errors.displayName = \"E' necessario specificare il Nickname\";\r\n            }\r\n            if (!values.cognome) {\r\n                errors.cognome = \"E' necessario specificare il cognome\";\r\n            }\r\n            _logger.debug(`UtenteProfiloEdit->formValidateAsync() - errors: ${JSON.stringify(errors)}`);\r\n            return errors;\r\n        }\r\n\r\n\r\n        return (\r\n            <Formik\r\n                initialValues={profilo}\r\n                enableReinitialize={false}\r\n                onSubmit={handleFormSubmmit}\r\n                onReset={handleFormReset}\r\n                validate={formValidateAsync}\r\n            >\r\n                {\r\n                    (props, form) => (\r\n                        <Form onSubmit={props.handleSubmit} autoComplete=\"off\" className={classes.form}>\r\n                            <Grid container>\r\n                                <Grid item xs={4}>\r\n                                    <TextField name='nome'\r\n                                        label='Nome'\r\n                                        onChange={props.handleChange}\r\n                                        onBlur={props.handleBlur}\r\n                                        value={props.values.nome}\r\n                                        disabled={isViewMode()}\r\n                                        fullWidth\r\n                                        margin='normal'\r\n                                    />\r\n                                    <ErrorMessage className={classes.errorMessage} component=\"span\" name=\"nome\" />\r\n                                </Grid>\r\n                                <Grid item xs={8} />\r\n                                <Grid item xs={4}>\r\n                                    <TextField name='cognome'\r\n                                        label='Cognome'\r\n                                        onChange={props.handleChange}\r\n                                        onBlur={props.handleBlur}\r\n                                        value={props.values.cognome}\r\n                                        disabled={isViewMode()}\r\n                                        fullWidth\r\n                                        margin='normal'\r\n                                    />\r\n                                    <ErrorMessage className={classes.errorMessage} component=\"span\" name=\"cognome\" />\r\n                                </Grid>\r\n                                <Grid item xs={8} />\r\n                                <Grid item xs={4}>\r\n                                    <TextField name='displayName'\r\n                                        label='Nickname'\r\n                                        onChange={props.handleChange}\r\n                                        onBlur={props.handleBlur}\r\n                                        value={props.values.displayName}\r\n                                        disabled={isViewMode()}\r\n                                        fullWidth\r\n                                        margin='normal'\r\n                                    />\r\n                                    <ErrorMessage className={classes.errorMessage} component=\"span\" name=\"displayName\" />\r\n                                </Grid>\r\n                                <Grid item xs={8} />\r\n                                <Grid item xs={4}>\r\n                                    <TextField name='telephoneNumber'\r\n                                        label='Telefono Mobile'\r\n                                        onChange={props.handleChange}\r\n                                        onBlur={props.handleBlur}\r\n                                        value={props.values.telephoneNumber}\r\n                                        disabled={isViewMode()}\r\n                                        fullWidth\r\n                                        margin='normal'\r\n                                    />\r\n                                    <ErrorMessage className={classes.errorMessage} component=\"span\" name=\"telephoneNumber\" />\r\n                                </Grid>\r\n                                <Grid item xs={8} />\r\n                                <Grid item xs={12} style={{ textAlign: \"center\" }}>\r\n                                    {isViewMode() ?\r\n                                        <Button onClick={() => { setViewMode('Edit') }}>Modifica</Button>\r\n                                        :\r\n                                        <Fragment>\r\n                                            <Button size=\"large\" variant=\"contained\"\r\n                                                onClick={props.handleReset}\r\n                                                className={classes.btnSalva}>Annulla</Button>\r\n                                            <Button size=\"large\" variant=\"contained\"\r\n                                                type=\"submit\"\r\n                                                className={classes.btnSalva}>Salva</Button>\r\n                                        </Fragment>\r\n                                    }\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Form>\r\n                    )\r\n                }\r\n            </Formik>\r\n        )\r\n    }\r\n\r\n    return (\r\n        // isFetchingInProgress() ? <R2DLoader /> : (isViewMode() ? renderViewMode() : renderEditMode())\r\n        <Paper className={classes.root}>\r\n            {isFetchingInProgress() ? <R2DLoader /> : renderForm()}\r\n        </Paper>\r\n    )\r\n}","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\dettaglio-utente\\CertificatoUtenteAdd.js",[],"F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\dettaglio-utente\\PrenotazioniUtenteList.js",["520","521","522","523","524"],"import {\r\n    Button, makeStyles, Switch, Table,\r\n    TableBody, TableCell, TableContainer, TableHead, TableRow, Typography\r\n} from '@material-ui/core';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport log from 'loglevel';\r\nimport React, { Fragment } from 'react';\r\nimport { StruttureEventiAPI } from \"../../../api/strutture.eventi.api\";\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst _logger = log.getLogger('AbbonamentiUtente');\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        minHeight: \"600px\",\r\n        position: \"relative\"\r\n    },\r\n    table: {\r\n        minWidth: 650,\r\n    },\r\n});\r\nconst PrenotazioniUtenteList = (props) => {\r\n    const idStruttura = props.idStruttura;\r\n    const idUtente = props.idUtente;\r\n    const prenotazioni  = props.prenotazioni;\r\n    const onChangeHandler = props.onChangeHandler;\r\n    const onEditHandler = props.onEditHandler;\r\n    const classes = useStyles();\r\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n    \r\n    _logger.debug(`PrenotazioniUtenteList -> idStruttura: ${idStruttura}, idUtente: ${idUtente}, Prenotazioni: ${JSON.stringify(prenotazioni)}`);\r\n\r\n    const handleEditPrenotazione = (event, idPrenotazione) => {\r\n        //ATTENZIONE! L'Id può far riferimento a vari tipi di prenotazioni (confermate, non confermate, wl)\r\n        if(onEditHandler){onEditHandler(idPrenotazione);}\r\n    }\r\n\r\n    const handleDeletePrenotazione = async (kind, idEvento, idPrenotazione) => {\r\n\r\n        switch(kind){\r\n            case 'Confermato':\r\n                await StruttureEventiAPI.AnnullaPrenotazioneByAdminAsync (idStruttura, idEvento, idPrenotazione);\r\n                enqueueSnackbar('Prenotazione cancellata', {variant: \"success\"})\r\n                break;\r\n            case 'NonConfermato':\r\n                await StruttureEventiAPI.RifiutaAppuntamentoNonConfermatoByAdminAsync(idStruttura, idEvento, idPrenotazione);\r\n                enqueueSnackbar('Prenotazione cancellata', {variant: \"success\"})\r\n                break;\r\n            case 'WaitList':\r\n                enqueueSnackbar('Cancellazione dalla wait list non supportata', {variant: \"error\"})\r\n                break;\r\n        }\r\n        if(onChangeHandler){onChangeHandler(idPrenotazione);}\r\n    }\r\n    \r\n  \r\n\r\n    function renderNoData() {\r\n        return (\r\n            <Typography variant=\"h6\">Nessuna Prenotazione per l'utente</Typography>\r\n        )\r\n    }\r\n\r\n    function renderTable() {\r\n        return (\r\n            <TableContainer>\r\n                <Table className={classes.table} aria-label=\"Prenotazioni\">\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            <TableCell align=\"left\">Nome Lezione</TableCell>\r\n                            <TableCell align=\"left\">Data Prenotazione</TableCell>\r\n                            <TableCell align=\"left\">Data Lezione</TableCell>\r\n                            <TableCell align=\"left\">Stato</TableCell>\r\n                            <TableCell align=\"center\">Azioni</TableCell>\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        {prenotazioni.map(p => (\r\n                            <TableRow key={p.id}>\r\n                                <TableCell component=\"th\" scope=\"row\">{p.nome}</TableCell>\r\n                                <TableCell align=\"left\">{p.dataPrenotazione}</TableCell>\r\n                                <TableCell align=\"left\">{p.dataLezione}</TableCell>\r\n                                <TableCell align=\"left\">{p.stato}</TableCell>\r\n                                <TableCell align=\"right\">\r\n                                <Button startIcon={<DeleteIcon />} size=\"small\" variant=\"outlined\" color=\"secondary\" onClick={(event)=>{handleDeletePrenotazione(p.kind, p.idEvento, p.originalId)}} >\r\n                                        Elimina\r\n                                    </Button>\r\n                                    {/* <Button startIcon={<EditIcon />} size=\"small\" variant=\"outlined\" onClick={(event)=>{handleEditPrenotazione(event, p.id)}} >\r\n                                        Edit\r\n                                    </Button> */}\r\n\r\n                                </TableCell>\r\n                            </TableRow>\r\n                        ))}\r\n                    </TableBody>\r\n                </Table>\r\n            </TableContainer>\r\n        )\r\n    }\r\n       \r\n\r\n    return (\r\n        <Fragment>\r\n         {prenotazioni && prenotazioni.length > 0 ?renderTable() : renderNoData()}\r\n         </Fragment>\r\n    )    \r\n\r\n}\r\n\r\nexport default PrenotazioniUtenteList;","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\dettaglio-utente\\CertificatiUtenteList.js",["525","526"],"import {\r\n    Button, makeStyles, Switch, Table,\r\n    TableBody, TableCell, TableContainer, TableHead, TableRow, Typography\r\n} from '@material-ui/core';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport log from 'loglevel';\r\nimport React, { Fragment } from 'react';\r\n\r\nconst _logger = log.getLogger('AbbonamentiUtente');\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        minHeight: \"600px\",\r\n        position: \"relative\"\r\n    },\r\n    table: {\r\n        minWidth: 650,\r\n    },\r\n});\r\nconst CertificatiUtenteList = (props) => {\r\n    const idStruttura = props.idStruttura;\r\n    const idUtente = props.idUtente;\r\n    const certificati = props.certificati;\r\n    const onChangeHandler = props.onChangeHandler;\r\n    const onEditHandler = props.onEditHandler;\r\n    const classes = useStyles();\r\n\r\n    _logger.debug(`CertificatiUtenteList -> idStruttura: ${idStruttura}, idUtente: ${idUtente}, Certificati: ${JSON.stringify(certificati)}`);\r\n\r\n    const handleEditCertificato = (event, idCertUtente) => {\r\n        if(onEditHandler){onEditHandler(idCertUtente);}\r\n    }\r\n  \r\n    \r\n    function renderNoData() {\r\n        return (\r\n            <Typography variant=\"h6\">Nessun Certificato per l'utente</Typography>\r\n        )\r\n    }\r\n\r\n    function renderTable() {\r\n        return (\r\n            <TableContainer>\r\n                <Table className={classes.table} aria-label=\"Certificati\">\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            <TableCell align=\"left\">Data Presentazione</TableCell>\r\n                            <TableCell align=\"left\">Data Scadenza</TableCell>\r\n                            <TableCell align=\"left\">Note</TableCell>\r\n                            <TableCell align=\"center\">Azioni</TableCell>\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        {certificati.map(c => (\r\n                            <TableRow key={c.id}>\r\n                                <TableCell component=\"th\" scope=\"row\">{c.dataPresentazione}</TableCell>\r\n                                <TableCell align=\"left\">{c.dataScadenza}</TableCell>\r\n                                <TableCell align=\"left\">{c.note}</TableCell>\r\n                                <TableCell align=\"right\">\r\n                                    <Button startIcon={<EditIcon />} size=\"small\" variant=\"outlined\" onClick={(event)=>{handleEditCertificato(event, c.id)}} >\r\n                                        Edit\r\n                                    </Button>\r\n\r\n                                </TableCell>\r\n                            </TableRow>\r\n                        ))}\r\n                    </TableBody>\r\n                </Table>\r\n            </TableContainer>\r\n        )\r\n    }\r\n       \r\n\r\n    return (\r\n        <Fragment>\r\n         {certificati && certificati.length > 0 ?renderTable() : renderNoData()}\r\n         </Fragment>\r\n    )    \r\n\r\n}\r\n\r\nexport default CertificatiUtenteList;","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\dettaglio-utente\\PrenotazioneUtenteAdd.js",["527","528","529","530","531","532","533","534","535","536","537","538","539","540"],"import {\r\n  Box,\r\n  Button,\r\n  FormControl,\r\n  FormControlLabel,\r\n  Grid,\r\n  Hidden,\r\n  InputLabel,\r\n  makeStyles,\r\n  MenuItem,\r\n  Select,\r\n  Switch,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport ClearIcon from \"@material-ui/icons/Clear\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport { Skeleton } from \"@material-ui/lab\";\r\nimport { DatePicker } from \"@material-ui/pickers\";\r\nimport add from \"date-fns/add\";\r\nimport isDate from \"date-fns/isDate\";\r\nimport parseISO from \"date-fns/parseISO\";\r\nimport format from \"date-fns/format\";\r\nimport isFuture from \"date-fns/isFuture\";\r\nimport log from \"loglevel\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Controller, useForm } from \"react-hook-form\";\r\nimport { StruttureEventiAPI } from \"../../../api/strutture.eventi.api\";\r\nimport { StruttureUtentiAPI } from \"../../../api/strutture.utenti.api\";\r\n\r\nconst _logger = log.getLogger(\"PrenotazioneUtenteAdd\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    marginTop: \"35px\",\r\n    paddingTop: \"15px\",\r\n    paddingBottom: \"15px\",\r\n  },\r\n  container: {\r\n    paddingTop: 15,\r\n  },\r\n  gridContainer: {\r\n    paddingLeft: 10,\r\n  },\r\n  formControlTipolezione: {\r\n    // marginTop: \"16px\",\r\n    // marginBottom: \"8px\",\r\n    minWidth: \"180px\",\r\n    width: \"90%\",\r\n  },\r\n  switchLabel: {\r\n    paddingTop: 10,\r\n  },\r\n  gridButtons: {\r\n    paddingTop: \"20px\",\r\n  },\r\n  btnSalva: {\r\n    margin: \"20px\",\r\n  },\r\n  btnAnnulla: {\r\n    margin: \"20px\",\r\n  },\r\n}));\r\n/***\r\n * Componente per l'aggiunta di una preonotazione per conto di un utente\r\n */\r\nconst PrenotazioneUtenteAdd = (props) => {\r\n  const classes = useStyles();\r\n  const idStruttura = props.idStruttura;\r\n  const idUtente = props.idUtente;\r\n  const prenotazioneUtente = props.prenotazioneUtente ?? {};\r\n  const abbonamenti = props.abbonamenti ?? [];\r\n  const onChangeHandler = props.onChangeHandler;\r\n  const onCancelHandler = props.onCancelHandler;\r\n  //const idTipoLezioneSelezionata = -1;\r\n\r\n  const initialValues = {\r\n    idTipoLezioneSelezionata: \"\", \r\n    giornoAppuntamento: \"\",\r\n    oraAppuntamento: \"\",\r\n    location: \"\",\r\n    abbonamentoUtente: \"\"\r\n  };\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    control,\r\n    reset,\r\n    setValue,\r\n    getValues,\r\n  } = useForm({\r\n    defaultValues: initialValues,\r\n  });\r\n\r\n\r\n  const [tipologieLezioni, setTipologieLezioni] = useState([]);\r\n  const [tipologieLezioniLoading, setTipologieLezioniLoading] = useState(true);\r\n\r\n  const [eventi, setEventi] = useState([]);\r\n  const [eventiLoading, setEventiLoading] = useState(true);\r\n\r\n  const [idTipoLezioneSelezionata, setIdTipoLezione] = useState(\"\");\r\n  const [giornoAppuntamento,setGiornoAppuntamento] = useState(\"\");\r\n  const [oraAppuntamento, setOraAppuntamento] = useState(\"\");\r\n  const [location, setLocation] = useState(\"\");\r\n  const [abbonamentoUtente, setAbbonamentoUtente] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    //Recuperiamo le Tipologie di Lezioni gestite dalla struttura\r\n    async function fetchTipologieLezioni(idStruttura) {\r\n      const data = await StruttureEventiAPI.FetchTipologieLezioniAsync(\r\n        idStruttura,\r\n        1,\r\n        500\r\n      );\r\n      _logger.debug(\r\n        `PrenotazioneUtenteAdd->useEffect()->FetchTipologieLezioniAsync(${idStruttura}) => ${JSON.stringify(\r\n          data\r\n        )}`\r\n      );\r\n      setTipologieLezioni(data ?? []);\r\n      setTipologieLezioniLoading(false);\r\n      setInitialValues();\r\n      reset(initialValues);\r\n    }\r\n    fetchTipologieLezioni(idStruttura);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [idStruttura, idUtente]);\r\n\r\n  useEffect(() => {\r\n    async function fetchLezioni(idStruttura, idTipoLezione) {\r\n      const data = await StruttureEventiAPI.FetchEventiAsync(\r\n        idStruttura,\r\n        null,\r\n        new Date(),\r\n        add(new Date(), { months: 1 }),\r\n        idTipoLezione,\r\n        false,\r\n        false,\r\n        1,\r\n        1000\r\n      );\r\n      _logger.debug(\r\n        `PrenotazioneUtenteAdd->useEffect()->fetchLezioni(${idStruttura}, ${idTipoLezione}) => ${JSON.stringify(\r\n          data\r\n        )}`\r\n      );\r\n      setEventi(data ?? []);\r\n      setEventiLoading(false);\r\n    }\r\n    if (idTipoLezioneSelezionata) {\r\n      fetchLezioni(idStruttura, idTipoLezioneSelezionata);\r\n    }\r\n  }, [idStruttura, idTipoLezioneSelezionata]);\r\n\r\n  const setInitialValues = ()=> {\r\n    _logger.debug(`setInitialValues - PRENOTAZIONE: ${JSON.stringify(prenotazioneUtente)}`);\r\n    if(prenotazioneUtente){\r\n\r\n      initialValues.idTipoLezioneSelezionata =  prenotazioneUtente.idTipoLezione ?? \"\";\r\n      initialValues.giornoAppuntamento = prenotazioneUtente.dataOraInizio?.substring(0,10) ?? \"\" ;\r\n      initialValues.oraAppuntamento = prenotazioneUtente.dataOraInizio?.substring(11,5) ?? \"\";\r\n      initialValues.location = prenotazioneUtente.idLocation ?? \"\";\r\n      initialValues.abbonamentoUtente = prenotazioneUtente. idAbbonamento ?? \"\";\r\n    }\r\n  }\r\n\r\n  const submitForm = async (data) => {\r\n    _logger.debug(`Submitting form: ${JSON.stringify(data)}`);\r\n    // data.id = abbonamentoUtente?.id;\r\n    // data.idCliente = idStruttura;\r\n    // data.userId = idUtente;\r\n    // data.importoPagato = data.saldato ? data.importo : 0;\r\n    // _logger.debug(`Aggiunta Abbonamento Utente - idStruttura:${idStruttura}, idUtente: ${idUtente}`);\r\n    // await StruttureUtentiAPI.AddUpdateAbbonamentoUtenteAsync(idStruttura, idUtente, data);\r\n    let eventoGiorno = eventi.filter((value, index, self)=> ((value.dataOraInizio.substring(0,16) === (giornoAppuntamento + 'T' + oraAppuntamento)) && (value?.location?.id )));\r\n    let idEvento = eventoGiorno[0].id;\r\n    let appuntamento = {\r\n      user : idUtente,\r\n      idAbbonamento : abbonamentoUtente,\r\n      evento : idEvento,\r\n      note : 'Appuntamento preso da BE'\r\n    }\r\n    await StruttureEventiAPI.PrenotaEventoAsync(idStruttura, idEvento, appuntamento)\r\n     reset();\r\n     onChangeHandler();\r\n  };\r\n\r\n  const renderDateEventi = () =>{\r\n    if(eventi && eventi.length){\r\n    //ATTENZIONE! Assumiamo chge la data sia in formato ISO e facciamo direttamente il substring senza parsarla\r\n    _logger.debug(`renderDateEventi - EVENTI : ${JSON.stringify(eventi)}`);\r\n    let date = eventi.filter((value, index, self) =>\r\n                              self.map(x => x.dataOraInizio.substring(0,10))\r\n                              .indexOf(value.dataOraInizio.substring(0,10)) == index);\r\n      return date.map((d) => (<MenuItem key={d.dataOraInizio.substring(0,10)} value={d.dataOraInizio.substring(0,10)}>{d.dataOraInizio.substring(0,10)}</MenuItem>));\r\n    }\r\n  }\r\n\r\n  const renderOraEventi = () =>{\r\n    //ATTENZIONE! Assumiamo chge la data sia in formato ISO e facciamo direttamente il substring senza parsarla\r\n    if(eventi && eventi.length && giornoAppuntamento){\r\n      let eventiGiorno = eventi.filter((value, index, self)=>value.dataOraInizio.substring(0,10) === giornoAppuntamento); //Consideriamo solo gli eventi del giorno selezionato\r\n      let orari= eventiGiorno.filter((value, index, self) =>\r\n                              self.map(x => format(parseISO(x.dataOraInizio),'HH:mm'))\r\n                                .indexOf(format(parseISO(value.dataOraInizio),'HH:mm')) == index);\r\n      return orari.map((d) => (<MenuItem key={format(parseISO(d.dataOraInizio),'HH:mm')} value={format(parseISO(d.dataOraInizio),'HH:mm')}>{format(parseISO(d.dataOraInizio),'HH:mm')}</MenuItem>));\r\n    }\r\n  }\r\n\r\n  const renderLocations = () =>{\r\n    if(eventi && eventi.length && giornoAppuntamento){\r\n      let eventiGiorno = eventi.filter((value, index, self)=>value.dataOraInizio.substring(0,10) === giornoAppuntamento); //Consideriamo solo gli eventi del giorno selezionato\r\n      let eventiOra = eventiGiorno.filter((value, index, self) => format(parseISO(value.dataOraInizio),'HH:mm') === oraAppuntamento);\r\n      let locations = eventiOra.filter((value, index, self) => \r\n                                        self.map(x => x.location?.id)\r\n                                        .indexOf(value.location?.id) === index);\r\n      return locations.map((d) => (<MenuItem key={d.location?.id} value={d.location?.id}>{d.location?.nome}</MenuItem>));\r\n    }\r\n  }\r\n\r\n  const renderAbbonamenti = ()=>{\r\n    return abbonamenti\r\n                ?.filter((value, index, self) => isFuture(parseISO(value.scadenza)))\r\n                ?.map((t) => (<MenuItem key={t.id} value={t.id}>{t.tipoAbbonamento?.nome}</MenuItem>))\r\n  }\r\n  \r\n  const handleTipoLezioneChanged = (idTipoLezione) => {\r\n    _logger.debug(`handleTipoLezioneChanged form: ${JSON.stringify(idTipoLezione)}`);\r\n    setIdTipoLezione(idTipoLezione);\r\n    setGiornoAppuntamento(''); //reset giorno\r\n    setOraAppuntamento('');\r\n    setLocation('');\r\n  };\r\n\r\nconst handleGiornoAppuntamentoChanged = (newDate)=>{\r\n  _logger.debug(`handleGiornoAppuntamentoChanged - newdate: ${JSON.stringify(newDate)}`);\r\n  setGiornoAppuntamento(newDate);\r\n}\r\n\r\nconst handleOraAppuntamentoChanged = (newTime)=>{\r\n  _logger.debug(`handleOraAppuntamentoChanged - newTime: ${JSON.stringify(newTime)}`);\r\n  setOraAppuntamento(newTime);\r\n}\r\n\r\nconst handleLocationChanged = (location)=>{\r\n  _logger.debug(`handleLocationChanged - location: ${JSON.stringify(location)}`);\r\n  setLocation(location);\r\n}\r\n\r\n  const renderForm = () => {\r\n    return (\r\n      <form onSubmit={handleSubmit(submitForm)} noValidate>\r\n        <Grid container className={classes.gridContainer}>\r\n          <Grid item xs={12} md={5}>\r\n            {/* TIPO LEZIONE */}\r\n            <FormControl className={classes.formControlTipolezione} required>\r\n              <InputLabel>Tipo Lezione</InputLabel>              \r\n              <Controller\r\n                render={({ onChange, onBlur, value, name, ref }) => (\r\n                  <Select\r\n                    onChange={(e) => {\r\n                      const newValue = e.target.value;\r\n                      handleTipoLezioneChanged(newValue);                      \r\n                      onChange(newValue);\r\n                    }}\r\n                    inputRef={ref}\r\n                    value={idTipoLezioneSelezionata}\r\n                  >\r\n                    {tipologieLezioni?.map((t) => (\r\n                      <MenuItem key={t.id} value={t.id}>\r\n                        {t.nome}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                )}\r\n                control={control}\r\n                name=\"idTipoLezioneSelezionata\"\r\n                rules={{\r\n                  required: \"E' necessario selezionare la tipologia di lezione\",\r\n                }}\r\n              />\r\n            </FormControl>\r\n          </Grid>\r\n          {/* DATA LEZIONE (DROPDOWN) */}\r\n          <Grid item xs={12} md={3}>\r\n            <FormControl className={classes.formControlTipolezione} required disabled={!(idTipoLezioneSelezionata)}>\r\n              <InputLabel>Giorno</InputLabel>              \r\n              <Controller\r\n                render={({ onChange, onBlur, value, name, ref }) => (\r\n                  <Select\r\n                    onChange={(e) => {\r\n                      const newValue = e.target.value;\r\n                      handleGiornoAppuntamentoChanged(newValue);\r\n                      onChange(newValue);\r\n                    }}\r\n                    inputRef={ref}\r\n                    value={giornoAppuntamento}\r\n                  >\r\n                    {renderDateEventi()}\r\n                    ))}\r\n                  </Select>\r\n                )}\r\n                control={control}\r\n                value={giornoAppuntamento}\r\n                name=\"giornoAppuntamento\"\r\n                rules={{\r\n                  required: \"Selezionare il giorno\",\r\n                }}\r\n              />\r\n            </FormControl>\r\n          </Grid>\r\n          <Hidden mdDown>\r\n            <Grid item md={1} />\r\n          </Hidden>\r\n          {/* ORA LEZIONE (DROPDOWN) */}\r\n          <Grid item xs={12} md={3}>\r\n            <FormControl className={classes.formControlTipolezione} required disabled={!(giornoAppuntamento)}>\r\n              <InputLabel>Ora</InputLabel>              \r\n              <Controller\r\n                render={({ onChange, onBlur, value, name, ref }) => (\r\n                  <Select\r\n                    onChange={(e) => {\r\n                      const newValue = e.target.value;\r\n                      handleOraAppuntamentoChanged(newValue);\r\n                      onChange(newValue);\r\n                    }}\r\n                    inputRef={ref}\r\n                    value={oraAppuntamento}\r\n                  >\r\n                    {renderOraEventi()}\r\n                    ))}\r\n                  </Select>\r\n                )}\r\n                control={control}\r\n                value={oraAppuntamento}\r\n                name=\"oraAppuntamento\"\r\n                rules={{\r\n                  required: \"Selezionare l'ora\",\r\n                }}\r\n              />\r\n            </FormControl>\r\n          </Grid>\r\n          {/* LOCATION */}\r\n          <Grid item xs={12} md={3}>\r\n            <FormControl className={classes.formControlTipolezione} required disabled={!(giornoAppuntamento) || !(oraAppuntamento)}>\r\n              <InputLabel>Sala</InputLabel>              \r\n              <Controller\r\n                render={({ onChange, onBlur, value, name, ref }) => (\r\n                  <Select\r\n                    onChange={(e) => {\r\n                      const newValue = e.target.value;\r\n                      handleLocationChanged(newValue);\r\n                      onChange(newValue);\r\n                    }}\r\n                    inputRef={ref}\r\n                    value={location}\r\n                  >\r\n                    {renderLocations()}\r\n                    ))}\r\n                  </Select>\r\n                )}\r\n                control={control}\r\n                value={location}\r\n                name=\"location\"\r\n                rules={{\r\n                  required: \"Selezionare la sala\",\r\n                }}\r\n              />\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12} md={5}>\r\n            {/* ABBONAMENTO UTENE */}\r\n            <FormControl className={classes.formControlTipolezione} required>\r\n              <InputLabel>Abbonamento</InputLabel>              \r\n              <Controller\r\n                render={({ onChange, onBlur, value, name, ref }) => (\r\n                  <Select\r\n                    onChange={(e) => {\r\n                      const newValue = e.target.value;\r\n                      setAbbonamentoUtente(newValue);\r\n                      onChange(newValue);\r\n                    }}\r\n                    inputRef={ref}\r\n                    value={abbonamentoUtente}\r\n                  >\r\n                    {renderAbbonamenti()}\r\n                  </Select>\r\n                )}\r\n                control={control}\r\n                name=\"abbonamentoUtente\"\r\n                rules={{\r\n                  required: \"E' necessario selezionare un'abbonamento\",\r\n                }}\r\n              />\r\n            </FormControl>\r\n          </Grid>\r\n\r\n          <Grid item xs={12} style={{ textAlign: \"center\" }}>\r\n            <Box className={classes.gridButtons}>\r\n              <Button\r\n                size=\"small\"\r\n                variant=\"contained\"\r\n                type=\"submit\"\r\n                color=\"primary\"\r\n                startIcon={<SaveIcon />}\r\n                className={classes.btnSalva}\r\n              >\r\n                Salva\r\n              </Button>\r\n\r\n              <Button\r\n                size=\"small\"\r\n                variant=\"contained\"\r\n                onClick={(e) => {\r\n                  reset();\r\n                  if (onCancelHandler) {\r\n                    onCancelHandler();\r\n                  }\r\n                }}\r\n                color=\"secondary\"\r\n                startIcon={<ClearIcon />}\r\n                className={classes.btnAnnulla}\r\n              >\r\n                Annulla\r\n              </Button>\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </form>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Box className={classes.root} boxShadow={3}>\r\n      {tipologieLezioniLoading ? (\r\n        <Skeleton variant=\"text\" height={200} />\r\n      ) : (\r\n        renderForm()\r\n      )}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default PrenotazioneUtenteAdd;\r\n","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\dettaglio-utente\\AbbonamentoUtenteAdd.js",["541","542","543"],"import {\r\n    Box, Button, FormControl, FormControlLabel, Grid, Hidden, InputLabel, makeStyles,\r\n    MenuItem, Select, Switch,\r\n    TextField\r\n} from '@material-ui/core';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport { Skeleton } from '@material-ui/lab';\r\nimport { DatePicker } from '@material-ui/pickers';\r\nimport add from 'date-fns/add';\r\nimport isDate from 'date-fns/isDate';\r\nimport parseISO from 'date-fns/parseISO';\r\nimport log from 'loglevel';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Controller, useForm } from 'react-hook-form';\r\nimport { StruttureEventiAPI } from '../../../api/strutture.eventi.api';\r\nimport { StruttureUtentiAPI } from '../../../api/strutture.utenti.api';\r\n\r\nconst _logger = log.getLogger('AbbonamentiUtente');\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        marginTop: \"35px\",\r\n        paddingTop: \"15px\",\r\n        paddingBottom: \"15px\"\r\n    },\r\n    container: {\r\n        paddingTop: 15\r\n    },\r\n    gridContainer: {\r\n        paddingLeft: 10\r\n    },\r\n    formControlTipoAbbonamento: {\r\n        // marginTop: \"16px\",\r\n        // marginBottom: \"8px\",\r\n        minWidth: \"180px\",\r\n        width: \"90%\"\r\n    },\r\n    switchLabel: {\r\n        paddingTop: 10\r\n    },\r\n    gridButtons: {\r\n        paddingTop: \"20px\"\r\n    },\r\n    btnSalva: {\r\n        margin: '20px'\r\n    },\r\n    btnAnnulla: {\r\n        margin: '20px'\r\n    }\r\n}));\r\n/***\r\n * Componente per l'aggiunta di un nuovo abbonamento ad un Utente\r\n */\r\nconst AbbonamentiUtenteAdd = (props) => {\r\n    const classes = useStyles();\r\n    const idStruttura = props.idStruttura;\r\n    const idUtente = props.idUtente;\r\n    const abbonamentoUtente = props.abbonamentoUtente ?? {};\r\n    const onChangeHandler = props.onChangeHandler;\r\n\r\n    _logger.debug(`onChangeHandler: ${onChangeHandler}`);\r\n\r\n    const onCancelHandler = props.onCancelHandler;\r\n\r\n    const initialValues = {\r\n        idTipoAbbonamento: '', //Lo valoriziamo dopo che ritorna la chiamata all'API altrimenti otteniamo un warning perché non sono ancora stati caricati i valori della select\r\n        dataInizioValidita: abbonamentoUtente?.dataInizioValidita ?? null,\r\n        scadenza: abbonamentoUtente?.scadenza ?? null,\r\n        ingressiIniziali: abbonamentoUtente?.ingressiIniziali ?? '',\r\n        ingressiResidui: abbonamentoUtente?.ingressiResidui ?? '',\r\n        importo: abbonamentoUtente?.importo ?? '',\r\n        saldato: (abbonamentoUtente?.importo ?? 0) === (abbonamentoUtente?.importoPagato ?? 0)\r\n    };\r\n\r\n    _logger.debug(`initialValues: ${JSON.stringify(initialValues)}`);\r\n\r\n    const { register, handleSubmit, control, reset, setValue, getValues } = useForm({\r\n        defaultValues: initialValues\r\n    });\r\n\r\n    const [tipologieAbbonamenti, setTipologieAbbonamenti] = useState([]);\r\n    const [tipologieAbbonamentiLoading, setTipologieAbbonamentiLoading] = useState(true);\r\n\r\n    const [tipoAbbonamento, setTipoAbbonamento] = useState(abbonamentoUtente?.tipoAbbonamento ?? -1);\r\n    const [minDataInizioValidita, setMinDataInizioValidita] = useState(abbonamentoUtente?.dataInizioValidita ?? new Date());\r\n\r\n\r\n    useEffect(() => {\r\n        //Recuperiamo le Tipologie di Abbonamento previsti\r\n        async function fetchTipiAbbonamenti(idStruttura) {\r\n            const data = await StruttureEventiAPI.FetchTipologieAbbonamentiAsync(idStruttura, 1, 50);\r\n            _logger.debug(`AbbonamentiUtente->useEffect()->fetchTipiAbbonamenti(${idStruttura}) => ${JSON.stringify(data)}`);\r\n            setTipologieAbbonamenti(data ?? []);\r\n            setTipologieAbbonamentiLoading(false);\r\n            initialValues.idTipoAbbonamento = abbonamentoUtente?.tipoAbbonamento?.id ?? '';\r\n            reset(initialValues);\r\n        }\r\n        fetchTipiAbbonamenti(idStruttura);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [idStruttura, idUtente])\r\n\r\n    _logger.debug(`abbonamentoUtente: ${JSON.stringify(abbonamentoUtente)}`);\r\n\r\n    const submitForm = async (data) => {\r\n        _logger.debug(`Submitting form: ${JSON.stringify(data)}`)\r\n        data.id = abbonamentoUtente?.id;\r\n        data.idCliente = idStruttura;\r\n        data.userId = idUtente;\r\n        data.importoPagato = data.saldato ? data.importo : 0;\r\n        _logger.debug(`Aggiunta Abbonamento Utente - idStruttura:${idStruttura}, idUtente: ${idUtente}`);\r\n        await StruttureUtentiAPI.AddUpdateAbbonamentoUtenteAsync(idStruttura, idUtente, data);\r\n        reset();\r\n        onChangeHandler();\r\n    }\r\n\r\n    const handleTipoAbbonamentChanged = (event) => {\r\n        const idTipoAbb = event.target.value;\r\n        let tipoAbbonamento = tipologieAbbonamenti.find(item => item.id === idTipoAbb);\r\n        if (!tipoAbbonamento) {\r\n            _logger.warn(`Impossibile trovare il Tipo Abbonamento con Id: ${idTipoAbb}`);\r\n        }\r\n        const formDataInizio = getValues('inizioValidita');\r\n        let localDataInizio = formDataInizio ? (isDate(formDataInizio) ? formDataInizio : parseISO(formDataInizio)) : new Date();\r\n        setTipoAbbonamento(tipoAbbonamento);\r\n        if (!formDataInizio) {\r\n            setValue('inizioValidita', localDataInizio);\r\n        }\r\n        setValue('scadenza', add(localDataInizio, { months: tipoAbbonamento.durataMesi }));\r\n    }\r\n\r\n    const renderForm = () => {\r\n        return (\r\n            <form onSubmit={handleSubmit(submitForm)} noValidate>\r\n                <Grid container className={classes.gridContainer}>\r\n                    <Grid item xs={12} md={5}>\r\n                        <FormControl className={classes.formControlTipoAbbonamento} required>\r\n                            <InputLabel>Tipo Abbonamento</InputLabel>\r\n                            <Controller\r\n                                as={\r\n                                    <Select\r\n                                        onChange={handleTipoAbbonamentChanged}\r\n                                    >\r\n                                        {\r\n                                            tipologieAbbonamenti?.map(t => (<MenuItem key={t.id} value={t.id}>{t.nome}</MenuItem>))\r\n                                        }\r\n                                    </Select>\r\n                                }\r\n                                control={control}\r\n                                name=\"idTipoAbbonamento\"\r\n                                rules={{ required: \"E' necessario selezionare un tipo abbonamento\" }}\r\n                            />\r\n                        </FormControl>\r\n                    </Grid>\r\n                    <Grid item xs={12} md={3}>                      \r\n                        <Controller\r\n                                render={(props)=>(\r\n                                        <DatePicker\r\n                                            inputRef = {props.ref}\r\n                                            onChange = {props.onChange}\r\n                                            value = {props.value}\r\n                                            margin=\"dense\"\r\n                                            required\r\n                                            label='Inizio Validità'\r\n                                            format=\"dd MMMM yyyy\" />\r\n                                )}\r\n                                control={control}\r\n                                name=\"dataInizioValidita\"\r\n                                rules={{required:\"Inserire una data di Scadenza\"}} \r\n                        />\r\n                    </Grid>\r\n                    <Hidden mdDown>\r\n                        <Grid item md={1} />\r\n                    </Hidden>\r\n                    <Grid item xs={12} md={3}>\r\n                         <Controller\r\n                            render={(props)=>(\r\n                                    <DatePicker\r\n                                        inputRef = {props.ref}\r\n                                        onChange = {props.onChange}\r\n                                        value = {props.value}\r\n                                        margin=\"dense\"\r\n                                        required\r\n                                        label='Scadenza'\r\n                                        format=\"dd MMMM yyyy\" />\r\n                            )}\r\n                            control={control}\r\n                            name=\"scadenza\"\r\n                            onChange={([selected]) => selected}\r\n                            rules={{required:\"Inserire una data di Scadenza\"}} \r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={12} md={3}>\r\n                        <TextField name='ingressiIniziali'\r\n                            required\r\n                            label='Numero Ingressi'\r\n                            margin='dense'\r\n                            type=\"number\"\r\n                            inputRef={register({required:\"Inserire il numero di ingressi massimo (0 se non c'è un massimo)\"})}\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={12} md={3}>\r\n                        <TextField name='ingressiResidui'\r\n                            label='Ingressi Residui'\r\n                            margin='dense'\r\n                            type=\"number\"\r\n                            inputRef={register({required:\"Inserire il numero di ingressi residui (0 se non c'è un massimo)\"})}\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={12} md={3}>\r\n                        <TextField name='importo'\r\n                            label='Prezzo'\r\n                            margin='dense'\r\n                            type=\"number\"\r\n                            inputRef={register({required:\"Inserire il prezzo applicato per l'abbonamento\"})}\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={12} md={3}>\r\n                        <FormControlLabel\r\n                            className={classes.switchLabel}\r\n                            margin=\"dense\"\r\n                            control={\r\n                                <Switch\r\n                                    name=\"saldato\"\r\n                                    color=\"primary\"\r\n                                    inputRef={register}\r\n                                    //Il default value non funziona con gli switch, bisogna impostare esplicitamente il defaultChecked\r\n                                    defaultChecked={initialValues.saldato}\r\n                                />\r\n                            }\r\n                            label=\"Saldato\"\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={12} style={{ textAlign: \"center\" }}>\r\n                        <Box className={classes.gridButtons}>\r\n                            <Button size=\"small\" variant=\"contained\"\r\n                                type=\"submit\"\r\n                                color=\"primary\"\r\n                                startIcon={<SaveIcon />}\r\n                                className={classes.btnSalva}>Salva</Button>\r\n\r\n                            <Button size=\"small\" variant=\"contained\"\r\n                                onClick={(e) => { reset(); if (onCancelHandler) { onCancelHandler() } }}\r\n                                color=\"secondary\"\r\n                                startIcon={<ClearIcon />}\r\n                                className={classes.btnAnnulla}>Annulla</Button>\r\n\r\n                        </Box>\r\n                    </Grid>\r\n                </Grid>\r\n            </form>\r\n        )\r\n    }\r\n    return (\r\n        <Box className={classes.root} boxShadow={3}>\r\n            {tipologieAbbonamentiLoading ? <Skeleton variant=\"text\" height={200} /> : renderForm()}\r\n        </Box>\r\n    )\r\n\r\n}\r\n\r\n\r\nexport default AbbonamentiUtenteAdd;","F:\\Repos\\GIT\\Ready2Do\\PalestreGoGO\\Ready2Do\\ClientApp\\src\\components\\struttura\\dettaglio-utente\\AbbonamentiUtenteList.js",[],{"ruleId":"544","replacedBy":"545"},{"ruleId":"546","replacedBy":"547"},{"ruleId":"548","severity":1,"message":"549","line":19,"column":1,"nodeType":"550","endLine":41,"endColumn":3},{"ruleId":"551","severity":1,"message":"552","line":33,"column":17,"nodeType":"553","messageId":"554","endLine":33,"endColumn":20},{"ruleId":"551","severity":1,"message":"555","line":3,"column":25,"nodeType":"553","messageId":"554","endLine":3,"endColumn":38},{"ruleId":"551","severity":1,"message":"556","line":3,"column":40,"nodeType":"553","messageId":"554","endLine":3,"endColumn":49},{"ruleId":"548","severity":1,"message":"549","line":14,"column":1,"nodeType":"550","endLine":37,"endColumn":2},{"ruleId":"548","severity":1,"message":"549","line":25,"column":1,"nodeType":"550","endLine":53,"endColumn":2},{"ruleId":"548","severity":1,"message":"549","line":40,"column":1,"nodeType":"550","endLine":132,"endColumn":2},{"ruleId":"551","severity":1,"message":"557","line":10,"column":7,"nodeType":"553","messageId":"554","endLine":10,"endColumn":14},{"ruleId":"551","severity":1,"message":"558","line":1,"column":17,"nodeType":"553","messageId":"554","endLine":1,"endColumn":25},{"ruleId":"551","severity":1,"message":"559","line":16,"column":11,"nodeType":"553","messageId":"554","endLine":16,"endColumn":19},{"ruleId":"560","severity":1,"message":"561","line":33,"column":7,"nodeType":"562","endLine":33,"endColumn":22,"suggestions":"563"},{"ruleId":"548","severity":1,"message":"549","line":20,"column":1,"nodeType":"550","endLine":109,"endColumn":2},{"ruleId":"551","severity":1,"message":"564","line":1,"column":13,"nodeType":"553","messageId":"554","endLine":1,"endColumn":16},{"ruleId":"548","severity":1,"message":"549","line":7,"column":1,"nodeType":"550","endLine":29,"endColumn":2},{"ruleId":"548","severity":1,"message":"549","line":26,"column":1,"nodeType":"550","endLine":90,"endColumn":2},{"ruleId":"548","severity":1,"message":"549","line":9,"column":1,"nodeType":"550","endLine":21,"endColumn":2},{"ruleId":"548","severity":1,"message":"549","line":117,"column":1,"nodeType":"550","endLine":232,"endColumn":2},{"ruleId":"551","severity":1,"message":"565","line":3,"column":13,"nodeType":"553","messageId":"554","endLine":3,"endColumn":15},{"ruleId":"548","severity":1,"message":"549","line":27,"column":1,"nodeType":"550","endLine":242,"endColumn":2},{"ruleId":"551","severity":1,"message":"566","line":2,"column":38,"nodeType":"553","messageId":"554","endLine":2,"endColumn":46},{"ruleId":"551","severity":1,"message":"567","line":3,"column":45,"nodeType":"553","messageId":"554","endLine":3,"endColumn":55},{"ruleId":"551","severity":1,"message":"568","line":4,"column":39,"nodeType":"553","messageId":"554","endLine":4,"endColumn":53},{"ruleId":"548","severity":1,"message":"549","line":41,"column":1,"nodeType":"550","endLine":212,"endColumn":2},{"ruleId":"551","severity":1,"message":"569","line":49,"column":30,"nodeType":"553","messageId":"554","endLine":49,"endColumn":43},{"ruleId":"551","severity":1,"message":"566","line":2,"column":38,"nodeType":"553","messageId":"554","endLine":2,"endColumn":46},{"ruleId":"551","severity":1,"message":"570","line":6,"column":17,"nodeType":"553","messageId":"554","endLine":6,"endColumn":21},{"ruleId":"551","severity":1,"message":"571","line":7,"column":5,"nodeType":"553","messageId":"554","endLine":7,"endColumn":15},{"ruleId":"548","severity":1,"message":"549","line":27,"column":1,"nodeType":"550","endLine":113,"endColumn":2},{"ruleId":"551","severity":1,"message":"566","line":2,"column":38,"nodeType":"553","messageId":"554","endLine":2,"endColumn":46},{"ruleId":"551","severity":1,"message":"570","line":5,"column":22,"nodeType":"553","messageId":"554","endLine":5,"endColumn":26},{"ruleId":"551","severity":1,"message":"571","line":5,"column":119,"nodeType":"553","messageId":"554","endLine":5,"endColumn":129},{"ruleId":"551","severity":1,"message":"572","line":5,"column":138,"nodeType":"553","messageId":"554","endLine":5,"endColumn":154},{"ruleId":"548","severity":1,"message":"549","line":24,"column":1,"nodeType":"550","endLine":112,"endColumn":2},{"ruleId":"551","severity":1,"message":"573","line":3,"column":24,"nodeType":"553","messageId":"554","endLine":3,"endColumn":29},{"ruleId":"548","severity":1,"message":"549","line":40,"column":1,"nodeType":"550","endLine":278,"endColumn":2},{"ruleId":"551","severity":1,"message":"569","line":48,"column":30,"nodeType":"553","messageId":"554","endLine":48,"endColumn":43},{"ruleId":"551","severity":1,"message":"566","line":2,"column":38,"nodeType":"553","messageId":"554","endLine":2,"endColumn":46},{"ruleId":"551","severity":1,"message":"570","line":5,"column":22,"nodeType":"553","messageId":"554","endLine":5,"endColumn":26},{"ruleId":"551","severity":1,"message":"574","line":5,"column":111,"nodeType":"553","messageId":"554","endLine":5,"endColumn":117},{"ruleId":"548","severity":1,"message":"549","line":22,"column":1,"nodeType":"550","endLine":109,"endColumn":2},{"ruleId":"551","severity":1,"message":"573","line":3,"column":24,"nodeType":"553","messageId":"554","endLine":3,"endColumn":29},{"ruleId":"551","severity":1,"message":"575","line":7,"column":10,"nodeType":"553","messageId":"554","endLine":7,"endColumn":24},{"ruleId":"551","severity":1,"message":"576","line":7,"column":26,"nodeType":"553","messageId":"554","endLine":7,"endColumn":36},{"ruleId":"548","severity":1,"message":"549","line":38,"column":1,"nodeType":"550","endLine":215,"endColumn":3},{"ruleId":"551","severity":1,"message":"569","line":46,"column":28,"nodeType":"553","messageId":"554","endLine":46,"endColumn":41},{"ruleId":"548","severity":1,"message":"549","line":9,"column":1,"nodeType":"550","endLine":21,"endColumn":2},{"ruleId":"551","severity":1,"message":"577","line":3,"column":10,"nodeType":"553","messageId":"554","endLine":3,"endColumn":15},{"ruleId":"551","severity":1,"message":"557","line":7,"column":7,"nodeType":"553","messageId":"554","endLine":7,"endColumn":14},{"ruleId":"548","severity":1,"message":"549","line":14,"column":1,"nodeType":"550","endLine":24,"endColumn":2},{"ruleId":"551","severity":1,"message":"578","line":15,"column":11,"nodeType":"553","messageId":"554","endLine":15,"endColumn":18},{"ruleId":"551","severity":1,"message":"570","line":3,"column":49,"nodeType":"553","messageId":"554","endLine":3,"endColumn":53},{"ruleId":"551","severity":1,"message":"579","line":4,"column":8,"nodeType":"553","messageId":"554","endLine":4,"endColumn":16},{"ruleId":"551","severity":1,"message":"576","line":14,"column":10,"nodeType":"553","messageId":"554","endLine":14,"endColumn":20},{"ruleId":"551","severity":1,"message":"580","line":45,"column":12,"nodeType":"553","messageId":"554","endLine":45,"endColumn":32},{"ruleId":"551","severity":1,"message":"581","line":45,"column":34,"nodeType":"553","messageId":"554","endLine":45,"endColumn":57},{"ruleId":"551","severity":1,"message":"582","line":47,"column":12,"nodeType":"553","messageId":"554","endLine":47,"endColumn":21},{"ruleId":"551","severity":1,"message":"583","line":47,"column":23,"nodeType":"553","messageId":"554","endLine":47,"endColumn":35},{"ruleId":"551","severity":1,"message":"584","line":48,"column":12,"nodeType":"553","messageId":"554","endLine":48,"endColumn":24},{"ruleId":"551","severity":1,"message":"585","line":51,"column":23,"nodeType":"553","messageId":"554","endLine":51,"endColumn":35},{"ruleId":"551","severity":1,"message":"577","line":2,"column":10,"nodeType":"553","messageId":"554","endLine":2,"endColumn":15},{"ruleId":"551","severity":1,"message":"586","line":2,"column":17,"nodeType":"553","messageId":"554","endLine":2,"endColumn":27},{"ruleId":"551","severity":1,"message":"587","line":2,"column":58,"nodeType":"553","messageId":"554","endLine":2,"endColumn":62},{"ruleId":"548","severity":1,"message":"549","line":42,"column":1,"nodeType":"550","endLine":202,"endColumn":2},{"ruleId":"551","severity":1,"message":"588","line":12,"column":3,"nodeType":"553","messageId":"554","endLine":12,"endColumn":17},{"ruleId":"551","severity":1,"message":"589","line":26,"column":10,"nodeType":"553","messageId":"554","endLine":26,"endColumn":12},{"ruleId":"548","severity":1,"message":"549","line":74,"column":1,"nodeType":"550","endLine":390,"endColumn":3},{"ruleId":"551","severity":1,"message":"590","line":75,"column":9,"nodeType":"553","messageId":"554","endLine":75,"endColumn":34},{"ruleId":"551","severity":1,"message":"591","line":76,"column":9,"nodeType":"553","messageId":"554","endLine":76,"endColumn":31},{"ruleId":"551","severity":1,"message":"592","line":82,"column":21,"nodeType":"553","messageId":"554","endLine":82,"endColumn":30},{"ruleId":"551","severity":1,"message":"593","line":106,"column":10,"nodeType":"553","messageId":"554","endLine":106,"endColumn":27},{"ruleId":"551","severity":1,"message":"594","line":3,"column":10,"nodeType":"553","messageId":"554","endLine":3,"endColumn":18},{"ruleId":"548","severity":1,"message":"549","line":35,"column":1,"nodeType":"550","endLine":138,"endColumn":3},{"ruleId":"551","severity":1,"message":"595","line":8,"column":7,"nodeType":"553","messageId":"554","endLine":8,"endColumn":18},{"ruleId":"551","severity":1,"message":"596","line":16,"column":12,"nodeType":"553","messageId":"554","endLine":16,"endColumn":36},{"ruleId":"551","severity":1,"message":"597","line":18,"column":12,"nodeType":"553","messageId":"554","endLine":18,"endColumn":39},{"ruleId":"598","severity":1,"message":"599","line":1,"column":1,"nodeType":"600","messageId":"601","fix":"602"},{"ruleId":"551","severity":1,"message":"603","line":3,"column":10,"nodeType":"553","messageId":"554","endLine":3,"endColumn":21},{"ruleId":"551","severity":1,"message":"604","line":4,"column":10,"nodeType":"553","messageId":"554","endLine":4,"endColumn":14},{"ruleId":"551","severity":1,"message":"605","line":5,"column":30,"nodeType":"553","messageId":"554","endLine":5,"endColumn":35},{"ruleId":"551","severity":1,"message":"606","line":8,"column":8,"nodeType":"553","messageId":"554","endLine":8,"endColumn":16},{"ruleId":"551","severity":1,"message":"607","line":23,"column":7,"nodeType":"553","messageId":"554","endLine":23,"endColumn":18},{"ruleId":"551","severity":1,"message":"608","line":64,"column":11,"nodeType":"553","messageId":"554","endLine":64,"endColumn":21},{"ruleId":"551","severity":1,"message":"609","line":66,"column":14,"nodeType":"553","messageId":"554","endLine":66,"endColumn":35},{"ruleId":"551","severity":1,"message":"610","line":151,"column":13,"nodeType":"553","messageId":"554","endLine":151,"endColumn":18},{"ruleId":"551","severity":1,"message":"611","line":4,"column":30,"nodeType":"553","messageId":"554","endLine":4,"endColumn":50},{"ruleId":"551","severity":1,"message":"612","line":43,"column":11,"nodeType":"553","messageId":"554","endLine":43,"endColumn":20},{"ruleId":"551","severity":1,"message":"613","line":20,"column":10,"nodeType":"553","messageId":"554","endLine":20,"endColumn":18},{"ruleId":"551","severity":1,"message":"614","line":67,"column":9,"nodeType":"553","messageId":"554","endLine":67,"endColumn":21},{"ruleId":"551","severity":1,"message":"615","line":85,"column":12,"nodeType":"553","messageId":"554","endLine":85,"endColumn":21},{"ruleId":"551","severity":1,"message":"566","line":3,"column":8,"nodeType":"553","messageId":"554","endLine":3,"endColumn":16},{"ruleId":"548","severity":1,"message":"549","line":54,"column":1,"nodeType":"550","endLine":122,"endColumn":2},{"ruleId":"551","severity":1,"message":"557","line":55,"column":11,"nodeType":"553","messageId":"554","endLine":55,"endColumn":18},{"ruleId":"551","severity":1,"message":"616","line":58,"column":24,"nodeType":"553","messageId":"554","endLine":58,"endColumn":37},{"ruleId":"548","severity":1,"message":"549","line":23,"column":1,"nodeType":"550","endLine":146,"endColumn":2},{"ruleId":"551","severity":1,"message":"617","line":35,"column":11,"nodeType":"553","messageId":"554","endLine":35,"endColumn":30},{"ruleId":"551","severity":1,"message":"618","line":5,"column":10,"nodeType":"553","messageId":"554","endLine":5,"endColumn":13},{"ruleId":"551","severity":1,"message":"619","line":10,"column":8,"nodeType":"553","messageId":"554","endLine":10,"endColumn":18},{"ruleId":"551","severity":1,"message":"620","line":63,"column":11,"nodeType":"553","messageId":"554","endLine":63,"endColumn":25},{"ruleId":"551","severity":1,"message":"621","line":64,"column":11,"nodeType":"553","messageId":"554","endLine":64,"endColumn":24},{"ruleId":"551","severity":1,"message":"622","line":75,"column":12,"nodeType":"553","messageId":"554","endLine":75,"endColumn":24},{"ruleId":"551","severity":1,"message":"623","line":75,"column":26,"nodeType":"553","messageId":"554","endLine":75,"endColumn":39},{"ruleId":"551","severity":1,"message":"624","line":75,"column":41,"nodeType":"553","messageId":"554","endLine":75,"endColumn":45},{"ruleId":"551","severity":1,"message":"625","line":149,"column":13,"nodeType":"553","messageId":"554","endLine":149,"endColumn":32},{"ruleId":"551","severity":1,"message":"626","line":153,"column":13,"nodeType":"553","messageId":"554","endLine":153,"endColumn":23},{"ruleId":"548","severity":1,"message":"549","line":20,"column":1,"nodeType":"550","endLine":87,"endColumn":2},{"ruleId":"627","severity":1,"message":"628","line":95,"column":5,"nodeType":"629","messageId":"630","endLine":111,"endColumn":6},{"ruleId":"551","severity":1,"message":"631","line":9,"column":11,"nodeType":"553","messageId":"554","endLine":9,"endColumn":15},{"ruleId":"548","severity":1,"message":"549","line":16,"column":1,"nodeType":"550","endLine":46,"endColumn":2},{"ruleId":"551","severity":1,"message":"632","line":3,"column":8,"nodeType":"553","messageId":"554","endLine":3,"endColumn":19},{"ruleId":"548","severity":1,"message":"549","line":27,"column":1,"nodeType":"550","endLine":126,"endColumn":2},{"ruleId":"551","severity":1,"message":"633","line":2,"column":8,"nodeType":"553","messageId":"554","endLine":2,"endColumn":17},{"ruleId":"551","severity":1,"message":"634","line":3,"column":8,"nodeType":"553","messageId":"554","endLine":3,"endColumn":24},{"ruleId":"551","severity":1,"message":"635","line":4,"column":8,"nodeType":"553","messageId":"554","endLine":4,"endColumn":24},{"ruleId":"551","severity":1,"message":"636","line":5,"column":8,"nodeType":"553","messageId":"554","endLine":5,"endColumn":22},{"ruleId":"551","severity":1,"message":"586","line":6,"column":10,"nodeType":"553","messageId":"554","endLine":6,"endColumn":20},{"ruleId":"551","severity":1,"message":"568","line":6,"column":22,"nodeType":"553","messageId":"554","endLine":6,"endColumn":36},{"ruleId":"551","severity":1,"message":"618","line":6,"column":46,"nodeType":"553","messageId":"554","endLine":6,"endColumn":49},{"ruleId":"551","severity":1,"message":"576","line":7,"column":30,"nodeType":"553","messageId":"554","endLine":7,"endColumn":40},{"ruleId":"551","severity":1,"message":"637","line":8,"column":10,"nodeType":"553","messageId":"554","endLine":8,"endColumn":22},{"ruleId":"551","severity":1,"message":"638","line":9,"column":10,"nodeType":"553","messageId":"554","endLine":9,"endColumn":31},{"ruleId":"551","severity":1,"message":"639","line":3,"column":31,"nodeType":"553","messageId":"554","endLine":3,"endColumn":43},{"ruleId":"551","severity":1,"message":"618","line":11,"column":3,"nodeType":"553","messageId":"554","endLine":11,"endColumn":6},{"ruleId":"551","severity":1,"message":"640","line":20,"column":3,"nodeType":"553","messageId":"554","endLine":20,"endColumn":13},{"ruleId":"551","severity":1,"message":"569","line":79,"column":28,"nodeType":"553","messageId":"554","endLine":79,"endColumn":41},{"ruleId":"551","severity":1,"message":"641","line":3,"column":8,"nodeType":"553","messageId":"554","endLine":3,"endColumn":16},{"ruleId":"551","severity":1,"message":"632","line":6,"column":8,"nodeType":"553","messageId":"554","endLine":6,"endColumn":19},{"ruleId":"551","severity":1,"message":"642","line":7,"column":10,"nodeType":"553","messageId":"554","endLine":7,"endColumn":23},{"ruleId":"548","severity":1,"message":"549","line":46,"column":1,"nodeType":"550","endLine":118,"endColumn":2},{"ruleId":"548","severity":1,"message":"549","line":23,"column":1,"nodeType":"550","endLine":147,"endColumn":2},{"ruleId":"551","severity":1,"message":"617","line":35,"column":11,"nodeType":"553","messageId":"554","endLine":35,"endColumn":30},{"ruleId":"548","severity":1,"message":"643","line":1,"column":1,"nodeType":"550","endLine":29,"endColumn":2},{"ruleId":"548","severity":1,"message":"549","line":33,"column":3,"nodeType":"550","endLine":59,"endColumn":2},{"ruleId":"551","severity":1,"message":"644","line":4,"column":9,"nodeType":"553","messageId":"554","endLine":4,"endColumn":20},{"ruleId":"551","severity":1,"message":"645","line":5,"column":8,"nodeType":"553","messageId":"554","endLine":5,"endColumn":17},{"ruleId":"551","severity":1,"message":"646","line":7,"column":10,"nodeType":"553","messageId":"554","endLine":7,"endColumn":20},{"ruleId":"551","severity":1,"message":"647","line":69,"column":12,"nodeType":"553","messageId":"554","endLine":69,"endColumn":28},{"ruleId":"551","severity":1,"message":"648","line":97,"column":12,"nodeType":"553","messageId":"554","endLine":97,"endColumn":21},{"ruleId":"551","severity":1,"message":"649","line":4,"column":5,"nodeType":"553","messageId":"554","endLine":4,"endColumn":9},{"ruleId":"551","severity":1,"message":"566","line":10,"column":17,"nodeType":"553","messageId":"554","endLine":10,"endColumn":25},{"ruleId":"551","severity":1,"message":"586","line":5,"column":47,"nodeType":"553","messageId":"554","endLine":5,"endColumn":57},{"ruleId":"551","severity":1,"message":"618","line":5,"column":59,"nodeType":"553","messageId":"554","endLine":5,"endColumn":62},{"ruleId":"548","severity":1,"message":"549","line":30,"column":1,"nodeType":"550","endLine":190,"endColumn":2},{"ruleId":"551","severity":1,"message":"650","line":2,"column":25,"nodeType":"553","messageId":"554","endLine":2,"endColumn":31},{"ruleId":"551","severity":1,"message":"651","line":5,"column":8,"nodeType":"553","messageId":"554","endLine":5,"endColumn":16},{"ruleId":"551","severity":1,"message":"569","line":30,"column":30,"nodeType":"553","messageId":"554","endLine":30,"endColumn":43},{"ruleId":"551","severity":1,"message":"652","line":34,"column":11,"nodeType":"553","messageId":"554","endLine":34,"endColumn":33},{"ruleId":"627","severity":1,"message":"628","line":41,"column":9,"nodeType":"629","messageId":"630","endLine":53,"endColumn":10},{"ruleId":"551","severity":1,"message":"650","line":2,"column":25,"nodeType":"553","messageId":"554","endLine":2,"endColumn":31},{"ruleId":"551","severity":1,"message":"653","line":24,"column":11,"nodeType":"553","messageId":"554","endLine":24,"endColumn":26},{"ruleId":"551","severity":1,"message":"654","line":5,"column":3,"nodeType":"553","messageId":"554","endLine":5,"endColumn":19},{"ruleId":"551","severity":1,"message":"650","line":12,"column":3,"nodeType":"553","messageId":"554","endLine":12,"endColumn":9},{"ruleId":"551","severity":1,"message":"655","line":13,"column":3,"nodeType":"553","messageId":"554","endLine":13,"endColumn":12},{"ruleId":"551","severity":1,"message":"586","line":14,"column":3,"nodeType":"553","messageId":"554","endLine":14,"endColumn":13},{"ruleId":"551","severity":1,"message":"576","line":19,"column":10,"nodeType":"553","messageId":"554","endLine":19,"endColumn":20},{"ruleId":"551","severity":1,"message":"656","line":21,"column":8,"nodeType":"553","messageId":"554","endLine":21,"endColumn":14},{"ruleId":"551","severity":1,"message":"657","line":29,"column":10,"nodeType":"553","messageId":"554","endLine":29,"endColumn":28},{"ruleId":"551","severity":1,"message":"658","line":86,"column":5,"nodeType":"553","messageId":"554","endLine":86,"endColumn":13},{"ruleId":"551","severity":1,"message":"659","line":90,"column":5,"nodeType":"553","messageId":"554","endLine":90,"endColumn":13},{"ruleId":"551","severity":1,"message":"660","line":91,"column":5,"nodeType":"553","messageId":"554","endLine":91,"endColumn":14},{"ruleId":"551","severity":1,"message":"661","line":101,"column":10,"nodeType":"553","messageId":"554","endLine":101,"endColumn":23},{"ruleId":"662","severity":1,"message":"663","line":165,"column":41,"nodeType":"664","messageId":"665","endLine":165,"endColumn":74,"fix":"666"},{"ruleId":"667","severity":1,"message":"668","line":196,"column":77,"nodeType":"669","messageId":"601","endLine":196,"endColumn":79},{"ruleId":"667","severity":1,"message":"668","line":207,"column":89,"nodeType":"669","messageId":"601","endLine":207,"endColumn":91},{"ruleId":"551","severity":1,"message":"670","line":85,"column":12,"nodeType":"553","messageId":"554","endLine":85,"endColumn":27},{"ruleId":"551","severity":1,"message":"671","line":86,"column":12,"nodeType":"553","messageId":"554","endLine":86,"endColumn":33},{"ruleId":"551","severity":1,"message":"672","line":86,"column":35,"nodeType":"553","messageId":"554","endLine":86,"endColumn":59},"no-native-reassign",["673"],"no-negated-in-lhs",["674"],"import/no-anonymous-default-export","Assign arrow function to a variable before exporting as module default","ExportDefaultDeclaration","no-unused-vars","'url' is assigned a value but never used.","Identifier","unusedVar","'useRouteMatch' is defined but never used.","'useParams' is defined but never used.","'_logger' is assigned a value but never used.","'useState' is defined but never used.","'children' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: '_logger', 'dispatch', and 'struttura'. Either include them or remove the dependency array.","ArrayExpression",["675"],"'log' is defined but never used.","'qs' is defined but never used.","'Fragment' is defined but never used.","'FieldArray' is defined but never used.","'InputAdornment' is defined but never used.","'closeSnackbar' is assigned a value but never used.","'Grid' is defined but never used.","'IconButton' is defined but never used.","'CircularProgress' is defined but never used.","'Field' is defined but never used.","'Button' is defined but never used.","'DateTimePicker' is defined but never used.","'DatePicker' is defined but never used.","'Paper' is defined but never used.","'classes' is assigned a value but never used.","'addYears' is defined but never used.","'serverSideFilterList' is assigned a value but never used.","'setServerSideFilterList' is assigned a value but never used.","'isLoading' is assigned a value but never used.","'setIsLoading' is assigned a value but never used.","'appuntamenti' is assigned a value but never used.","'setTotalRows' is assigned a value but never used.","'Typography' is defined but never used.","'Card' is defined but never used.","'FormHelperText' is defined but never used.","'pl' is defined but never used.","'MIN_NOME_STRUTTURA_LENGTH' is assigned a value but never used.","'MIN_DESCRIZIONE_LENGTH' is assigned a value but never used.","'loadError' is assigned a value but never used.","'indirizzoErrorMsg' is assigned a value but never used.","'Redirect' is defined but never used.","'getUserInfo' is assigned a value but never used.","'utenteStrutturaIsLoading' is assigned a value but never used.","'utenteAssociazioneIsLoading' is assigned a value but never used.","unicode-bom","Unexpected Unicode BOM (Byte Order Mark).","Program","unexpected",{"range":"676","text":"677"},"'useDispatch' is defined but never used.","'fade' is defined but never used.","'Badge' is defined but never used.","'MoreIcon' is defined but never used.","'drawerWidth' is assigned a value but never used.","'isMenuOpen' is assigned a value but never used.","'handleProfileMenuOpen' is defined but never used.","'state' is assigned a value but never used.","'R2D_LOGOUT_REQUESTED' is defined but never used.","'isNewUser' is assigned a value but never used.","'parseISO' is defined but never used.","'ORARIO_EMPTY' is assigned a value but never used.","'getOrario' is defined but never used.","'setCoordinate' is assigned a value but never used.","'DEFAULT_EVENT_COLOR' is assigned a value but never used.","'Box' is defined but never used.","'UploadIcon' is defined but never used.","'isMediumScreen' is assigned a value but never used.","'isLargeScreen' is assigned a value but never used.","'getRootProps' is assigned a value but never used.","'getInputProps' is assigned a value but never used.","'open' is assigned a value but never used.","'dropzoneInlineStyle' is assigned a value but never used.","'getNumCols' is assigned a value but never used.","default-case","Expected a default case.","SwitchStatement","missingDefaultCase","'flex' is assigned a value but never used.","'appInsights' is defined but never used.","'Accordion' is defined but never used.","'AccordionSummary' is defined but never used.","'AccordionDetails' is defined but never used.","'FilterListIcon' is defined but never used.","'ParsableDate' is defined but never used.","'MaterialUiPickersDate' is defined but never used.","'ErrorMessage' is defined but never used.","'RadioGroup' is defined but never used.","'buildUrl' is defined but never used.","'SeverityLevel' is defined but never used.","Assign object to a variable before exporting as module default","'useSelector' is defined but never used.","'PropTypes' is defined but never used.","'makeStyles' is defined but never used.","'decodeTipoOrario' is defined but never used.","'parseTime' is defined but never used.","'Fade' is defined but never used.","'Switch' is defined but never used.","'EditIcon' is defined but never used.","'handleEditPrenotazione' is assigned a value but never used.","'onChangeHandler' is assigned a value but never used.","'FormControlLabel' is defined but never used.","'TextField' is defined but never used.","'isDate' is defined but never used.","'StruttureUtentiAPI' is defined but never used.","'register' is assigned a value but never used.","'setValue' is assigned a value but never used.","'getValues' is assigned a value but never used.","'eventiLoading' is assigned a value but never used.","no-whitespace-before-property","Unexpected whitespace before property idAbbonamento.","MemberExpression","unexpectedWhitespace",{"range":"678","text":"679"},"eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","'tipoAbbonamento' is assigned a value but never used.","'minDataInizioValidita' is assigned a value but never used.","'setMinDataInizioValidita' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"680","fix":"681"},[-1,0],"",[4938,4940],".","Update the dependencies array to be: [_logger, dispatch, nomeStruttura, struttura]",{"range":"682","text":"683"},[1481,1496],"[_logger, dispatch, nomeStruttura, struttura]"]